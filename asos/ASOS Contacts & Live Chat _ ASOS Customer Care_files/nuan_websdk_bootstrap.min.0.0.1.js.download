window.NuanMessaging=function(){var e,i,b,n,_,I,s,o,r=["dataCenter","tagServerName","vendorUUID"],a={},l=["west","east","eu1","lax1","aus"],h=window.document,u={},c="/tagserver/nuanceChat.html",d=0,p=!1,f=!1,D=0,P={},A=[],g={},m=[],v="nuanChatStage",S={set mode(t){switch(t.toLowerCase()){case"dev":case"development":d=0;break;case"prod":case"production":d=1}},get mode(){return 0===d?"dev":"prod"},set frameID(t){v=t},get frameID(){return v},set siteID(t){e=t},get siteID(){return e},setPageData:function(t,e){u[t]=e},resetPageData:function(){u={}},setMessageWatch:function(t){b=t},get tagServerUrl(){var t=["https://"];return t.push(a.tagServerName),i?t=[i]:-1!==l.indexOf(a.dataCenter)?t.push(".inq.com"):t.push(".digital.nuance.com"),t.join("")},overrideTagDomain:function(t){i=t},get chatLaunchFileAndPath(){return c},set chatLaunchFileAndPath(t){c=t},set pushNotificationID(t){u.nuancePushNotificationDeviceId=t},get pushNotificationID(){return u.nuancePushNotificationDeviceId},registerForMessagingEvents:function(t,e){P[t]||(P[t]=[]),P[t].push(e)},enabledAdBlockDetection:function(){this.addBlockEnabled=!0},enableCustomC2CRendering:function(t){p=!0,s=t},enableC2CPluginForMinimizedState:function(t){s=t},isDragEnabled:function(){return!(!this.dragResize&&void 0!==this.dragResize)},disableDrag:function(){this.dragResize=!1},setMessagingUIConfigs:function(t){this.uiConfig=t},getUIConfig:function(){return this.uiConfig},setFrameConfig:function(t,e,i){this.frameW=t,this.frameH=e,S.WindowPosition[i]?this.framePos=i:this.framePos="LOWER_RIGHT"},getVersion:function(){return"2.1.0"}};function N(t,e,i){this.command=t,this.info=e,this.brData=i}function w(t){var e=t.target;setTimeout(function(){o=new K(e),window.addEventListener("message",o.receiveMessage.bind(o)),S.setPageData("InqRegistry",{listeners:Object.keys(P)}),o.sendMessage(new N("StartLoading",S.getUIConfig(),u)),S.resetPageData(),S.addBlockEnabled&&(n.onDetected(y).onNotDetected(C),n.check(!1))},25)}function L(t){o&&o.sendMessage(t)}function E(t){setTimeout(function(){var t=S.tagServerUrl+S.chatLaunchFileAndPath+"?UUID="+a.vendorUUID,e=h.createElement("div");e.id=v,e.classList.add("floating-nuan-chat"),e.style.cssText="z-index:9999999;height:1px;width:1px;border-style: none;border-width: 0px;";var i=['<iframe title="Chat Window"'];i.push(' name="'+S.siteID+'"'),i.push(' src="'+t+'"'),i.push(" aria-hidden=true"),i.push(" hidden=true"),i.push(' scrolling="NO"'),i.push(" frameborder=0"),i.push("></iframe>"),e.innerHTML=i.join("");var n=h.getElementById("nuanMessagingFrame");if(n){var o=e.getElementsByTagName("IFRAME")[0];o.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-modals"),o.onload=w,n.appendChild(e),s&&s.setParentElement(e)}},t||25)}function y(){L(new N("AD_BLOCKER_DETECTED"))}function C(){x("ad blocker not detected")}function T(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}function M(t,e){this.p1=t,this.p2=e}function O(t){this.div=document.createElement("DIV"),this.div.id=t}function R(){top.window.addEventListener("focus",this.setWindowActive),top.window.document.addEventListener("visibilitychange",this.setWindowActive)}function t(n,o,s){var r;return function(){var t=this,e=arguments,i=s&&!r;clearTimeout(r),r=setTimeout(function(){r=null,s||n.apply(t,e)},o),i&&n.apply(t,e)}}function x(t){0==d&&console.log("Messaging-WebSDK:"+t)}function H(t){return null==t||void 0===t}function k(t,e,i,n){n=n||!1,t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)}function B(t,e,i,n){k(t,e,i,n),m.push({target:t,type:e,listener:i})}function U(t,e,i,n){n=n||!1,t.removeEventListener?t.removeEventListener(e,i,n):t.attachEvent&&t.detachEvent("on"+e,i)}function W(t,e){var i;if(g[t]?i=g[t]:window[t]&&(i=window[t]),i)return i.apply(null,e);if(-1!=t.indexOf("."))for(var n,o=t.split("."),s=0;s<o.length;s++)void 0!==n?"function"==typeof n[o[s]]?n[o[s]].apply(parent,e):"object"==typeof n[o[s]]&&(n=n[o[s]]):"function"==typeof parent[o[s]]?parent[o[s]].apply(parent,[cmdParam]):"object"==typeof parent[o[s]]&&(n=parent[o[s]])}function Y(){return/(iPad|iPhone|iPod)/g.test(window.navigator.userAgent)}function G(){return"Phone"==_}function V(){return"Tablet"==_}function X(){return V()&&Y()}function F(){var t="Unknown",e=window.navigator.platform,i=window.navigator.userAgent;return/Android/.test(i)?t="Android":/iPhone/.test(i)||/iPad/.test(i)||/iPod/.test(i)?t="iOS":/Win/.test(e)?t="Windows":/Linux/.test(e)?t="Linux":/Mac/.test(e)&&(t="Mac OS"),t}function z(){return new RegExp("Android.*?(wv|Version\\/[.0-9]+).*?Chrome\\/[0-9]{2}","i").test(window.navigator.userAgent)}S.Events={ON_RULE_SATISFIED:"onRuleSatisfied",ON_SERVICE_INVITATION:"onServiceInvitation",ON_SERVICE_ENGAGED:"onServiceEngaged",ON_SERVICE_INTERACTED:"onServiceInteracted",ON_SERVICE_MISSED:"onServiceMissed",ON_SERVICE_QUALIFIED:"onExposureQualified",ON_C2C_READY:"onC2CReadyForSDK",ON_C2C_DISPLAYED:"onC2CDisplayed",ON_C2C_STATE_CHANGED:"onC2CStateChanged",ON_C2C_CLICKED:"onC2CClicked",ON_CHAT_REQUESTED:"onChatRequested",ON_CHAT_LAUNCHED:"onChatLaunched",ON_CHAT_SHOWN:"onChatShown",ON_CHAT_CLOSED:"onChatClosed",ON_AGENT_MSG:"onAgentMsg",ON_CUSTOMER_MSG:"onCustomerMsg",ON_AGENT_ASSIGNED:"onAgentAssigned",ON_CHAT_ENGAGED_EVENT:"onChatEngagedEvent",ON_CHAT_EVENT:"onChatEvent",ON_BEFORE_CHAT_CLOSED_EVENT:"onBeforeChatClosed",ON_AGENT_DATAPASS:"onAgentDataPass",ON_RECEIVE_VA_DATAPASS:"onReceiveVADataPass",ON_CHAT_ROOM_READY:"onChatroomReady",ON_QUEUE_MESSAGE:"onQeueMsg",ON_ANY_EVENT:"onAnyEvent",ON_TRANSCRIPT_RCV_EVENT:"onTranscriptReceived",ON_FRAMEWORK_READY_EVENT:"onFrameworkReady"},S.WindowPosition={LOWER_RIGHT:"LOWER_RIGHT",LOWER_LEFT:"LOWER_LEFT",LOWER_CENTER:"LOWER_CENTER",UPPER_CENTER:"UPPER_CENTER",UPPER_LEFT:"UPPER_LEFT",UPPER_RIGHT:"UPPER_RIGHT",CENTER_LEFT:"CENTER_LEFT",CENTER_RIGHT:"CENTER_RIGHT",CENTER:"CENTER"},N.prototype.toJSON=function(){return{command:this.command,info:this.info,brData:this.brData}},N.prototype.setCallback=function(t,e){this.cb=t,this.clear=void 0===e||e},T.prototype.setBRPosition=function(t,e,i,n){this.r=t,this.b=e,this.width=i,this.height=n},T.prototype.isXYAxisPos=function(){return 0<=this.x&&0<=this.y},T.prototype.toJSON=function(){return{x:this.x,y:this.y,r:this.r,b:this.b,width:this.width,height:this.height}},O.prototype.addCssText=function(t){this.div.style=t},O.prototype.setStyle=function(t,e){this.div.style[t]=e},O.prototype.setInnerHTML=function(t){this.div.innerHTML=t},O.prototype.appendToParent=function(t){t.appendChild(this.div)},O.prototype.setAttribute=function(t,e){this.div.setAttribute(t,e)},O.prototype.delete=function(){this.div.parentElement.removeChild(this.div)},R.prototype.setWindowActive=function(){window.top.document.hidden||L(new N("ACTIVE_WINDOW"))},R.prototype.removeListener=function(){top.window.removeEventListener("focus",this.setWindowActive),top.window.document.removeEventListener("visibilitychange",this.setWindowActive)};function j(t){function e(){setTimeout(function(){!0===i._options.checkOnLoad&&(!0===i._options.debug&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._createBait(),setTimeout(function(){i.check()},1))},1)}this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:1e3,loopMaxNumber:3600,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var i=this;void 0!==window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent("onload",e)}function K(t){this.frameEl=t}function q(){this.c2cs=[]}function Z(t){this.c2cData=t,this.listeners=[]}function Q(){}function J(){this.iframe=document.getElementById(S.frameID),this.area=null,this.resizeHandler=t(this.resizeEvent.bind(this),100),Y()&&(this.scrollHandler=t(this.scrollDebouncedEvent.bind(this),100),this.moveScrollHandler=this.touchMoveScrollHandler.bind(this),this.iphoneModel=function(){var t=document.createElement("canvas"),e="";if(t){var i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){var n=i.getExtension("WEBGL_debug_renderer_info");n&&(e=i.getParameter(n.UNMASKED_RENDERER_WEBGL))}}if(window.parent.screen.height/window.parent.screen.width==896/414&&3==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXSMax";break;default:result="iPhoneXSMax"}else if(window.parent.screen.height/window.parent.screen.width==896/414&&2==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXR";break;default:result="iPhoneXR"}else if(window.parent.screen.height/window.parent.screen.width==812/375&&3==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXS_XSMaxZoomed";break;case"Apple A11 GPU":result="iPhoneX";break;default:result="iPhoneX"}else if(window.parent.screen.height/window.parent.screen.width==812/375&&2==window.devicePixelRatio)switch(e){case"Apple A12 GPU":result="iPhoneXRZoomed";break;default:result="iPhoneXRZoomed"}else if(window.parent.screen.height/window.parent.screen.width==736/414&&3==window.devicePixelRatio)switch(e){case"Apple A8 GPU":result="iPhone6Plus";break;case"Apple A9 GPU":result="iPhone6sPlus";break;case"Apple A10 GPU":result="iPhone7Plus";break;case"Apple A11 GPU":result="iPhone8Plus";break;default:result="iPhone6Plus"}else if(window.parent.screen.height/window.parent.screen.width==667/375&&3==window.devicePixelRatio)switch(e){case"Apple A8 GPU":result="iPhone6PlusZoomed";break;case"Apple A9 GPU":result="iPhone6sPlusZoomed";break;case"Apple A10 GPU":result="iPhone7PlusZoomed";break;case"Apple A11 GPU":result="iPhone8PlusZoomed";break;default:result="iPhone6PlusZoomed"}else if(window.parent.screen.height/window.parent.screen.width==667/375&&2==window.devicePixelRatio)switch(e){case"Apple A8 GPU":result="iPhone6";break;case"Apple A9 GPU":result="iPhone6s";break;case"Apple A10 GPU":result="iPhone7";break;case"Apple A11 GPU":result="iPhone8";break;default:result="iPhone6"}else if(window.parent.screen.height/window.parent.screen.width==1.775&&2==window.devicePixelRatio)switch(e){case"PowerVR SGX 543":result="iPhone5";break;case"Apple A7 GPU":result="iPhone5s";break;case"Apple A8 GPU":result="iPhone6Zoomed";break;case"Apple A9 GPU":result="iPhone6sZoomed";break;case"Apple A10 GPU":result="iPhone7Zoomed";break;case"Apple A11 GPU":result="iPhone8Zoomed";break;default:result="iPhone6Zoomed"}else result="Not an iPhone";return result}()),J.bottomDelta=0,p&&null!=s&&s.isCloseBtnDisplayed()&&(J.bottomDelta+=s.getHeight()),this.chatActive=!1,this.chatframe=this.iframe.querySelector("iframe")}j.prototype._options=null,j.prototype._var=null,j.prototype._bait=null,j.prototype._log=function(t,e){x("[BlockingDetector]["+t+"] "+e)},j.prototype.setOption=function(t,e){if(void 0!==e){var i=t;(t={})[i]=e}for(var n in t)this._options[n]=t[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+t[n]+'"');return this},j.prototype._createBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=window.document.body.appendChild(t),!0===this._options.debug&&this._log("_createBait","Bait has been created")},j.prototype._destroyBait=function(){window.document.body.removeChild(this._var.bait),!(this._var.bait=null)===this._options.debug&&this._log("_destroyBait","Bait has been removed")},j.prototype.check=function(t){if(void 0===t&&(t=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===t?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._createBait();var e=this;return!(this._var.loopNumber=0)===t&&(this._var.loop=setInterval(function(){e._checkBait(t)},this._options.loopCheckTime)),setTimeout(function(){e._checkBait(t)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},j.prototype._checkBait=function(t){var e=!1;if(null===this._var.bait&&this._createBait(),null===window.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(e=!0),void 0!==window.getComputedStyle){var i=window.getComputedStyle(this._var.bait,null);!i||"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(e=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===e?"positive":"negative")),!0===t&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===e?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},j.prototype._stopLoop=function(t){clearInterval(this._var.loop),this._var.loop=null,!(this._var.loopNumber=0)===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},j.prototype.emitEvent=function(t){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===t?"positive":"negative")+" detection was called");var e=this._var.event[!0===t?"detected":"notDetected"];for(var i in e)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+e.length),e.hasOwnProperty(i)&&e[i]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},j.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},j.prototype.on=function(t,e){return this._var.event[!0===t?"detected":"notDetected"].push(e),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===t?"detected":"notDetected")+'" was added'),this},j.prototype.onDetected=function(t){return this.on(!0,t)},j.prototype.onNotDetected=function(t){return this.on(!1,t)},void 0===n&&(n=new j({checkOnLoad:!0,resetOnEnd:!0})),K.prototype.receiveMessage=function(t){var i;b&&b("RECEIVED",t.data);try{i=JSON.parse(t.data)}catch(t){x("failed to parse json")}if(this.verifyMessage(i)){switch(i.command){case"CHAT_EVENT":P&&P[i.info.name]&&P[i.info.name].forEach(function(t){t(i.info.data)});break;case"CALL_OUT_FUNC":W(i.info.name,i.info.params);break;case"PERSISTENT_URL_ACTION":var e;nt.c2cs.forEach(function(t){t.c2cData.c2cIdx==i.info.c2cIdx&&(e=t)});var n=q.getPersistentWindow(e);if(n&&(n.close(),n=null),!n&&(q.earlyPopout&&!q.earlyPopout.closed||q.earlyPopoutChat(i.info.theme),q.earlyPopout))try{q.earlyPopout.location.href=S.tagServerUrl+i.info.src+"?UUID="+S.vendorUUID+"&siteID="+S.siteID,e.popoutWindow=q.earlyPopout,q.earlyPopout=null}catch(t){q.earlyPopout=null}break;case"PERSISTENT_WINDOW_CLOSE":q.earlyPopout?(q.earlyPopout.close(),q.earlyPopout=null):nt.c2cs.forEach(function(t){t.popoutWindow&&t.popoutWindow.close()});break;case"EXECUTE_AND_RETURN_FUNC":var o=i.info.name,s=W(o,i.info.params);if(s){var r={};r[o]=s,NuanMessaging.SDKAPI.publishNewPageData(r)}break;case"FETCH_PAGE_DATA":var a=i.info||[];if(0<a.length){var l={};a.forEach(function(t){var i=String(t).split("."),n=window,o=l;i.every(function(t,e){return e===i.length-1?(n[t]&&(o[t]=n[t]),!0):!!(n=n[t])&&(o=o[t]={},!0)})}),0<Object.keys(l).length&&NuanMessaging.SDKAPI.publishNewPageData(l)}break;case"FETCH_DOM_DATA":var h=i.info||[];if(0<h.length){var u={};h.forEach(function(t){var e=document.querySelector(t);if(e){var i=e.value?e.value:e.textContent?e.textContent:e.innerText;i&&(u[t]=i)}}),0<Object.keys(u).length&&NuanMessaging.SDKAPI.publishNewPageData(u)}break;case"REGISTER_DOM_EVENT":if(i.info.eventData){var c=[],d=i.info.eventData,p=d.domElements;if(d.domElementId){var f=document.getElementById(d.domElementId);f&&(c[0]=f)}if(p.forEach(function(t){if(t.elementId){var e=document.getElementById(t.elementId);e&&(c[0]=e)}else if(t.className)c.push(document.getElementsByClassName(t.className));else if(t.elementName)c.append(document.getElementsByName(t.elementName));else if(t.tagName)c.push(document.getElementsByTagName(t.tagName));else if(t.funcName){var i=W(t.funcName);i&&Array.isArray(i)&&c.push(i)}}),0<c.length){function g(t){var e=d.hoverTime?d.hoverTime:15e3;w=window.setTimeout(function(){L(new N("EVENT_GENERATED",{ruleId:i.info.ruleId,evtObj:t,evtData:d}))},e)}function m(t){window.clearTimeout(w)}function v(t){L(new N("EVENT_GENERATED",{ruleId:i.info.ruleId,evtObj:t,evtData:d}))}for(var w,E=0;E<c.length;E++){var y=c[E];y&&("mouseover"==d.id?(B(y,"mouseover",g),B(y,"mouseout",m)):B(y,d.id,v))}}}break;case"POSITION_IFRAME":_=i.info.deviceType,(I=I||new J).render(i.info);break;case"MINIMIZE_WINDOW":I&&I.minimize(),nt&&nt.renderState(nt.IMAGETYPES.minimized,{launchable:!0});break;case"DEEPLINK_COMMAND":var C=i.info.url,T=i.info.target;if(C&&C.startsWith("http")&&T)if("_self"==T)top.document.location.href=C;else{null==window.top.open(C,T,"top=0;left=0")&&window.top.open(C,T)}break;case"NEW_MSG_ON_MINIMIZED":D+=1,nt.messageOnMinimized(i.info);break;case"VIRTUAL_KEYBOARD_OPEN":I&&I.virtualKeyboardDisplayed();break;case"VIRTUAL_KEYBOARD_HIDDEN":I&&I.virtualKeyboardHidden();break;default:this.fireCallbackQueue(A,i)}t.stopImmediatePropagation()}else x("Failed to verify the UUID")},K.prototype.fireCallbackQueue=function(t,i){var n=-1;t.every(function(t,e){return t.command!=i.command||(t.cb&&t.cb(i.info),t.clear&&(n=e),!1)}),-1!=n&&t.splice(n,1)},K.prototype.sendMessage=function(t){b&&b("POST",t),this.frameEl.contentWindow.postMessage(JSON.stringify(t),S.tagServerUrl)},K.prototype.verifyMessage=function(t){return!(!t||t.UUID!=a.vendorUUID)},q.lastusedC2CId=null,q.c2cBtnId=null,q.prototype.render=function(t){var e;(f||t.minimized&&t.minimized.state)&&(t.image=this.IMAGETYPES.minimized,t.count=t.minimized&&t.minimized.count?t.minimized.count:D,t.launchable=!0),!p||t.c2cTheme&&t.c2cTheme.renderAsHTML?(f||t.minimized&&t.minimized.state)&&s?s.isDisplayed()||s.renderC2CButton(t):(e=new Z(t)).renderC2CButton(t)&&this.c2cs.push(e):s&&!s.isDisplayed()&&((e=s).renderC2CButton(t),this.c2cs.push(s)),t.isPersistentChat&&"chatactive"==t.displayState&&(e.popoutWindow=q.getPersistentWindow(e,"chatactive"))},q.prototype.messageOnMinimized=function(e){!p&&s&&s.isDisplayed()?s.newMinimizedMessage(D,e):this.c2cs.forEach(function(t){t.newMinimizedMessage(D,e)})},q.prototype.clear=function(){this.c2cs.forEach(function(t){t.clearListeners(),t.clear()}),this.c2cs=[],q.earlyPopout=null,D=0,f=!1},q.prototype.setDisabled=function(t){this.c2cs.forEach(function(t){t.showDisabled()}),!p&&s&&s.isDisplayed()&&(s.clearListeners(),s.clear())},q.prototype.renderState=function(e,i){p||s?s&&s.isDisplayed()&&e!=this.IMAGETYPES.chatactive?s.renderState(e,i):e!=this.IMAGETYPES.minimized||p||(i.image=this.IMAGETYPES.minimized,s.renderC2CButton(i)):this.c2cs.forEach(function(t){t.c2cData.c2cIdx==i.c2cIdx&&t.showIcon(e,i.launchable,t.c2cData,t.div,i.chatVisible)})},q.prototype.c2cCallbackHandler=function(t,e){!p&&e&&"disabled"==e.state?this.setDisabled():t&&t(e)},q.prototype.IMAGETYPES={disabled:"d",chatactive:"d",busy:"b",afterHours:"ah",ready:"r",minimized:"m"},Z.prototype.renderC2CButton=function(t){var e=this.getDiv(t.pageElementID),i=this.div=e;return!this.isDivOccupied(e)&&(null!=i&&void 0!==t.lang&&e.setAttribute("lang",t.lang),t.adaCompliant&&e.setAttribute("aria-live","polite"),e.occupied=!0,e.idx=t.c2cIdx,t.abs&&(e.style.position="absolute",e.style.top=t.abs.y,e.style.left=t.abs.x),this.showIcon(t.image,t.launchable,t,e,!1),!0)},Z.prototype.showIcon=function(t,e,i,n,o){i.c2cTheme.renderAsHTML?this.showTextButton(t,e,i,n):this.showImg(t,e,i,n,o),this.fixC2CLocation(n),this.updateContainerStyle(n)},Z.prototype.showTextButton=function(t,e,i,n){var o=i.c2cTheme[t];n.innerHTML="<div "+(Y()?' tabindex="0"':"")+">"+o+"</div>",e&&this.addEventHandlers(n,i.c2cIdx,"onclick",i,t)},Z.prototype.newMinimizedMessage=function(t){},Z.prototype.showImg=function(t,e,i,n,o){var s=i.c2cTheme[t+"alt"];void 0!==s&&null!=s&&""!==s||(s="Click To Chat");var r=Y()?"ontouchstart":"onclick",a=e?' alt="'+s+'" tabindex="0"':'alt="'+s+'"';if((i.c2p||i.adaCompliant)&&e?n.innerHTML='<input type="image" role="button" src="'+i.mediaURL+"/images/"+i.c2cTheme[t]+'"'+a+(i.adaCompliant?' style="cursor:default" ':"")+"/>":n.innerHTML='<img src="'+i.mediaURL+"/images/"+i.c2cTheme[t]+'"'+a+' style="cursor:default" '+(o?'aria-hidden="true" tabindex="-1"':"")+"/>",e&&this.addEventHandlers(n,i.c2cIdx,r,i,t),!0===i.reDisplay&&(!q.lastusedC2CId&&null==q.c2cBtnId&&0===n.idx||!q.lastusedC2CId&&null!=q.c2cBtnId&&q.c2cBtnId==n.idx||q.lastusedC2CId&&q.lastusedC2CId===n.id)){var l=document.getElementById(n.id),h=!!i.ignorePageScrollingOnC2CFocus;("Phone"==i.deviceType||"Tablet"==i.deviceType||"fixed"===l.style.position||h||function(t){if(t){var e=t.getBoundingClientRect(),i=window.top.innerHeight,n=window.top.innerWidth;return 0<=e.top&&0<=e.left&&e.bottom<=i&&e.right<=n}}(l))&&window.setTimeout(function(){if(l&&l.firstChild){var t=Z.getControlElement(l.firstChild);t&&(t.hasAttribute("tabindex")||t.setAttribute("tabindex",0),t.focus())}q.lastusedC2CId=null},300)}else i.launchable&&!i.c2cTheme.renderAsHTML&&(q.c2cBtnId=this.idx)},Z.getControlElement=function(t){return"div"===t.tagName.toLowerCase()?Z.getControlElement(t.firstElementChild):"style"===t.tagName.toLowerCase()?Z.getControlElement(t.nextElementSibling):t},Z.prototype.addVirtualListener=function(){H(Z.VirtualKeyboardOpenCloseHandler)||Z.VirtualKeyboardOpenCloseHandler.addListener(this.c2cData)},Z.prototype.fixC2CLocation=function(t){var e,i,n,o,s,r="Tablet"===this.c2cData.deviceType,a="Android"===F();r&&a&&(e=getComputedStyle(t),i=parseInt(e.left)+parseInt(e.width)+parseInt(e.right),n=window.innerWidth,!isNaN(i)&&n<i&&""===(o=window.document.documentElement).style.zoom&&(s=n/i*100,o.style.zoom=s+"%"))},Z.prototype.updateContainerStyle=function(t){var e=t,i=e?e.children[0]:null;if(i){var n=i.getAttribute("data-parent-style");if((i.children[0]&&null==n||""==n)&&(n=i.children[0].getAttribute("data-parent-style")),null!=n&&""!=n&&(this.parentPositionStyle=this.parseStyle(n),this.applyStyle(e,this.parentPositionStyle),"Android"==F()&&n.contains("position")&&n.contains("fixed")))if(z())null!=this.parentPositionStyle.bottom&&null==this.parentPositionStyle.top&&(this.updateIconPosition(t),this.addListener(window.top,"scroll",this.updateIconPositionAfterDelay.bind(this))),this.addListener(window.top,"orientationchange",this.updateIconPositionToInitial.bind(this,eDiv));else if((0<=window.navigator.userAgent.indexOf("Chrome")||0<=window.navigator.userAgent.indexOf("CriOS"))&&!z()){if(this.isChangePositionNeeded()){var o=e.getElementsByTagName("img")[0],s=e.getElementsByTagName("input")[0];if(!o&&s&&"image"==s.type&&(o=s),o&&!o.complete){var r=o.onload;o.onload=function(){"function"==typeof r&&r(),this.updateIconPosition()}.bind(this)}else this.updateIconPosition()}this.addListener(window.top,"orientationchange",this.updateIconPositionAfterDelay.bind(this))}}},Z.prototype.isChangePositionNeeded=function(){var t=top.document.documentElement,e=t.scrollWidth/t.scrollHeight;return screen.width/screen.height<e},Z.prototype.updateIconPositionToInitial=function(t){this.applyStyle(t,this.parentPositionStyle),this.positionChanged=!1,this.updateIconPositionAfterDelay()},Z.prototype.updateIconPositionAfterDelay=function(){setTimeout(function(){this.updateIconPosition()}.bind(this),500)},Z.prototype.parseStyle=function(t){for(var e,i={},n=t.split(";"),o=0;o<n.length;o++)(e=n[o].split(":"))[0]&&(i[e[0].trim()]=e[1]?e[1].trim():"");return i},Z.prototype.applyStyle=function(t,e){var i={stylesMap:{},appliedProperty:[],addProperty:function(t){this.appliedProperty.push(t)},clearExcessivePropertyValue:function(t){for(var e=0;e<this.appliedProperty.length;e++)switch(this.appliedProperty[e]){case"top":-1==this.appliedProperty.indexOf("bottom")&&(t.style.bottom="");break;case"bottom":-1==this.appliedProperty.indexOf("top")&&(t.style.top="");break;case"left":-1==this.appliedProperty.indexOf("right")&&(t.style.right="");break;case"right":-1==this.appliedProperty.indexOf("left")&&(t.style.left="")}}};for(var n in"string"==typeof e&&(e=this.parseStyle(e)),i.stylesMap=e)t.style[n]=e[n],i.addProperty(n);i.clearExcessivePropertyValue(t)},Z.prototype.addEventHandlers=function(e,i,n,o,t){function s(){if(_=o.deviceType,o.isPersistentChat){var t=o.chatTheme;q.earlyPopoutChat(t)}return o.image==nt.IMAGETYPES.minimized?NuanMessaging.SDKAPI.onRestoredClicked():NuanMessaging.CIAPI.onC2CClicked(i),!1}function r(t){var e=(t=t||window.event).target||t.srcElement;3==e.nodeType&&(e=e.parentNode),e.style.cursor="pointer"}window.setTimeout(function(){var t=e.firstChild;t&&(t[n]=s,t.onmouseover=r)},300)},Z.prototype.updateIconPosition=function(t){var e,i=t,n=function(t){var e={};for(var i in t)e[i]=t[i];return e}(this.parentPositionStyle),o=!1,s=!1;if(z())window.top.pageYOffset<=0?a(0)&&(e=l(0),s=!0):this.positionChanged&&(o=!0);else if(this.isChangePositionNeeded()){if(this.positionChanged)a(0)&&(e=l(0),s=!0);else if(null!=n.bottom&&null==n.top){var r=parseInt(n.bottom);isNaN(r)||a(r)&&(e=l(r),s=!0)}}else this.positionChanged&&(o=!0);function a(t){return i.getBoundingClientRect().bottom+t>window.top.document.documentElement.scrollHeight}function l(t){return window.top.document.documentElement.scrollHeight-i.offsetHeight-t}s?(n.top=e+"px",delete n.bottom,this.applyStyle(i,n),this.positionChanged=!0):o&&(this.applyStyle(i,this.parentPositionStyle),this.positionChanged=!1)},Z.prototype.getDiv=function(t){return window.document.getElementById(t)},Z.prototype.isDivOccupied=function(t){return!t||!!t.occupied},Z.prototype.showDisabled=function(){this.div&&this.showIcon(nt.IMAGETYPES.disabled,!1,this.c2cData,this.div,!0)},Z.prototype.addListener=function(t,e,i){k(t,e,i),this.listeners.push({target:t,type:e,listener:i})},Z.prototype.clearListeners=function(){for(var t=this.listeners.length;t--;)U(this.listeners[t].target,this.listeners[t].type,this.listeners[t].listener)},Z.prototype.clear=function(){this.div&&(this.div.occupied=!1,this.div.innerHTML="")},q.earlyPopoutChat=function(t){var e=null,i="toolbar=no,location=no,menubar=no,status=no,scrollbars=no,top="+t.py+",left="+t.px+",width="+(S.frameW?S.frameW:t.pw)+",height="+(S.frameH?S.frameW:t.ph)+",resizable=1";try{if("Android"==F()||"iOS"==F())return;e=top.open("","_inqPersistentChat",i)}catch(t){e=null}q.earlyPopout=e},q.getPersistentWindow=function(t,e){if("_inqPersistentChat"==window.parent.name)return!0;var i=null;try{if(t.popoutWindow&&t.popoutWindow.closed)return t.popoutWindow=null;if("chatactive"!=e&&!t.popoutWindow)return null;if(q.earlyPopout)return null;null!=(i=window.open("","_inqPersistentChat","toolbar=no,location=no,menubar=no,status=no,scrollbars=no,top=-500,left=-500,width=0,height=0"))&&(i==top||i==self?i=null:i.postMessage(JSON.stringify(new N("SET_PER_WIN")),"*")),t.popoutWindow=i}catch(t){i=null}return i},Z.VirtualKeyboardOpenCloseHandler={addListener:function(t){if("Phone"===t.deviceType&&!Y()){var o=t.pageElementID;this.c2cHandler=function(){var t=getElementById(o);if(!H(t)){var e=window.top.screen.width/window.top.innerWidth,i=window.top.innerHeight*e,n=window.top.screen.height;t.style.display=200<n-i?"none":"block"}},window.removeEventListener("resize",this.c2cHandler),window.addEventListener("resize",this.c2cHandler)}},removeListener:function(t){"Phone"!==t.deviceType||Y()||window.removeEventListener("resize",this.c2cHandler)}},Q.getScrollLeft=function(){try{var t=window.parent,e=t.document;return null!=t.pageXOffset?t.pageXOffset:null!=e.documentElement&&null!=e.documentElement.scrollLeft&&0!=e.documentElement.scrollLeft?e.documentElement.scrollLeft:e.body.scrollLeft}catch(t){}return 0},Q.getScrollTop=function(){try{var t=window.parent,e=t.document;return null!=t.pageYOffset?t.pageYOffset:null!=e.documentElement&&null!=e.documentElement.scrollTop&&0!=e.documentElement.scrollTop?e.documentElement.scrollTop:e.body.scrollTop}catch(t){}return 0},Q.getScrollWidth=function(){var t=window.parent,e=t.document,i=0;if(null==t.innerWidth)i=null!=e.documentElement&&0!=e.documentElement.clientWidth?e.documentElement.clientWidth:e.body.clientWidth;else{var n=t.innerWidth;n-=Q.hasRightScrollBar()?Q.getScrollBarWidth():0;var o=e.body.clientWidth;0==(i=V()||0==o?n:Math.min(o,n))&&(i=e.body.clientWidth)}return i},Q.getScrollHeight=function(){var t=0,e=window.parent.document;if(null==window.parent.innerHeight)t=null!=e.documentElement&&0!=e.documentElement.clientHeight?e.documentElement.clientHeight:e.body.clientHeight;else{var i=window.parent.innerHeight;i-=Q.hasBottomScrollBar()?Q.getScrollBarWidth():0;var n=e.body.clientHeight,o=e.body.scrollHeight;(t=0)==(t=0==n||n<=o?i:Math.min(n,i))&&(t=e.body.clientHeight)}return t},Q.hasRightScrollBar=function(){var t=window.parent.document.documentElement.clientHeight,e=window.parent.document.documentElement.clientWidth,i=window.parent.document.documentElement.scrollHeight,n=window.parent.innerWidth;return t<i||e<n},Q.hasBottomScrollBar=function(){var t=window.parent.document.documentElement.clientWidth,e=window.parent.document.documentElement.scrollWidth,i=window.parent.document.documentElement.clientHeight,n=window.parent.innerHeight;return t<e||i<n},Q.getScrollBarWidth=function(){var t,e,i,n;return(t=window.parent.document.createElement("div")).style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",(e=window.parent.document.createElement("div")).style.width="100%",e.style.height="200px",t.appendChild(e),window.parent.document.body.appendChild(t),i=e.offsetWidth,t.style.overflow="auto",n=e.offsetWidth,window.parent.document.body.removeChild(window.parent.document.body.lastChild),i-n},Q.getViewport=function(){return new T(Q.getScrollLeft(),Q.getScrollTop(),parseInt(window.parent.innerWidth),parseInt(window.parent.innerHeight))},J.prototype.render=function(t){window.parent;var e=Q.getViewport();if(this.theme=t,!f&&t.minimized&&t.minimized.state)return this.chatActive=!0,G()?this.resizeForPhone(e):(this.setDesktopArea(),this.setWH()),f=!0,D=t.minimized.count,t.reDisplay=!0,nt.render(t),this.setVisible(!1),void(this.chatframe.style.display="block");G()?(Y()?(this.addViewPort(),U(window,"scroll",this.scrollHandler),k(window,"scroll",this.scrollHandler),document.body.classList.add("chatopen"),window.scrollTo(0,1)):document.documentElement.style.overflow="hidden",e.width,e.height,window.requestAnimationFrame(function(){this.resizeForPhone(e),this.addAriaToParent()}.bind(this))):(this.setDesktopArea(),window.requestAnimationFrame(function(){this.setWH(),this.resizeWindow(),this.resizeEvent()}.bind(this))),U(window,"resize",this.resizeHandler),k(window,"resize",this.resizeHandler),this.chatframe.removeAttribute("aria-hidden"),this.chatframe.removeAttribute("hidden"),this.chatframe.style.display=null,this.addDragElement(t),this.chatActive=!0},J.prototype.setDesktopArea=function(){this.area=new T,this.area.width=S.frameW?S.frameW:this.theme.skinWidth,this.area.height=(S.frameH?S.frameH:this.theme.skinHeight+this.theme.titleBarHeight)+J.bottomDelta},J.prototype.resizeForPhone=function(){if(!this.isMinimized()&&this.chatActive){var t=Q.getViewport();this.area,this.area=new T(0,0,t.width,t.height),this.setWH(),this.updatePosition()}},J.prototype.addViewPort=function(){this.metaTag=document.createElement("meta"),this.metaTag.name="viewport",this.metaTag.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(this.metaTag)},J.prototype.scrollDebouncedEvent=function(){if(1==this.scrollState)return this.scrollState=0,this.forceScrollTimer&&clearTimeout(this.forceScrollTimer),void setTimeout(function(){this.isVirtualKeyboardPresent=!0,window.scrollTo(0,0),setTimeout(function(){2==this.scrollState&&this.scrollDebouncedEvent()}.bind(this),250),this.scrollState=2}.bind(this),200);if(1==this.isVirtualKeyboardPresent){this.scrollState=0;var t,e=Q.getViewport(),i=this.iframe.querySelector("iframe");t=visualViewport?e.height-function(){if(visualViewport){var t=visualViewport.height*visualViewport.scale;return Math.round(t)}return 0}():e.height>e.width?this.area.height*(J.keyBoardValuePort[this.iphoneModel]||.43):.6*this.area.height,this.iframe.style.height=null,this.iframe.style.bottom=t+"px";var n=getComputedStyle(this.iframe),o=parseInt(e.height,10),s=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10);i.style.height=o-t-s+"px",this.reLayout(),this.scrolled=window.top.pageYOffset,0==t?(this.scrollState=1,this.isVirtualKeyboardPresent=!1):(U(window,"scroll",this.scrollHandler),U(window,"scroll",this.moveScrollHandler),k(window,"scroll",this.moveScrollHandler),L(new N("KEYBOARD_OPEN")))}},J.prototype.virtualKeyboardDisplayed=function(){X()||(this.isVirtualKeyboardPresent=!1,this.iframe.style.bottom=null,U(window,"scroll",this.moveScrollHandler),U(window,"scroll",this.scrollHandler),k(window,"scroll",this.scrollHandler),this.scrollState=1,this.forceScrollTimer=setTimeout(function(){window.scrollBy(0,10)},200))},J.prototype.virtualKeyboardHidden=function(){X()||(this.kbHiddenTimer&&clearTimeout(this.kbHiddenTimer),this.kbHiddenTimer=setTimeout(function(){var t=Q.getViewport();this.isVirtualKeyboardPresent=!1,this.iframe.style.bottom=null,this.resizeForPhone(t),this.kbHiddenTimer=null}.bind(this),250),U(window,"scroll",this.moveScrollHandler))},J.prototype.touchMoveScrollHandler=function(t){t.preventDefault(),t.stopPropagation(),window.top.scrollTo(0,this.scrolled)},J.prototype.resizeEvent=function(){this.timeout&&window.cancelAnimationFrame(this.timeout),this.timeout=window.requestAnimationFrame(function(){var t=Q.getViewport();G()?(this.resizeForPhone(t),Y()&&this.isVirtualKeyboardPresent?t.width>t.height?this.scrollDebouncedEvent():(this.scrollState=1,U(window,"scroll",this.scrollHandler),k(window,"scroll",this.scrollHandler),this.forceScrollTimer=setTimeout(function(){window.scrollBy(0,10)},200)):Y()&&setTimeout(function(){window.scrollTo(0,0)},200),L(new N("KEYBOARD_OPEN"))):(Q.getScrollHeight()>parseInt(this.iframe.style.height)?(this.iframe.classList.contains("adjust-height")&&(this.iframe.classList.remove("adjust-height"),L(new N("FULL_SCREEN",!1))),this.resizeWindow(),this.area.height=parseInt(this.iframe.style.height)):(this.iframe.classList.contains("adjust-height")||(this.iframe.classList.add("adjust-height"),L(new N("FULL_SCREEN",!0))),this.area.height=Q.getViewport().height),Q.getScrollWidth()>parseInt(this.iframe.style.width)?(this.iframe.classList.contains("adjust-width")&&this.iframe.classList.remove("adjust-width"),this.resizeWindow(),this.area.width=parseInt(this.iframe.style.width)):(this.iframe.classList.contains("adjust-width")||this.iframe.classList.add("adjust-width"),this.area.width=Q.getViewport().width))}.bind(this))},J.prototype.setWH=function(){var t=this.iframe.querySelector("iframe"),e=getComputedStyle(this.iframe);this.iframe.style.width=this.area.width+"px",t.classList.add("enter"),t.style.width=this.area.width-(parseInt(e.paddingLeft)+parseInt(e.paddingRight))+"px",this.iframe.style.height=this.area.height+"px",G()?t.style.height=this.area.height-(parseInt(e.paddingTop)+parseInt(e.paddingBottom))+"px":t.style.height=this.area.height-J.bottomDelta-(parseInt(e.paddingTop)+parseInt(e.paddingBottom))+"px"},J.prototype.resizeWindow=function(){var t,e=this.area.width,i=this.area.height;-1!=this.theme.skinRightSaved&&-1!=this.theme.skinBottomSaved?((t=new M).p1=this.theme.skinRightSaved,t.p2=this.theme.skinBottomSaved):t=J.calcChatLocation(e,i,this.theme.skinLeft,this.theme.skinTop,S.framePos?S.framePos:this.theme.skinPosition),t.p1=J.setFixedRPosition(t.p1,e),t.p2=J.setFixedBPosition(t.p2,i),this.area.setBRPosition(t.p1,t.p2,e,i),this.updatePosition(e,i)},J.prototype.moveStage=function(t,e){new M,Q.getViewport();var i=Q.getScrollWidth()-(t+this.area.width),n=Q.getScrollHeight()-(e+this.area.height);this.area.setBRPosition(i,n,this.area.width,this.area.height),L(new N("UPDATE_CHAT_POSITION",this.area)),this.updatePosition(),this.theme.skinRightSaved=i,this.theme.skinBottomSaved=n},J.prototype.addDragElement=function(t){if(S.isDragEnabled()&&!G()){var e=this.titleBarEl=new O("nuanTitleBar");J.clearImage=t.imagePath+"clear.gif";var i=S.getUIConfig()&&S.getUIConfig().topBarConfig,n={};i&&(n=i.topBarSettings),e.addCssText("position:absolute; z-index: 9999999; height: 1px; width: 1px; left: 0px; top: 0px; cursor:move; borderThickness:0px"),e.setInnerHTML('<input type="image" src="'+J.clearImage+'" style="position:static;cursor:move;" alt="" tabindex="-1"/>'),e.setStyle("height",t.adjustDragBarHeight||n.adjustDragBarHeight||t.titleBarHeight+"px"),e.setStyle("width",t.adjustDragBarWidth||n.adjustDragBarWidth||this.area.width-t.dragAreaOffset+"px"),(t.adjustDragBarLeft||n.adjustDragBarLeft)&&e.setStyle("left",t.adjustDragBarLeft||n.adjustDragBarLeft),e.appendToParent(this.iframe),tt.setDragable(t.dragMode||S.getUIConfig()&&S.getUIConfig().appConfigProps.dragMode)}},J.prototype.updatePosition=function(t,e){this.reLayout()},J.prototype.reLayout=function(){this.area.isXYAxisPos()?(this.iframe.style.left=this.area.x+"px",this.iframe.style.top=this.area.y+"px"):(this.iframe.style.right=this.area.r+"px",this.iframe.style.bottom=this.area.b+"px",this.iframe.style.left=this.iframe.style.top=null)},J.prototype.addAriaToParent=function(){},J.prototype.removeAriaFromParent=function(){},J.prototype.minimize=function(){this.setVisible(!1),f=!0},J.prototype.isMinimized=function(){return f},J.prototype.setVisible=function(t){var e=this.iframe.querySelector("iframe");if(t)e.style.display=null,this.render(this.theme),f=!1,0<D&&L(new N("KEYBOARD_OPEN")),D=0,this.addAriaToParent();else{if(U(window,"resize",this.resizeHandler),this.titleBarEl){var i=this.titleBarEl.div[$.INSTANCE_LABEL];i&&i.clear(),this.titleBarEl.delete()}else U(window,"scroll",this.scrollHandler),U(window,"scroll",this.moveScrollHandler),Y()?(this.metaTag&&this.metaTag.parentElement.removeChild(this.metaTag),document.body.classList.remove("chatopen")):document.documentElement.style.overflow="scroll";this.iframe.classList.remove("adjust-height"),this.iframe.classList.remove("adjust-width"),e.classList.remove("enter"),this.iframe.style.height="1px",this.iframe.style.width="1px",this.iframe.style.top=null,this.iframe.style.left=null,this.isVirtualKeyboardPresent=!1,this.iframe.style.bottom=null,this.kbHiddenTimer&&clearTimeout(this.kbHiddenTimer),this.removeAriaFromParent(),this.area=null,e.setAttribute("aria-hidden",!0),e.setAttribute("hidden",!0),this.chatActive=!1}},J.prototype.clear=function(){this.setVisible(!1);var t=this.iframe.querySelector("iframe");t.style.width=null,t.style.height=null,setTimeout(function(){this.iframe.style.bottom=null,this.iframe.style.right=null,t.style.display="none"}.bind(this),500)},J.setFixedRPosition=function(t,e){return J.FixR(t,e)},J.setFixedBPosition=function(t,e){return J.FixB(t,e)},J.FixR=function(t,e){var i=t<0?0:t,n=i+e,o=Q.getScrollWidth();return o<n&&0!=i&&(i=o-e),i<0&&(i=0),i},J.FixB=function(t,e){var i=t<0?0:t,n=Q.getScrollHeight()-e;return n<i&&0!=i&&(i=n),i<0&&(i=0),i},J.chatPositionPadding=5,J.calcChatLocation=function(t,e,i,n,o){var s,r,a=0,l=0;Q.hasRightScrollBar(),Q.hasBottomScrollBar();switch("Microsoft Internet Explorer"==window.navigator.appName||-1!=window.navigator.userAgent.indexOf("Trident")?(0==(r=window.parent.document.documentElement.clientHeight)&&(r=window.parent.document.body.clientHeight),0==(s=window.parent.document.documentElement.clientWidth)&&(s=window.parent.document.body.clientWidth)):(r=window.parent.innerHeight,s=window.parent.innerWidth),t<J.minWidth&&(t=J.minWidth),e<J.minHeight&&(e=J.minHeight),o.toUpperCase()){case"UPPER CENTER":case"UPPER_CENTER":case"TOP_CENTER":l=r-e,a=s/2-t/2;break;case"UPPER_RIGHT":case"TOP_RIGHT":l=r-e,a=0;break;case"UPPER_LEFT":case"TOP_LEFT":l=r-e,a=s-t;break;case"CENTER_LEFT":l=r/2-e/2,a=s-t;break;case"CENTER_RIGHT":l=r/2-e/2,a=0;break;case"LOWER_LEFT":case"BOTTOM_LEFT":l=0,a=s-t;break;case"LOWER_CENTER":case"BOTTOM_CENTER":l=0,a=s/2-t/2;break;case"LOWER_RIGHT":case"BOTTOM_RIGHT":l=a=0;break;case"POP_UNDER_CENTER":a=s/2-t/2,l=r/2-e;break;case"ABSOLUTE":case"FIXED":case"RELATIVE":a=i,l=n;break;case"CENTER":a=s/2-t/2,l=r/2-e/2}return(null==a||a<0)&&(a=0),(null==l||top<0)&&(top=0),new M(0|a,0|l)},J.keyBoardValuePort={iPhoneX:.45};var $=function(){this.className="DragResize",this.styleSaved="",this.cursor="default",this.pDraggerNow=null,this.touchIdentifier=$.TOUCH_IDENTIFER_UNUSED};$.o=null,$.typeof=function(t){return typeof t},$.WhenDone=function(){null!=$.instance&&$.instance.whenDone(),$.instance=null},$.prototype._removeEventListener=function(t,e,i){U(t,e,i)},$.prototype._attachEventListener=function(t,e,i){k(t,e,i)},$.prototype.bindClosures=function(){this.uponTouchStartClosure=this.uponTouchStart.bind(this),this.uponTouchCancelClosure=this.uponTouchCancel.bind(this),this.uponTouchEndClosure=this.uponTouchEnd.bind(this),this.uponTouchDragClosure=this.uponTouchDrag.bind(this),this.uponMouseDragStartClosure=this.uponDragStart.bind(this),this.uponMouseOutClosure=this.uponMouseOut.bind(this),this.uponMouseDragClosure=this.uponDrag.bind(this),this.uponMouseDropClosure=this.uponDrop.bind(this)},$.prototype.init=function(t,e){null!=t&&(this.dragImage=this.fixDragImage(t),this.obj=t,this.frame=e.getElementsByTagName("iframe")[0],null!=t[$.INSTANCE_LABEL]?x("o already has property for "+$.INSTANCE_LABEL+": "+t[$.INSTANCE_LABEL]):(t[$.INSTANCE_LABEL]=this,(e[$.INSTANCE_LABEL]=this).root=e&&null!=e?e:t,this.bindClosures(),this.isSupported("touchstart")&&(this.obj[$.INSTANCE_LABEL]=this)._attachEventListener(this.dragImage,"touchstart",this.uponTouchStartClosure),this.isSupported("mousedown")&&this._attachEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure)))},$.prototype.fixDragImage=function(t){var e,i,n=0;if("IMG"==t.nodeName.toUpperCase()){e=t.parentNode;var o=document.createElement("DIV");return o.id=t.id,o.style.cssText="background-color:#007700; opacity:0.4; "+String(t.style.cssText),o.title=t.title,e.insertBefore(o,t),t.style.height=t.style.width="100%",t.style.position="absolute",t.style.top=t.style.left="0px",t.id=o.id+"_image",e.removeChild(t),o}if("DIV"==t.nodeName.toUpperCase()){var s=t.getElementsByTagName("IMG");if(0<s.length){var r=null;for(n=0,i=s.length;n<i;){var a=n++;if(s[a].parentNode==t){r=s[a];break}}if(null!=r&&(e=r.parentNode)==t){var l=document.createElement("INPUT");return l.type="image",null==r.src||""==r.src?l.src=J.clearImage:l.src=r.src,l.style.cssText=String(t.style.cssText)+"; top:0px; left:0px; height: 100%; width: 100%;display:block;padding:0;margin:0;",l.className="tcChat",l.name="DragSafe",d(l),e.replaceChild(l,r),l}}var h=null,u=t.getElementsByTagName("INPUT");if(0<u.length){for(n=0,i=u.length;n<i;){var c=n++;if(u[c].parentNode==t){h=u[c];break}}null!=h&&"DragSafe"!=h.name&&(h.name="DragSafe",h.style.cssText=" cursor: move; top:0px; left:0px; height: 100%; width: 100%;display: block;padding:0;margin:0;",h.className="tcChat",d(h))}}function d(t){t.setAttribute("aria-hidden","true"),t.setAttribute("alt",""),t.setAttribute("tabindex","-1")}return t},$.prototype.isLeftClick=function(t){var e=t||window.event,i=1;return i="Netscape"==window.navigator.appName?t.which:window.parent.event.button,0==e.type.indexOf("touch")||1==i},$.prototype.fireDone=function(){this.whenDone()},$.prototype.fireDoneState=function(){$.instance=this,window.setTimeout($.WhenDone,1)},$.prototype.removeTouchEvents=function(){this._attachEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure),this._removeEventListener($.doc,"touchcancel",this.uponTouchCancelClosure),this._removeEventListener($.doc,"touchend",this.uponTouchEndClosure),this._removeEventListener($.doc,"touchmove",this.uponTouchDragClosure)},$.prototype.removeMouseEvents=function(){this._attachEventListener(this.dragImage,"touchstart",this.uponTouchStartClosure),this._removeEventListener($.doc,"mouseout",this.uponMouseOutClosure),this._removeEventListener($.doc,"mousemove",this.uponMouseDragClosure),this._removeEventListener($.doc,"mouseup",this.uponMouseDropClosure)},$.prototype.addTouchEvents=function(){this._removeEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure),this._attachEventListener($.doc,"touchcancel",this.uponTouchCancelClosure),this._attachEventListener($.doc,"touchend",this.uponTouchEndClosure),this._attachEventListener($.doc,"touchmove",this.uponTouchDragClosure)},$.prototype.addMouseEvents=function(){this._removeEventListener(this.obj,"touchstart",this.uponTouchStartClosure),this._attachEventListener($.doc,"mouseout",this.uponMouseOutClosure),this._attachEventListener($.doc,"mousemove",this.uponMouseDragClosure),this._attachEventListener($.doc,"mouseup",this.uponMouseDropClosure)},$.prototype.removeEvents=function(){this.removeMouseEvents(),this.fireDoneState()},$.prototype.uponTouchCancel=function(t){var e=t||window.event;return null!=e.preventDefault&&e.preventDefault(),!1},$.prototype.uponTouchEnd=function(t){try{var e=t||window.event;if(null!=e.preventDefault&&e.preventDefault(),this.touch=this.getTouchByIdentifer(e),null==this.touch)return!1;var i={X:this.touch.pageX-this.touchOffsetX,Y:this.touch.pageY-this.touchOffsetY};this.repositionTouch(i),this.removeTouchEvents(),this.done()}catch(t){x("ERROR: uponTouchEnd: "+t)}return!1},$.prototype.getTouchByIdentifer=function(t){try{var e=t.changedTouches;if(null==e)return null;if(this.touchIdentifier==$.TOUCH_IDENTIFER_UNUSED)return null;if(null!=e.identifiedTouch)return e.identifiedTouch(this.touchIdentifier);for(var i=0,n=e.length;i<n;){var o=i++;if(e[o].identifier==this.touchIdentifier)return e[o]}return null}catch(t){x("ERROR: getTouchByIdentifer: "+t)}return null},$.prototype.done=function(){this.touchIdentifier=$.TOUCH_IDENTIFER_UNUSED,window.setTimeout(this.whenDone.bind(this),1)},$.prototype.uponDrop=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.getPosition(e);return this.removeEvents(),this.done(),this.frame.style.pointerEvents="auto",this.reposition(i)},$.prototype.uponMouseOut=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.getDefaultMin(),n=this.getDefaultMax(),o=this.getPosition(e),s=!1;return o.Y<i.Y&&(o.Y=i.Y,s=!0),o.X<i.X&&(o.X=i.X,s=!0),o.Y>=n.Y+this.root.offsetHeight&&(o.Y=n.Y+this.root.offsetHeight,s=!0),o.X>=n.X+this.root.offsetWidth&&(o.X=n.X+this.root.offsetWidth,s=!0),s?(this.removeEvents(),this.reposition(o),this.fireDoneState(),!(this.frame.style.pointerEvents="auto")):this.uponDrag(e)},$.prototype.getScreenMax=function(){return{X:Q.getScrollWidth()-5,Y:Q.getScrollHeight()-5}},$.prototype.repositionTouch=function(t){try{if(null!=this.pLast&&t.X==this.pLast.X&&t.Y==this.pLast.Y)return!1;var e,i;i=t.X,t.X!=this.pLast.X&&i>=this.pMin.X&&i<this.pMax.X?this.setLeft(i):i>=this.pMax.X?this.setLeft(i=this.pMax.X):i<this.pMin.X&&this.setLeft(i=this.pMin.X),e=t.Y,t.Y!=this.pLast.Y&&e>=this.pMin.Y&&e<this.pMax.Y?this.setTop(e):e>=this.pMax.Y?this.setTop(e=this.pMax.Y):e<this.pMin.Y&&this.setTop(e=this.pMin.Y),this.pDraggerNow={X:i,Y:e},this.pLast=t}catch(t){x("ERROR: repositionTouch: "+t)}return!1},$.prototype.reposition=function(t){var e=t.Y-this.deltaY,i=t.X-this.deltaX;return i>=this.pMin.X&&i<this.pMax.X?this.pDraggerNow.X=i:i>=this.pMax.X?this.pDraggerNow.X=this.pMax.X:i<this.pMin.X&&(this.pDraggerNow.X=this.pMin.X),e>=this.pMin.Y&&e<this.pMax.Y?this.pDraggerNow.Y=e:e>=this.pMax.Y?this.pDraggerNow.Y=this.pMax.Y:e<this.pMin.Y&&(this.pDraggerNow.Y=this.pMin.Y),this.setTop(this.pDraggerNow.Y),this.setLeft(this.pDraggerNow.X),this.pLast=t,!1},$.prototype.uponTouchDrag=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();try{if(this.touch=this.getTouchByIdentifer(e),null==this.touch)return!1;var i={X:this.touch.pageX-this.touchOffsetX,Y:this.touch.pageY-this.touchOffsetY};this.repositionTouch(i)}catch(t){x("uponTouchDrag ERROR: "+t)}return!1},$.prototype.uponDrag=function(t){var e=t||window.event;if(this.obj.dragging)return!1;this.obj.dragging=!0,null!=e.preventDefault&&e.preventDefault();var i=this.getPosition(e);return this.timeout&&window.cancelAnimationFrame(this.timeout),this.timeout=window.requestAnimationFrame(function(){this.reposition(i)}.bind(this)),this.obj.dragging=!1},$.prototype.uponTouchStart=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.obj;i.style;return this.touchIdentifier==$.TOUCH_IDENTIFER_UNUSED&&(this.touch=e.changedTouches[0],this.touchOffsetX=Math.round(this.touch.pageX)-parseInt(this.root.offsetLeft),this.touchOffsetY=Math.round(this.touch.pageY)-parseInt(this.root.offsetTop),this.touchIdentifier=this.touch.identifier,this.pMin=this.getDefaultMin(),this.pMax=this.getDefaultMax(),i.style.cursor=this.cursor,this.addTouchEvents(),!(this.pLast={X:this.touch.pageX-this.clickOffsetX,Y:this.touch.pageY-this.clickOffsetY}))},$.prototype.uponDragStart=function(t){var e=t||window.event;null!=e.preventDefault&&e.preventDefault();var i=this.obj;return this.isLeftClick(e)&&(this.pDraggerNow={X:parseInt(this.root.offsetLeft),Y:parseInt(this.root.offsetTop)},this.pLast=this.getPosition(e),this.deltaX=this.pLast.X-this.pDraggerNow.X,this.deltaY=this.pLast.Y-this.pDraggerNow.Y,this.pMin=this.getDefaultMin(),this.pMax=this.getDefaultMax(),i.style.cursor=this.cursor,($.instance=this).frame.style.pointerEvents="none",this.addMouseEvents()),!1},$.prototype.setDragBorder=function(){},$.prototype.getDefaultMax=function(){return{X:1e4,Y:1e4}},$.prototype.getDefaultMin=function(){return{X:0,Y:0}},$.prototype.setLeft=function(t){x("setLeft override failed")},$.prototype.setTop=function(t){x("setTop override failed")},$.prototype.whenDone=function(){},$.prototype.isSupported=function(t){return"on"+t in document.documentElement},$.prototype.getPositionIE=function(t){return{X:window.parent.event.clientX,Y:window.parent.event.clientY}},$.prototype.getPositionGecko=function(t){return{X:t.clientX,Y:t.clientY}},$.prototype.getPosition=function(t){return{X:t.clientX,Y:t.clientY}},$.prototype.clear=function(){this.root[$.INSTANCE_LABEL]=null,this.obj[$.INSTANCE_LABEL]=null,this._removeEventListener(this.obj,"touchstart",this.uponTouchStartClosure),this._removeEventListener(this.dragImage,"mousedown",this.uponMouseDragStartClosure)},$.prototype.uponMouseDropClosure=null,$.prototype.uponMouseDragClosure=null,$.prototype.uponMouseOutClosure=null,$.prototype.uponMouseDragStartClosure=null,$.prototype.uponTouchDragClosure=null,$.prototype.uponTouchEndClosure=null,$.prototype.uponTouchCancelClosure=null,$.prototype.uponTouchStartClosure=null,$.prototype.deltaY=null,$.prototype.deltaX=null,$.prototype.pMax=null,$.prototype.pMin=null,$.prototype.rootWidth=null,$.prototype.rootHeight=null,$.prototype.draggerHeight=null,$.prototype.draggerWidth=null,$.prototype.pDraggerNow=null,$.prototype.pDraggerStart=null,$.prototype.pStart=null,$.prototype.pLast=null,$.prototype.touchIdentifier=null,$.prototype.touchOffsetY=null,$.prototype.touchOffsetX=null,$.prototype.clickOffsetY=null,$.prototype.clickOffsetX=null,$.prototype.touch=null,$.prototype.styleSaved=null,$.prototype.cursor=null,$.prototype.root=null,$.prototype.dragImage=null,$.prototype.obj=null,$.TOUCH_IDENTIFER_UNUSED=-1,$.INSTANCE_LABEL="instDragResize",$.doc=window.parent.document,$.instance=null,$.DEFAULT_BORDER_COLOR="SlateGray";var tt=function(t){$.call(this),this.className="Move",this.cursor="move",this.dm=t};for(var et in $.prototype)tt.prototype[et]=$.prototype[et];tt.setDragable=function(t){var e=new tt(t),i=window.parent.document,n=i.getElementById(S.frameID),o=i.getElementById("nuanTitleBar");e.init(o,n)},tt.prototype.setTop=function(t){this.root.style.top=t+"px"},tt.prototype.setLeft=function(t){this.root.style.left=t+"px"},tt.prototype.whenDone=function(){this.root.style.left=String(this.pDraggerNow.X)+"px",this.root.style.top=String(this.pDraggerNow.Y)+"px";var t={X:this.pDraggerNow.X,Y:this.pDraggerNow.Y};I.moveStage(t.X,t.Y)},tt.prototype.getDefaultMax=function(){var t=parseInt(window.getComputedStyle(this.root).width),e=parseInt(window.getComputedStyle(this.root).height);return{X:Q.getScrollWidth()-t,Y:Q.getScrollHeight()-e-("horizontal"==this.dm?parseInt(this.root.style.bottom):0)}},tt.prototype.getDefaultMin=function(){var t=parseInt(window.getComputedStyle(this.root).height);return{X:0,Y:"horizontal"==this.dm?Q.getScrollHeight()-parseInt(this.root.style.bottom)-t:0}};var it=null,nt=new q;return{initializeMessagingSDK:function(t,e,i,n){a.dataCenter=t,a.tagServerName=e,a.vendorUUID=i,function(e,t){var i;switch(t){case"config":i=r}return i&&i.every(function(t){if(!e[t])return!1})}(a,"config")?x("Failed to initialize SDK, invalid or missing parameters."):(S.setPageData("pageUrl",h.URL),S.setPageData("inqSiteID",window.inqSiteID),S.setPageData("inqSalesProducts",window.inqSalesProducts),S.setPageData("inqSalesQuantities",window.inqSalesQuantities),S.setPageData("inqSalesProductTypes",window.inqSalesProductTypes),S.setPageData("inqSalesProducts2",window.inqSalesProducts2),S.setPageData("inqSalesQuantities2",window.inqSalesQuantities2),S.setPageData("inqSalesPrices2",window.inqSalesPrices2),S.setPageData("inqOrderType",window.inqOrderType),S.registerForMessagingEvents(S.Events.ON_C2C_READY,nt.render.bind(nt)),S.registerForMessagingEvents(S.Events.ON_C2C_STATE_CHANGED,function(t){if(t){var e=nt.IMAGETYPES[t.newState];e&&nt.renderState(e,t)}}),S.registerForMessagingEvents(S.Events.ON_C2C_DISPLAYED,function(t){H(Z.VirtualKeyboardOpenCloseHandler)||Z.VirtualKeyboardOpenCloseHandler.addListener(t)}),S.registerForMessagingEvents(S.Events.ON_C2C_CLICKED,function(t){t&&(q.lastusedC2CId=t.pageElementID,q.c2cBtnId=null,H(Z.VirtualKeyboardOpenCloseHandler)||Z.VirtualKeyboardOpenCloseHandler.removeListener(t))}),S.registerForMessagingEvents(S.Events.ON_CHAT_CLOSED,function(){nt.clear(),I&&I.clear(),it&&it.removeListener()}),S.registerForMessagingEvents(S.Events.ON_CHAT_LAUNCHED,nt.setDisabled.bind(nt)),S.registerForMessagingEvents(S.Events.ON_CHAT_SHOWN,function(){it=new R}),n&&n())},getAndSetSDKConfig:function(){return S},loadChatAssets:function(t){h.getElementById(S.frameID)||(S.siteID?(t?function(){if("undefined"!=typeof jQuery&&jQuery.isReady)E(1);else if(void 0===h.readyState)h.addEventListener&&(h.addEventListener("load",E,!1),h.addEventListener("DOMContentLoaded",E,!1)),E(100);else{var t=navigator.userAgent.match(/Trident\/(\d+)/),e=t&&2==t.length&&6<=parseInt(t[1]);if("complete"==h.readyState&&e)E();else if(e||!h.all||window.opera)(h.addEventListener||e&&h.attachEvent)&&(/loaded|complete/.test(h.readyState)?E():setTimeout(arguments.callee,100));else{var i=h.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("id","v3ContentLoadTag"),i.setAttribute("defer","defer"),h.body.appendChild(i);var n=h.getElementById("v3ContentLoadTag");n?n.onreadystatechange=function(){"complete"==this.readyState&&E(100)}:"complete"==h.readyState?E(1):h.attachEvent("onreadystatechange",function(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",arguments.callee),E(1))})}}}:E)():x("site ID is found in config object."))},addCustomJavascript:function(t,e){g[t]=e},SDKAPI:{launchChatByRuleID:function(t){L(new N("LAUNCH_CHAT_RULEID",t))},launchChatNowByRuleName:function(t){L(new N("LAUNCH_CHAT_RULENAME",t))},suppressChatForSession:function(){L(new N("BLOCK_CHAT_SESSION"))},reInitChat:function(t,e){nt.clear();for(var i=m.length;i--;)U(m[i].target,m[i].type,m[i].listener);m=[],L(new N("REINIT_CHAT",{pageID:t,data:e}))},fireCustomEvent:function(t,e,i){L(new N("CUSTOM_EVENT",{eventName:t,data:e},i))},sendAutomatonMessage:function(t,e){L(new N("SEND_AUTOMATON_MSG",{msgType:t,msg:e}))},sendReadyFocus:function(t){L(new N("READY_FOCUS",t))},closeChat:function(){L(new N("CLOSE_CHAT")),A=[]},getChatID:function(t){var e=new N("GET_CHAT_ID");e.setCallback(t),A.push(e),L(e)},isFrameworkInitialized:function(t){var e=new N("IS_INITIALIZED");e.setCallback(t),A.push(e),L(e)},getBRPublishedVariableRef:function(t,e){var i=new N("DYNAMIC_API_REF",t);i.setCallback(e),A.push(i),L(i)},publishNewPageData:function(t){L(new N("NEW_PAGE_DATA","",t))},onRestoredClicked:function(){L(new N("FRAME_RESTORED")),I&&I.setVisible(!0),nt&&nt.setDisabled()},ciMinimize:function(){I&&!I.isMinimized()&&L(new N("MINIMIZE_FRAME"))},updateLogo:function(t){Object(t)===t?L(new N("UPDATE_LOGO",t)):logError("updateLogo expects an object, with 'imgname' or 'imgsrc' properties")},updateTitle:function(t){t&&L(new N("UPDATE_TITLE",t))},autoEngage:function(t){L(new N("AUTO_ENGAGE",t))}},getC2CMgr:function(){return nt},CIAPI:{onC2CClicked:function(t,e){if(2==arguments.length||!p||s){var i=new N("C2C_ACTION",t);i.setCallback(nt.c2cCallbackHandler.bind(nt,e)),A.push(i),L(i)}else logError("Missing arguments, needs c2cid and a callback to continue")},chatDisplayed:function(t){if("object"==typeof t){var e=new N("CIAPI_CHAT_DISPLAYED",{customerName:t.customerName,openerScripts:t.openerScripts,defaultAgentAlias:t.defaultAgentAlias});if(t.previousMessagesCb){var i=new N("CIAPI_CHAT_PREVIOUS_MSGS");i.setCallback(t.previousMessagesCb,!1),A.push(i)}if(t.disconnectCb){var n=new N("CIAPI_CHAT_DISCONNECTED");n.setCallback(t.disconnectCb,!1),A.push(n)}if(t.reConnectCb){var o=new N("CIAPI_CHAT_RECONNECTED");o.setCallback(t.reConnectCb,!1),A.push(o)}if(t.failedCb){var s=new N("CIAPI_CHAT_FAILED");s.setCallback(t.failedCb,!1),A.push(s)}L(e)}},engageChat:function(t,e){var i=new N("CIAPI_ENGAGED_CHAT",t);e&&(i.setCallback(e),A.push(i)),L(i)},getMessages:function(t){var e=new N("GET_CIAPI_MESSAGES");t&&(e.setCallback(t,!1),A.push(e)),L(e)},closeChat:function(){L(new N("CLOSE_CIAPI_CHAT")),A=[]},confirmAndClose:function(){L(new N("CLOSE_WITH_CONFIRM")),A=[]},sendMessage:function(t){L(new N("SEND_CIAPI_MESSAGE",t))},sendActivityMessage:function(t){L(new N("SEND_CIAPI_ACTIVITY",t))},requestEmailTranscript:function(t){L(new N("REQUEST_CIAPI_TRANSCRIPT",t))},isChatInProgress:function(t){var e=new N("GET_CIAPI_CHAT_STATE");t&&(e.setCallback(t),A.push(e)),L(e)},getOpenerScripts:function(t,e){var i=new N("GET_CIAPI_OPENERS",e);t&&(i.setCallback(t),A.push(i)),L(i)},sendDataPass:function(t){"object"==typeof t?L(new N("SEND_CIAPI_DATAPASS",t)):logError("sendDataPass only accepts Object as its argument.")},sendVALinkMessage:function(t,e){var i,n=t.target||t.srcElement;if(i="A"==n.tagName?n:function(t,e){for(;t.parentNode&&t!=e;)if("A"===(t=t.parentNode).tagName)return t;return null}(n,t.currentTarget)){i.getAttribute("data-vtz-jump");var o,s=i.getAttribute("data-vtz-link-type"),r=i.getAttribute("data-vtz-browse");if("Web"==s&&r)o=(o="##Url#"+r).substring(0,100);else if("Dialog"==s)o=i.text,custMsgCb&&custMsgCb(o),t.preventDefault?t.preventDefault():t.returnValue=!1;else{if("touchend"!=t.type||!t.target.href||""==t.target.href)return!1;t.preventDefault(),window.setTimeout(function(){window.parent.location.href=t.target.href},1e3)}var a={};a.text=o,a.attributes={};for(var l=i.attributes,h=0;h<l.length;h++){var u=l[h].name;u.startsWith("data-vtz")&&(a.attributes[u.replace("data-","")]=l[h].value)}L(new N("SEND_CIAPI_VA_LINK",a))}},sendRichContentMessage:function(t,e){L(new N("SEND_CIAPI_RICH_MSG",{text:t,data:e}))},getPreviousAsyncTranscript:function(t){var e=new N("GET_CIAPI_PREV_CONV");t&&(e.setCallback(t),A.push(e)),L(e)},isLastConversationActive:function(t){var e=new N("GET_CIAPI_PREV_CONV_STATE");t&&(e.setCallback(t),A.push(e)),L(e)},getAsyncUnReadMsgCount:function(t,e){var i=new N("GET_CIAPI_ASYNC_UNREAD",t);e&&(i.setCallback(e),A.push(i)),L(i)},whenProactiveLaunch:function(t){var e=new N("PROACTIVE_CHAT_LAUNCH");t&&(e.setCallback(t),A.push(e))},checkIfMinimized:function(t){var e=new N("IS_MINIMIZED");t&&(e.setCallback(t),A.push(e)),L(e)}}}}();