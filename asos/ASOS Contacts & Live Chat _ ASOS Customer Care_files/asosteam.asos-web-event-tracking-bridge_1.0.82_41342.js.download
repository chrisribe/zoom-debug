(window.sharedJsonP=window.sharedJsonP||[]).push([["asosteam.asos-web-event-tracking-bridge|1.0.82|41342"],{eb62d:function(e,t,r){"use strict";function n(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function u(e){n(i,a,o,u,c,"next",e)}function c(e){n(i,a,o,u,c,"throw",e)}u(void 0)}))}}r.r(t),r.d(t,"initialise",(function(){return y}));var o=e=>{var{newrelicDelegate:t=(()=>{})}=e;return(function(){var e=a((function*(e){var r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{n=yield t()}catch(e){return}if(null!==(r=n)&&void 0!==r&&r.noticeError){for(var[o,i]of Object.entries(a))"object"==typeof i&&(a[o]=JSON.stringify(i));return a.id="asos-web-event-tracking-bridge",n.noticeError(e,a)}}));return function(t){return e.apply(this,arguments)}}())},i=function(){var e=a((function*(e){var t,{port1:r,port2:n}=new MessageChannel;try{t=yield e()}catch(e){return null}return t.registerPreTrackCallback(()=>{var e={};for(var[n,a]of Object.entries(t))"string"!=typeof a&&"number"!=typeof a||(e[n]=a);e.events=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(",").map(e=>e.split("=")[0]).filter(Boolean)}(e.events),r.postMessage(e)}),n}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=a((function*(e){var{adobeDelegate:t}=e;return[yield i(t)]}));return function(t){return e.apply(this,arguments)}}();var c={event1:{eventKey:"View Product Page",eventTags:{eVar60:{key:"eVar60"}}},event3:{eventKey:"Successful Search",eventTags:{searchTerm:{key:"eVar25"}}},event5:{eventKey:"Refinement",eventTags:{choice:{key:"prop13"}}},event43:{eventKey:"Product View",eventTags:{stockStatus:"In Stock"}},event10:{eventKey:"Add To Saved",eventTags:{productID:{key:"products"},eVar60:{key:"eVar60"}}},event44:{eventKey:"Product View",eventTags:{stockStatus:"Out Of Stock"}},event45:{eventKey:"Product View",eventTags:{stockStatus:"Partially Out Of Stock"}},event170:{eventKey:"View PLP Page",eventTags:{}},purchase:{eventKey:"OrderComplete-BR",eventTags:{orderID:{key:"purchaseID"}}}},s=(e,t)=>"object"==typeof e?t[e.key]:e,v=e=>function(){var t=a((function*(t){if(t.events){var r;try{r=yield e()}catch(e){return}var{success:n}=yield r.onReady();n&&t.events.forEach(e=>{var n=c[e];if(n){var{eventKey:a,eventTags:o}=n,i=((e,t)=>{var r={},n=Object.entries(e).map(e=>{var[r,n]=e;return[r,s(n,t)]});for(var[a,o]of n)r[a]=o;return r})(o,t);r.track(a,null,null,i)}})}}));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=a((function*(e){var{featuresDelegate:t}=e;return[yield v(t)]}));return function(t){return e.apply(this,arguments)}}(),f=e=>{var{sources:t,sinks:r,logError:n}=e;t.forEach(e=>{r.forEach(t=>{e.addEventListener("message",function(){var e=a((function*(e){try{yield t(e.data)}catch(t){n(t,{data:e.data})}}));return function(t){return e.apply(this,arguments)}}())}),e.start()})},y=function(){var e=a((function*(e){var{adobeDelegate:t,featuresDelegate:r,newrelicDelegate:n}=e,a=o({newrelicDelegate:n}),[i,c]=yield Promise.all([u({adobeDelegate:t}),l({featuresDelegate:r})]);f({sources:i,sinks:c,logError:a})}));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=asosteam.asos-web-event-tracking-bridge~1.0.82~41342.js.map