(window.sharedJsonP=window.sharedJsonP||[]).push([["asos-web-secure-script-container|1.6.0|e3a2c"],{ada85:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r("0db6f"),r("98f4b"),r("cd0c5");var n=Symbol("SIGNAL_CHANNEL_SYMBOL"),o={},a=function(e){var t=e.key;return o[t]||(o[t]=new MessageChannel),o[t]},i=function(){var e=a({key:n});return{publicPort:e.port1,privatePort:e.port2}};var c=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},u=Symbol("IFRAME_CHANNEL_SYMBOL"),l=function(){var e=a({key:u});return{localPort:e.port1,remotePort:e.port2}};var s=function(e){if(Array.isArray(e))return e};var f=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}};var d=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n};var p=function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}};var v=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var m=function(e,t){return s(e)||f(e,t)||p(e,t)||v()},y=function(e){var t=e.containerDomain,r=document.querySelector("#".concat("secure-script-container")),n=l().remotePort,o="https://${containerDomain}/receiver_browse.html".replace(/\${containerDomain}/,t);r.onload=function(){var e,t,a,i;r.contentWindow.postMessage(null,(e=o.split("/"),t=m(e,3),a=t[0],i=t[2],"".concat(a,"//").concat(i)),[n])},r.src=o},b=function(e,t){l().localPort.postMessage(c({type:e},e,t))},h=function(){b("href",window.location.href),b("cookies",document.cookie),b("referrer",document.referrer)},w=function(e){"cookie"===e.data.type&&(document.cookie=e.data.cookie)};t.getChannel=function(){return{port:i().publicPort}},t.loadRemoteAndHandshake=function(e){var t,r=e.containerDomain;(t=l().localPort).addEventListener("message",w),t.start(),h(),function(){var e=i().privatePort,t=l().localPort;e.onmessage=function(e){var r=e.data;return t.postMessage(r)}}(),y({containerDomain:r})},t.sendWebContextMessage=function(e){b("webContext",e)}}}]);
//# sourceMappingURL=asos-web-secure-script-container~1.6.0~e3a2c.js.map