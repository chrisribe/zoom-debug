!function(){window.haxe=window.haxe||{},haxe.io||(haxe.io={}),window.$hxClasses=window.$hxClasses||{},window.$estr=function(){return js.Boot.__string_rec(this,"")},$hxClasses.registerClass=function(e,t){e&&t&&(e.__name__=t.split("."),$hxClasses[t]=e)},$hxClasses.extend=function(e,t,n){$hxClasses.registerClass(t,n),null!=e&&(t.__super__=e,t.prototype=$extend(e.prototype),t.prototype.constructor=t),t.prototype.callSuper=$hxClasses.callSuper},$hxClasses.callSuper=function(e){var t=this;return function(){t.constructor.__super__.prototype[e].apply(t,arguments)}},window.$extend=function(e,t){var n=Object.create(e);for(var s in t)n[s]=t[s];return n},window.$closure=function(e,t){var n=e[t];if(null==n)return null;var s=function(){return n.apply(e,arguments)};return s.scope=e,s.method=n,s},window.$noop=function(){},window.ValueType=$hxClasses.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]},ValueType.TInt=["TInt",1],ValueType.TInt.toString=$estr,ValueType.TInt.__enum__=ValueType,ValueType.TUnknown=["TUnknown",8],ValueType.TUnknown.toString=$estr,ValueType.TUnknown.__enum__=ValueType,ValueType.TFunction=["TFunction",5],ValueType.TFunction.toString=$estr,ValueType.TFunction.__enum__=ValueType,ValueType.TNull=["TNull",0],ValueType.TNull.toString=$estr,ValueType.TNull.__enum__=ValueType,ValueType.TEnum=function(e){var t=["TEnum",7,e];return t.__enum__=ValueType,t.toString=$estr,t},ValueType.TFloat=["TFloat",2],ValueType.TFloat.toString=$estr,ValueType.TFloat.__enum__=ValueType,ValueType.TClass=function(e){var t=["TClass",6,e];return t.__enum__=ValueType,t.toString=$estr,t},ValueType.TBool=["TBool",3],ValueType.TBool.toString=$estr,ValueType.TBool.__enum__=ValueType,ValueType.TObject=["TObject",4],ValueType.TObject.toString=$estr,ValueType.TObject.__enum__=ValueType,haxe.StackItem=$hxClasses["haxe.StackItem"]={__ename__:["haxe","StackItem"],__constructs__:["CFunction","Module","FilePos","Method","Lambda"]},haxe.StackItem.Module=function(e){var t=["Module",1,e];return t.__enum__=haxe.StackItem,t.toString=$estr,t},haxe.StackItem.FilePos=function(e,t,n){var s=["FilePos",2,e,t,n];return s.__enum__=haxe.StackItem,s.toString=$estr,s},haxe.StackItem.Lambda=function(e){var t=["Lambda",4,e];return t.__enum__=haxe.StackItem,t.toString=$estr,t},haxe.StackItem.CFunction=["CFunction",0],haxe.StackItem.CFunction.toString=$estr,haxe.StackItem.CFunction.__enum__=haxe.StackItem,haxe.StackItem.Method=function(e,t){var n=["Method",3,e,t];return n.__enum__=haxe.StackItem,n.toString=$estr,n},haxe.io.Error=$hxClasses["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},haxe.io.Error.Custom=function(e){var t=["Custom",3,e];return t.__enum__=haxe.io.Error,t.toString=$estr,t},haxe.io.Error.OutsideBounds=["OutsideBounds",2],haxe.io.Error.OutsideBounds.toString=$estr,haxe.io.Error.OutsideBounds.__enum__=haxe.io.Error,haxe.io.Error.Overflow=["Overflow",1],haxe.io.Error.Overflow.toString=$estr,haxe.io.Error.Overflow.__enum__=haxe.io.Error,haxe.io.Error.Blocked=["Blocked",0],haxe.io.Error.Blocked.toString=$estr,haxe.io.Error.Blocked.__enum__=haxe.io.Error,Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),haxe.Log=function(){},$hxClasses["haxe.Log"]=haxe.Log,haxe.Log.__name__=["haxe","Log"],haxe.Log.trace=function(e,t){js.Boot.__trace(e,t)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Log.prototype.__class__=haxe.Log,window.com=window.com||{},com.inq=com.inq||{},com.inq.events=com.inq.events||{},com.inq.net=com.inq.net||{},com.inq.stage=com.inq.stage||{},com.inq.ui=com.inq.ui||{},com.inq.utils=com.inq.utils||{},com.inq.aria=com.inq.aria||{},com.inq.addons=com.inq.addons||{},com.inq.utils.Dictionary=function(e){},$hxClasses["com.inq.utils.Dictionary"]=com.inq.utils.Dictionary,com.inq.utils.Dictionary.__name__=["com","inq","utils","Dictionary"],com.inq.utils.Dictionary.prototype.__class__=com.inq.utils.Dictionary,com.inq.events.EventDispatcher=function(){this.eventListeners={}},$hxClasses.registerClass(com.inq.events.EventDispatcher,"com.inq.events.EventDispatcher"),com.inq.events.EventDispatcher.domEventHandler=function(e){var t=e.scope,n=e.method,s=function(e){var t=this,n=arguments.callee,s=n.object,i=n.method;if(null==e){var a=t.ownerDocument,o=a.parentWindow?a.parentWindow:a.defaultView;e=o.Event}try{e.target=t}catch(e){}try{e.srcElement=t}catch(e){}i.apply(s,[e])};return s.method=n,s.object=t,s},com.inq.events.EventDispatcher.prototype.addEventListener=function(e,t,n,s,i){"function"==typeof t&&(this.hasEventListener(e)||(this.eventListeners[e]=[]),-1==this._getListenerId(e,t)&&this.eventListeners[e].push(t))},com.inq.events.EventDispatcher.prototype.willTrigger=function(e){return!1},com.inq.events.EventDispatcher.prototype.toString=function(){return"EventDispacher"},com.inq.events.EventDispatcher.prototype.removeEventListener=function(e,t,n){if("function"==typeof t&&this.hasEventListener(e)){var s=this._getListenerId(e,t);-1!=s&&(this.eventListeners[e].splice(s,1),0==this.eventListeners[e].length&&delete this.eventListeners[e])}},com.inq.events.EventDispatcher.prototype.hasEventListener=function(e){return null!=this.eventListeners[e]},com.inq.events.EventDispatcher.prototype.dispatchEvent=function(e){if(this.hasEventListener(e.type))for(var t,n=this.eventListeners[e.type],s=n.length,i=0;i<s;i++)n[i]&&!1===n[i](e)&&(t=!1);return t},com.inq.events.EventDispatcher.prototype._getListenerId=function(e,t){var n=this.eventListeners[e];if(n&&n.length>0)for(var s=0;s<n.length;s++)if(t==n[s])return s;return-1},com.inq.events.EventDispatcher.prototype.eventListeners=null,com.inq.events.EventDispatcher.prototype.__class__=com.inq.events.EventDispatcher,com.inq.flash||(com.inq.flash={}),com.inq.flash.client||(com.inq.flash.client={}),com.inq.flash.client.control||(com.inq.flash.client.control={}),com.inq.flash.client.chatskins||(com.inq.flash.client.chatskins={}),function(){function e(e,t){return function(){return com.inq.flash.client.control.FlashPeer.call(e,arguments,t)}}com.inq.flash.client.control.FlashPeer=function(){},$hxClasses["com.inq.flash.client.control.FlashPeer"]=com.inq.flash.client.control.FlashPeer,com.inq.flash.client.control.FlashPeer.__name__=["com","inq","flash","client","control","FlashPeer"],com.inq.flash.client.control.FlashPeer.init=function(e){com.inq.flash.client.control.FlashPeer.getConversationTranscript=e[0],com.inq.flash.client.control.FlashPeer.getConversationObjectID=e[1],com.inq.flash.client.control.FlashPeer.getConversationTokenID=e[2]},com.inq.flash.client.control.FlashPeer.call=function(e,t,n){if(null==com.inq.flash.client.control.FlashPeer.inqFlashPeer[e])return haxe.Log.trace("window.Inq.FlashPeer."+e+" does not exist",{fileName:"FlashPeer.hx",lineNumber:25,className:"com.inq.flash.client.control.FlashPeer",methodName:"call"}),n;try{return com.inq.flash.client.control.FlashPeer.inqFlashPeer[e].apply(com.inq.flash.client.control.FlashPeer.inqFlashPeer,t)}catch(a){var s="";if(t)for(var i=0;i<t.length;i++)s+=" arg["+i+"] = "+t[i]+"\n";return haxe.Log.trace("window.Inq.FlashPeer."+e+" failed: "+Std.string(a)+"\n"+s,{fileName:"FlashPeer.hx",className:"com.inq.flash.client.control.FlashPeer",methodName:"call"}),n}},com.inq.flash.client.control.FlashPeer.acceptCobInvSafe=e("acceptCobSafe"),com.inq.flash.client.control.FlashPeer.acceptCobShareInv=e("acceptCobShare"),com.inq.flash.client.control.FlashPeer.applyAcifCommands=e("applyAcifCommands"),com.inq.flash.client.control.FlashPeer.blockService=e("blockTheService"),com.inq.flash.client.control.FlashPeer.captureEmailAddress=e("captureEmailAddress"),com.inq.flash.client.control.FlashPeer.closeChat=e("closeChat"),com.inq.flash.client.control.FlashPeer.closeChatMonitor=e("closeChatMonitor"),com.inq.flash.client.control.FlashPeer.closePersistent=e("closePersistent"),com.inq.flash.client.control.FlashPeer.closePersistentWindowIfOpen=e("closePersistentWindowIfOpen",null),com.inq.flash.client.control.FlashPeer.closePopupChatFromPersistent=e("closePopupChatFromPersistent",null),com.inq.flash.client.control.FlashPeer.createXFrame=e("createXFrame",null),com.inq.flash.client.control.FlashPeer.endChatSession=e("endChatSession"),com.inq.flash.client.control.FlashPeer.endCob=e("endCob"),com.inq.flash.client.control.FlashPeer.endCobByEtlEvent=e("endCobByEtlEvent"),com.inq.flash.client.control.FlashPeer.executeCustomCommand=e("executeCustomCommand"),com.inq.flash.client.control.FlashPeer.debugLogErrorToTagServer=e("debugLogErrorToTagServer"),com.inq.flash.client.control.FlashPeer.debugLogDebugToTagServer=e("debugLogDebugToTagServer"),com.inq.flash.client.control.FlashPeer.debugLogInfoToTagServer=e("debugLogInfoToTagServer"),com.inq.flash.client.control.FlashPeer.debugLogWarnToTagServer=e("debugLogWarnToTagServer"),com.inq.flash.client.control.FlashPeer.debugSwitchForModule=e("debugSwitchForModule"),com.inq.flash.client.control.FlashPeer.fireConversationResolvedEvent=e("fireConversationResolvedEvent"),com.inq.flash.client.control.FlashPeer.fireCustomerAuthenticatedEvent=e("fireCustomerAuthenticatedEvent"),com.inq.flash.client.control.FlashPeer.fireVerifyTokenErrorEvent=e("fireVerifyTokenErrorEvent"),com.inq.flash.client.control.FlashPeer.fireVerifyTokenSuccessEvent=e("fireVerifyTokenSuccessEvent"),com.inq.flash.client.control.FlashPeer.fireCustomEvent=e("fireCustomEvent"),com.inq.flash.client.control.FlashPeer.fireCustomEvt=e("fireCustomEvt"),com.inq.flash.client.control.FlashPeer.fireNativeSurveyLaunchEvent=e("fireNativeSurveyLaunchEvent"),com.inq.flash.client.control.FlashPeer.getActiveChatroomId=e("getActiveChatroomId"),com.inq.flash.client.control.FlashPeer.getAgentGroupDisplayName=e("getAgentGroupDisplayName",null),com.inq.flash.client.control.FlashPeer.getAgentGroupName=e("getAgentGroupName",null),com.inq.flash.client.control.FlashPeer.getAgentID=e("getAgentID",null),com.inq.flash.client.control.FlashPeer.getAuthenticatedUser=e("getAuthenticatedUser",null),com.inq.flash.client.control.FlashPeer.getAutomatonDataMap=e("getAutomatonDataMap",null),com.inq.flash.client.control.FlashPeer.getAutomatonDatapass=e("getAutomatonDatapass",null),com.inq.flash.client.control.FlashPeer.getBaseURL=e("getBaseURL"),com.inq.flash.client.control.FlashPeer.getBrID=e("getBrID",null),com.inq.flash.client.control.FlashPeer.getBrName=e("getBrName",null),com.inq.flash.client.control.FlashPeer.getBrowserMajorVer=e("getBrowserMajorVer"),com.inq.flash.client.control.FlashPeer.getBrowserTypeAndVersion=e("getBrowserTypeAndVersion"),com.inq.flash.client.control.FlashPeer.getBuRuleAgentGroupID=e("getBuRuleAgentGroupID",null),com.inq.flash.client.control.FlashPeer.getBusinessUnitDisplayName=e("getBusinessUnitDisplayName",null),com.inq.flash.client.control.FlashPeer.getBusinessUnitID=e("getBusinessUnitID",null),com.inq.flash.client.control.FlashPeer.getBusinessUnitName=e("getBusinessUnitName",null),com.inq.flash.client.control.FlashPeer.getChatOwnerBusinessUnitID=e("getChatOwnerBusinessUnitID",null),com.inq.flash.client.control.FlashPeer.getChatRouterVanityUrl=e("getChatRouterVanityUrl"),com.inq.flash.client.control.FlashPeer.getClientPageURL=e("getClientPageURL"),com.inq.flash.client.control.FlashPeer.getCobrowseEnableMinimizeRestore=e("getCobrowseEnableMinimizeRestore"),com.inq.flash.client.control.FlashPeer.getCustGeoData=e("getCustGeoData"),com.inq.flash.client.control.FlashPeer.getCustID=e("getCustID",null),com.inq.flash.client.control.FlashPeer.getDeviceType=e("getDeviceType",null),com.inq.flash.client.control.FlashPeer.getDisconnectionTimeout=e("getDisconnectionTimeout"),com.inq.flash.client.control.FlashPeer.getEmbeddedTheme=e("getEmbeddedTheme"),com.inq.flash.client.control.FlashPeer.getFileDeleteSetting=e("fileDeleteSetting",null),com.inq.flash.client.control.FlashPeer.getFileTransferApiUrl=e("fileTransferApiUrl",null),com.inq.flash.client.control.FlashPeer.getfileTransferExtensions=e("fileTransferExtensions","jpg,jpeg,bmp,gif,png,doc,xls,docx,xlsx,pdf,txt"),com.inq.flash.client.control.FlashPeer.getFileTransferSize=e("fileTransferSize",null),com.inq.flash.client.control.FlashPeer.getFileTransferUrl=e("fileTransferServerUrl",null),com.inq.flash.client.control.FlashPeer.getChatSkinFmt=e("getChatSkinFmt"),com.inq.flash.client.control.FlashPeer.getFlashVars=e("getFlashVars"),com.inq.flash.client.control.FlashPeer.getFPSessionID=e("getFPSessionID",null),com.inq.flash.client.control.FlashPeer.getImagePath=e("getImagePath"),com.inq.flash.client.control.FlashPeer.getIncAssignmentID=e("getIncAssignmentID",null),com.inq.flash.client.control.FlashPeer.getInitialTimeout=e("getInitialTimeout"),com.inq.flash.client.control.FlashPeer.getIsBuilder=e("getIsBuilder",!1),com.inq.flash.client.control.FlashPeer.getIsSkinLocal=e("getIsSkinLocal",!1),com.inq.flash.client.control.FlashPeer.getLocalizedMessage=e("getLocalizedMessage"),com.inq.flash.client.control.FlashPeer.getMediaBaseURL=e("getMediaBaseURL"),com.inq.flash.client.control.FlashPeer.getMediaPath=e("getMediaPath",null),com.inq.flash.client.control.FlashPeer.getPageID=e("getPageID",null),com.inq.flash.client.control.FlashPeer.getPageMarker=e("getPageMarker",null),com.inq.flash.client.control.FlashPeer.getPersistentCustomerID=e("getPersistentCustomerID",null),com.inq.flash.client.control.FlashPeer.getPersistentHeight=e("getPersistentHeight"),com.inq.flash.client.control.FlashPeer.getPersistentWidth=e("getPersistentWidth"),com.inq.flash.client.control.FlashPeer.getPersistentXPos=e("getPersistentXPos"),com.inq.flash.client.control.FlashPeer.getPersistentYPos=e("getPersistentYPos"),com.inq.flash.client.control.FlashPeer.getPopupCloserWidth=e("getPopupCloserWidth"),com.inq.flash.client.control.FlashPeer.getQueueMessagingSpec=e("getQueueMessagingSpec",null),com.inq.flash.client.control.FlashPeer.getQueueMessagingSpecId=e("getQueueMessagingSpecId",null),com.inq.flash.client.control.FlashPeer.getSessionID=e("getSessionID",null),com.inq.flash.client.control.FlashPeer.getSiteConstants=e("getSiteConstants"),com.inq.flash.client.control.FlashPeer.getSkin=e("getSkin"),com.inq.flash.client.control.FlashPeer.getSkinHeight=e("getSkinHeight"),com.inq.flash.client.control.FlashPeer.getSkinLeft=e("getSkinLeft"),com.inq.flash.client.control.FlashPeer.getSkinLocation=e("getSkinLocation"),com.inq.flash.client.control.FlashPeer.getSkinMXML=e("getSkinMXML",null),com.inq.flash.client.control.FlashPeer.getSkinName=e("getSkinName",null),com.inq.flash.client.control.FlashPeer.getSkinPath=e("getSkinPath",null),com.inq.flash.client.control.FlashPeer.getSkinTop=e("getSkinTop"),com.inq.flash.client.control.FlashPeer.getSkinWidth=e("getSkinWidth"),com.inq.flash.client.control.FlashPeer.getSurveyAuxParams=e("getSurveyAuxParams"),com.inq.flash.client.control.FlashPeer.getTitleBarHeight=e("getTitleBarHeight"),com.inq.flash.client.control.FlashPeer.getV3Data=e("getV3Data"),com.inq.flash.client.control.FlashPeer.getVAList=e("getVAList",[]),com.inq.flash.client.control.FlashPeer.getVanityUrl=e("getVanityUrl"),com.inq.flash.client.control.FlashPeer.getVisitorAttributes=e("getVisitorAttributes",null),com.inq.flash.client.control.FlashPeer.getXFormsDomain=e("getXFormsDomain",null),com.inq.flash.client.control.FlashPeer.getClientStaticURL=e("getClientStaticURL",!1),com.inq.flash.client.control.FlashPeer.hideChat=com.inq.flash.client.control.FlashPeer.closeChat,com.inq.flash.client.control.FlashPeer.isAdblockEnabled=e("isAdblockEnabled"),com.inq.flash.client.control.FlashPeer.isAsyncUnauthUser=e("isAsyncUnauthUser"),com.inq.flash.client.control.FlashPeer.isAutoFixPrechatSurvey=e("isAutoFixPrechatSurvey"),com.inq.flash.client.control.FlashPeer.isCEAPIPostChatSurveyMode=e("isCEAPIPostChatSurveyMode",!1),com.inq.flash.client.control.FlashPeer.isClickStreamSent=e("isClickStreamSent"),com.inq.flash.client.control.FlashPeer.isCobrowseEngaged=e("isCobEngaged",!1),com.inq.flash.client.control.FlashPeer.isCobrowseSharedControl=e("isCobShared",!1),com.inq.flash.client.control.FlashPeer.isEmbeddedThemeValid=e("isEmbeddedThemeValid"),com.inq.flash.client.control.FlashPeer.isHideJsonTranscriptMessages=e("isHideJsonTranscriptMessages"),com.inq.flash.client.control.FlashPeer.isLoggingDisabled=e("isLoggingDisabled",!1),com.inq.flash.client.control.FlashPeer.isMultiChatSupported=e("isMultiChatSupported"),com.inq.flash.client.control.FlashPeer.isOne2ManyChatEnabled=e("isOne2ManyChatEnabled",!1),com.inq.flash.client.control.FlashPeer.isPersistentChat=e("isPersistentChat"),com.inq.flash.client.control.FlashPeer.isPersistentWindow=e("isPersistentWindow"),com.inq.flash.client.control.FlashPeer.isPolishNotationEnabled=e("isPolishNotationEnabled",!1),com.inq.flash.client.control.FlashPeer.isPortal=e("isPortal",!1),com.inq.flash.client.control.FlashPeer.isThankYouEnabled=e("isThankYouEnabled"),com.inq.flash.client.control.FlashPeer.isV3C2CPersistent=e("isV3C2CPersistent"),com.inq.flash.client.control.FlashPeer.isV3Continue=e("isV3Continue",null),com.inq.flash.client.control.FlashPeer.JSONParse=e("JSONParse",null),com.inq.flash.client.control.FlashPeer.launchNativePostChatSurvey=e("launchNativePostChatSurvey"),com.inq.flash.client.control.FlashPeer.launchNativeSDK=e("launchNativeSDK"),com.inq.flash.client.control.FlashPeer.loadKMSlibraries=e("loadKMSlibraries",null),com.inq.flash.client.control.FlashPeer.logError=e("logError"),com.inq.flash.client.control.FlashPeer.logInfo=e("logInfo"),com.inq.flash.client.control.FlashPeer.logErrorToServer=e("logErrorToServer"),com.inq.flash.client.control.FlashPeer.logInfoToServer=e("logInfoToServer"),com.inq.flash.client.control.FlashPeer.logWarningToServer=e("logWarningToServer"),com.inq.flash.client.control.FlashPeer.noJSHostingInTagserver=e("noJSHostingInTagserver",!1),com.inq.flash.client.control.FlashPeer.noV3FrameChat=e("noV3FrameChat",!1),com.inq.flash.client.control.FlashPeer.evaluateLegacySettings=e("evaluateLegacySettings"),com.inq.flash.client.control.FlashPeer.onAgentDataPass=e("onAgentDataPass"),com.inq.flash.client.control.FlashPeer.onAgentMsg=e("onAgentMsg"),com.inq.flash.client.control.FlashPeer.onAssisted=e("onAssisted"),com.inq.flash.client.control.FlashPeer.onBeforeChatClosed=e("onBeforeChatClosed"),com.inq.flash.client.control.FlashPeer.onChatLoaded=e("onChatLoaded"),com.inq.flash.client.control.FlashPeer.onChatMinimize=e("onChatMinimize"),com.inq.flash.client.control.FlashPeer.onChatroomReady=e("onChatroomReady"),com.inq.flash.client.control.FlashPeer.onChatShown=e("onChatShown"),com.inq.flash.client.control.FlashPeer.onCookiesCommitted=e("onCookiesCommitted"),com.inq.flash.client.control.FlashPeer.onCustomerMsg=e("onCustomerMsg"),com.inq.flash.client.control.FlashPeer.onEngaged=e("onEngaged"),com.inq.flash.client.control.FlashPeer.onInteracted=e("onInteracted"),com.inq.flash.client.control.FlashPeer.onQueueWaitMsg=e("onQueueWaitMsg"),com.inq.flash.client.control.FlashPeer.onVADataPass=e("onVADataPass"),com.inq.flash.client.control.FlashPeer.parseXFrameUrl=e("parseXFrameUrl",null),com.inq.flash.client.control.FlashPeer.prefetchURL=e("prefetchURL"),com.inq.flash.client.control.FlashPeer.prepareDataAndSendDTEvent=e("prepareDataAndSendDTEvent"),com.inq.flash.client.control.FlashPeer.postRequestToIframeProxy=e("postRequestToIframeProxy"),com.inq.flash.client.control.FlashPeer.popOutChat=e("popOutChat"),com.inq.flash.client.control.FlashPeer.PushToFrameset=e("PushToFrameset"),com.inq.flash.client.control.FlashPeer.reinitializeChatWithNewId=e("reinitializeChatWithNewId",!1),com.inq.flash.client.control.FlashPeer.registerPersistentWindow=e("registerPersistentWindow",!1),com.inq.flash.client.control.FlashPeer.registerWDMClient=e("registerWDMClient"),com.inq.flash.client.control.FlashPeer.requestTranscript=e("requestTranscript"),com.inq.flash.client.control.FlashPeer.resetConversationManager=e("resetConversationManager"),com.inq.flash.client.control.FlashPeer.sendChatExit=e("sendChatExit"),com.inq.flash.client.control.FlashPeer.getFlagSendDataToTSWithoutIframe=e("getFlagSendDataToTSWithoutIframe"),com.inq.flash.client.control.FlashPeer.sendNetworkBackup=e("sendNetworkBackup"),com.inq.flash.client.control.FlashPeer.sendRequestToServer=e("sendRequestToServer"),com.inq.flash.client.control.FlashPeer.setActiveWindowId=e("setActiveWindowId"),com.inq.flash.client.control.FlashPeer.setAgentConfig=e("setAgentConfig"),com.inq.flash.client.control.FlashPeer.setCABeacon=e("setCABeacon"),com.inq.flash.client.control.FlashPeer.setAgentClosedChat=e("setAgentClosedChat"),com.inq.flash.client.control.FlashPeer.setAsyncChat=e("setAsyncChat"),com.inq.flash.client.control.FlashPeer.setCiFunction=e("setCiFunction",null),com.inq.flash.client.control.FlashPeer.setClickStreamSent=e("setClickStreamSent"),com.inq.flash.client.control.FlashPeer.setDisconnectFlag=e("setDisconnectFlag"),com.inq.flash.client.control.FlashPeer.setDragable=e("setDragable"),com.inq.flash.client.control.FlashPeer.setEventDataForSurvey=e("setEventDataForSurvey",null),com.inq.flash.client.control.FlashPeer.setPersistentWindowActive=e("setPersistentWindowActive"),com.inq.flash.client.control.FlashPeer.setResizable=e("setResizable"),com.inq.flash.client.control.FlashPeer.setSurveyAuxParams=e("setSurveyAuxParams"),com.inq.flash.client.control.FlashPeer.setV3Data=e("setV3Data"),com.inq.flash.client.control.FlashPeer.submitNativePostChatSurvey=e("submitNativePostChatSurvey"),com.inq.flash.client.control.FlashPeer.unregisterWDMClient=e("unregisterWDMClient"),com.inq.flash.client.control.FlashPeer.verifyToken=e("verifyToken"),com.inq.flash.client.control.FlashPeer.wasSaleAction=e("wasSaleAction",!1),com.inq.flash.client.control.FlashPeer.prototype.__class__=com.inq.flash.client.control.FlashPeer,com.inq.flash.client.control.FlashPeer.inqFlashPeer=window.Inq.FlashPeer}(),window.Std=function(){},$hxClasses.Std=Std,Std.__name__=["Std"],Std.is=function(e,t){return js.Boot.__instanceof(e,t)},Std.string=function(e){return js.Boot.__string_rec(e,"")},Std.int=function(e){return 0|e},Std.parseInt=function(e){var t=parseInt(e,10);return isNaN(t)?null:t},Std.parseFloat=function(e){return parseFloat(e)},Std.random=function(e){return Math.floor(Math.random()*e)},Std.prototype.__class__=Std,window.js=window.js||{},js.Boot=function(){},$hxClasses["js.Boot"]=js.Boot,js.Boot.__name__=["js","Boot"],js.Boot.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},js.Boot.__trace=function(e,t){var n,s=null!=t?(t.className?t.className:t.fileName)+":"+t.methodName+": ":" ";s+=js.Boot.__string_rec(e,""),"undefined"!=typeof document&&null!=(n=document.getElementById("haxe:trace"))?n.innerHTML+=js.Boot.__unhtml(s)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(s)},js.Boot.__clear_trace=function(){var e=document.getElementById("haxe:trace");null!=e&&(e.innerHTML="")},js.Boot.isClass=function(e){return e.__name__},js.Boot.isEnum=function(e){return e.__ename__},js.Boot.getClass=function(e){return e.__class__},js.Boot.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var n,s,i,a=typeof e;switch("function"==a&&(e.__name__||e.__ename__)&&(a="object"),a){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];n=e[0]+"(",t+="\t";var o=2;for(i=e.length;o<i;)n+=2!=(s=o++)?","+js.Boot.__string_rec(e[s],t):js.Boot.__string_rec(e[s],t);return n+")"}var l=e.length;for(n="[",t+="\t",i=0;i<l;){var r=i++;n+=(r>0?",":"")+js.Boot.__string_rec(e[r],t)}return n+"]"}var c;try{c=e.toString}catch(e){return"???"}if(null!=c&&c!=Object.toString){var h=e.toString();if("[object Object]"!=h)return h}n="{\n",t+="\t";var m=null!=e.hasOwnProperty;for(var d in e)m&&!e.hasOwnProperty(d)||"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=n.length&&(n+=", \n"),n+=t+d+" : "+js.Boot.__string_rec(e[d],t));return n+"\n"+(t=t.substring(1))+"}";case"function":return"<function>";case"string":return e;default:return String(e)}},js.Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var s=0,i=n.length;s<i;){var a=n[s++];if(a==t||js.Boot.__interfLoop(a,t))return!0}return js.Boot.__interfLoop(e.__super__,t)},js.Boot.__instanceof=function(e,t){try{if(e instanceof t)return t!=Array||null==e.__enum__;if(js.Boot.__interfLoop(e.__class__,t))return!0}catch(e){if(null==t)return!1}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return"number"==typeof e;case Bool:return!0===e||!1===e;case String:return"string"==typeof e;case Dynamic:return!0;default:return null!=e&&(t==Class&&null!=e.__name__||t==Enum&&null!=e.__ename__||e.__enum__==t)}},js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;throw"Cannot cast "+Std.string(e)+" to "+Std.string(t)},js.Boot.prototype.__class__=js.Boot,window.HxOverrides=function(){},$hxClasses.HxOverrides=HxOverrides,HxOverrides.__name__=["HxOverrides"],HxOverrides.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),s=e.getHours(),i=e.getMinutes(),a=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(n<10?"0"+n:""+n)+" "+(s<10?"0"+s:""+s)+":"+(i<10?"0"+i:""+i)+":"+(a<10?"0"+a:""+a)},HxOverrides.strDate=function(e){var t;switch(e.length){case 8:t=e.split(":");var n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:return t=e.split("-"),new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var s=(t=e.split(" "))[0].split("-"),i=t[1].split(":");return new Date(s[0],s[1]-1,s[2],i[0],i[1],i[2]);default:throw"Invalid date format : "+e}},HxOverrides.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},HxOverrides.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&n<0?"":(null==n&&(n=e.length),t<0?(t=e.length+t)<0&&(t=0):n<0&&(n=e.length+n-t),e.substr(t,n))},HxOverrides.remove=function(e,t){for(var n=0,s=e.length;n<s;){if(e[n]==t)return e.splice(n,1),!0;n++}return!1},HxOverrides.iter=function(e){var t=0;return{cur:t,arr:e,hasNext:function(){return t<e.length},next:function(){return e[t++]}}},HxOverrides.prototype.__class__=HxOverrides,window.Hash=function(){this.h={}},$hxClasses.Hash=Hash,Hash.__name__=["Hash"],Hash.prototype.toString=function(){var e=new StringBuf;e.b+=Std.string("{");for(var t=this.keys();t.hasNext();){var n=t.next();e.b+=Std.string(n),e.b+=Std.string(" => "),e.b+=Std.string(Std.string(this.get(n))),t.hasNext()&&(e.b+=Std.string(", "))}return e.b+=Std.string("}"),e.b},Hash.prototype.iterator=function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref["$"+e]}}},Hash.prototype.keys=function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t.substr(1));return HxOverrides.iter(e)},Hash.prototype.remove=function(e){return e="$"+e,!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},Hash.prototype.exists=function(e){return this.h.hasOwnProperty("$"+e)},Hash.prototype.get=function(e){return this.h["$"+e]},Hash.prototype.set=function(e,t){this.h["$"+e]=t},Hash.prototype.h=null,Hash.prototype.__class__=Hash,window.StringBuf=function(){this.b=""},$hxClasses.StringBuf=StringBuf,StringBuf.__name__=["StringBuf"],StringBuf.prototype.toString=function(){return this.b},StringBuf.prototype.addSub=function(e,t,n){this.b+=HxOverrides.substr(e,t,n)},StringBuf.prototype.addChar=function(e){this.b+=String.fromCharCode(e)},StringBuf.prototype.add=function(e){this.b+=Std.string(e)},StringBuf.prototype.b=null,StringBuf.prototype.__class__=StringBuf,window.StringTools=function(){},$hxClasses.StringTools=StringTools,StringTools.__name__=["StringTools"],StringTools.urlEncode=function(e){return encodeURIComponent(e)},StringTools.urlDecode=function(e){return decodeURIComponent(e.split("+").join(" "))},StringTools.htmlEscape=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},StringTools.htmlUnescape=function(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&amp;").join("&")},StringTools.startsWith=function(e,t){return e.length>=t.length&&HxOverrides.substr(e,0,t.length)==t},StringTools.endsWith=function(e,t){var n=t.length,s=e.length;return s>=n&&HxOverrides.substr(e,s-n,n)==t},StringTools.isSpace=function(e,t){var n=HxOverrides.cca(e,t);return n>=9&&n<=13||32==n},StringTools.ltrim=function(e){if("string"!=typeof e)return e;for(var t=e.length,n=0;n<t&&StringTools.isSpace(e,n);)n++;return n>0?HxOverrides.substr(e,n,t-n):e},StringTools.rtrim=function(e){if("string"!=typeof e)return e;for(var t=e.length,n=0;n<t&&StringTools.isSpace(e,t-n-1);)n++;return n>0?HxOverrides.substr(e,0,t-n):e},StringTools.trim=function(e){return StringTools.ltrim(StringTools.rtrim(e))},StringTools.rpad=function(e,t,n){for(var s=e.length,i=t.length;s<n;)n-s<i?(e+=HxOverrides.substr(t,0,n-s),s=n):(e+=t,s+=i);return e},StringTools.lpad=function(e,t,n){var s="",i=e.length;if(i>=n)return e;for(var a=t.length;i<n;)n-i<a?(s+=HxOverrides.substr(t,0,n-i),i=n):(s+=t,i+=a);return s+e},StringTools.replace=function(e,t,n){return e.split(t).join(n)},StringTools.hex=function(e,t){var n="";do{n="0123456789ABCDEF".charAt(15&e)+n,e>>>=4}while(e>0);if(null!=t)for(;n.length<t;)n="0"+n;return n},StringTools.fastCodeAt=function(e,t){return e.charCodeAt(t)},StringTools.isEOF=function(e){return e!=e},StringTools.prototype.__class__=StringTools,window.EReg=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)},$hxClasses.EReg=EReg,EReg.__name__=["EReg"],EReg.prototype.customReplace=function(e,t){for(var n=new StringBuf;this.match(e);)n.b+=Std.string(this.matchedLeft()),n.b+=Std.string(t(this)),e=this.matchedRight();return n.b+=Std.string(e),n.b},EReg.prototype.replace=function(e,t){return e.replace(this.r,t)},EReg.prototype.split=function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},EReg.prototype.matchedPos=function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},EReg.prototype.matchedRight=function(){if(null==this.r.m)throw"No string matched";var e=this.r.m.index+this.r.m[0].length;return this.r.s.substr(e,this.r.s.length-e)},EReg.prototype.matchedLeft=function(){if(null==this.r.m)throw"No string matched";return this.r.s.substr(0,this.r.m.index)},EReg.prototype.matched=function(e){return null!=this.r.m&&e>=0&&e<this.r.m.length?this.r.m[e]:function(){throw"EReg::matched"}()},EReg.prototype.match=function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},EReg.prototype.r=null,EReg.prototype.__class__=EReg,window.Xml=function(){},$hxClasses.Xml=Xml,Xml.__name__=["Xml"],Xml.Element="element",Xml.PCData="pcdata",Xml.CData="cdata",Xml.Comment="comment",Xml.DocType="doctype",Xml.Prolog="prolog",Xml.Document="document",Xml.parse=function(e){return haxe.xml.Parser.parse(e)},Xml.createElement=function(e){var t=new Xml;return t.nodeType=Xml.Element,t._children=new Array,t._attributes=new Hash,t.setNodeName(e),t},Xml.createPCData=function(e){var t=new Xml;return t.nodeType=Xml.PCData,t.setNodeValue(e),t},Xml.createCData=function(e){var t=new Xml;return t.nodeType=Xml.CData,t.setNodeValue(e),t},Xml.createComment=function(e){var t=new Xml;return t.nodeType=Xml.Comment,t.setNodeValue(e),t},Xml.createDocType=function(e){var t=new Xml;return t.nodeType=Xml.DocType,t.setNodeValue(e),t},Xml.createProlog=function(e){var t=new Xml;return t.nodeType=Xml.Prolog,t.setNodeValue(e),t},Xml.createDocument=function(){var e=new Xml;return e.nodeType=Xml.Document,e._children=new Array,e},Xml.prototype.toString=function(){if(this.nodeType==Xml.PCData)return this._nodeValue;if(this.nodeType==Xml.CData)return"<![CDATA["+this._nodeValue+"]]>";if(this.nodeType==Xml.Comment)return"\x3c!--"+this._nodeValue+"--\x3e";if(this.nodeType==Xml.DocType)return"<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==Xml.Prolog)return"<?"+this._nodeValue+"?>";var e=new StringBuf;if(this.nodeType==Xml.Element){e.b+=Std.string("<"),e.b+=Std.string(this._nodeName);for(var t=this._attributes.keys();t.hasNext();){var n=t.next();e.b+=Std.string(" "),e.b+=Std.string(n),e.b+=Std.string('="'),e.b+=Std.string(this._attributes.get(n)),e.b+=Std.string('"')}if(0==this._children.length)return e.b+=Std.string("/>"),e.b;e.b+=Std.string(">")}for(var s=this.iterator();s.hasNext();){var i=s.next();e.b+=Std.string(i.toString())}return this.nodeType==Xml.Element&&(e.b+=Std.string("</"),e.b+=Std.string(this._nodeName),e.b+=Std.string(">")),e.b},Xml.prototype.insertChild=function(e,t){if(null==this._children)throw"bad nodetype";null!=e._parent&&HxOverrides.remove(e._parent._children,e),e._parent=this,this._children.splice(t,0,e)},Xml.prototype.removeChild=function(e){if(null==this._children)throw"bad nodetype";var t=HxOverrides.remove(this._children,e);return t&&(e._parent=null),t},Xml.prototype.addChild=function(e){if(null==this._children)throw"bad nodetype";null!=e._parent&&HxOverrides.remove(e._parent._children,e),e._parent=this,this._children.push(e)},Xml.prototype.firstElement=function(){if(null==this._children)throw"bad nodetype";for(var e=0,t=this._children.length;e<t;){var n=this._children[e];if(n.nodeType==Xml.Element)return n;e++}return null},Xml.prototype.firstChild=function(){if(null==this._children)throw"bad nodetype";return this._children[0]},Xml.prototype.elementsNamed=function(e){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var t=this.cur,n=this.x.length;t<n;){var s=this.x[t];if(s.nodeType==Xml.Element&&s._nodeName==e)break;t++}return this.cur=t,t<n},next:function(){for(var t=this.cur,n=this.x.length;t<n;){var s=this.x[t];if(t++,s.nodeType==Xml.Element&&s._nodeName==e)return this.cur=t,s}return null}}},Xml.prototype.elements=function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var e=this.cur,t=this.x.length;e<t&&this.x[e].nodeType!=Xml.Element;)e+=1;return this.cur=e,e<t},next:function(){for(var e=this.cur,t=this.x.length;e<t;){var n=this.x[e];if(e+=1,n.nodeType==Xml.Element)return this.cur=e,n}return null}}},Xml.prototype.iterator=function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},Xml.prototype.attributes=function(){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.keys()},Xml.prototype.exists=function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.exists(e)},Xml.prototype.remove=function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";this._attributes.remove(e)},Xml.prototype.set=function(e,t){if(this.nodeType!=Xml.Element)throw"bad nodeType";this._attributes.set(e,t)},Xml.prototype.get=function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._attributes.get(e)},Xml.prototype.getParent=function(){return this._parent},Xml.prototype.setNodeValue=function(e){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw"bad nodeType";return this._nodeValue=e},Xml.prototype.getNodeValue=function(){if(this.nodeType==Xml.Element||this.nodeType==Xml.Document)throw"bad nodeType";return this._nodeValue},Xml.prototype.setNodeName=function(e){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._nodeName=e},Xml.prototype.getNodeName=function(){if(this.nodeType!=Xml.Element)throw"bad nodeType";return this._nodeName},Xml.prototype._parent=null,Xml.prototype._children=null,Xml.prototype._attributes=null,Xml.prototype._nodeValue=null,Xml.prototype._nodeName=null,Xml.prototype.parent=null,Xml.prototype.nodeValue=null,Xml.prototype.nodeName=null,Xml.prototype.nodeType=null,Xml.prototype.__class__=Xml,com.inq.utils.ConsoleLogger=function(){},$hxClasses["com.inq.utils.ConsoleLogger"]=com.inq.utils.ConsoleLogger,com.inq.utils.ConsoleLogger.__name__=["com","inq","utils","ConsoleLogger"],com.inq.utils.ConsoleLogger.detect=com.inq.flash.client.control.FlashPeer.isLoggingDisabled()?function(){return!1}:function(){return!!window.console},com.inq.utils.ConsoleLogger.redirectTraces=function(){haxe.Log.trace=com.inq.utils.ConsoleLogger.trace,js.Lib.onerror=com.inq.utils.ConsoleLogger.onError},com.inq.utils.ConsoleLogger.onError=function(e,t){for(var n=e+"\n",s=0;s<t.length;){var i=t[s];++s,n+="Called from "+i+"\n"}return com.inq.utils.ConsoleLogger.trace(n,null),!0},com.inq.utils.ConsoleLogger.trace=function(e,t){if(com.inq.utils.ConsoleLogger.detect()){var n=null!=t&&null!=t.customParams?t.customParams[0]:null;if("warn"!=n&&"info"!=n&&"debug"!=n&&"error"!=n&&(n=null==t?"error":"log"),null!=window.console[n])try{var s=null==t?"":(t.fileName||t.className)+":"+(t.lineNumber||t.methodName)+" : ";window.console[n](s+Std.string(e))}catch(e){}}},com.inq.utils.ConsoleLogger.prototype.__class__=com.inq.utils.ConsoleLogger,window.CHAT_CONTINUED="c",window.CHAT_ENGAGED="eng",window.CHAT_INTERACTED="ai",window.CHAT_WINDOW_APPEARED="cwa",window.CLICK_STREAM_DATA_SENT_KEY="s",window.CLIENT_NAME_PERSIST="cn",window.CUSTOMER_DISPLAY_NAME="ci_cdn",window.EMAIL_MANAGER_CAPTURE_STATE="emlc",window.EMAIL_MANAGER_STATE="eml",window.EMBEDDED_SKIN_PATH="skn_emb",window.ENGAGE_CHAT_PARAMS="ecp",window.BUSINESS_UNIT_ID="buId",window.AGENT_GROUP_ID="agId",window.FONT_SIZE_INCREASED="fi",window.HEIGHT="h",window.IFRAME_URL="ifrmurl",window.INITIAL_TIMEOUT="it",window.LAST_FOCUSED="lf",window.LAST_TOUCHED_TIME="lt",window.LEFT="l",window.RIGHT="r",window.MESSAGE_COUNT="msgcnt",window.MINIMIZED_COUNT="mc",window.MUTE_SOUND="m",window.OPENER_SCRIPT_COUNT="cntOS",window.PRE_CHAT_SURVEY_SHOWN="pss",window.PRE_CHAT_SURVEY_COMPLETED="psc",window.QUEUE_MESSAGE_COUNT="qmCnt",window.QUEUE_MESSAGE_ID="qmId",window.REALLY_MINIMIZED="rm",window.SKIN_PATH="skn",window.TOP="t",window.BOTTOM="b",window.VIRTUAL_AGENT="va",window.WEB_CALL_AUTH_TOKEN="watoken",window.WEB_CALL_MODE="ewcall",window.WEB_CALL_STARTED="wcall",window.WEB_CALL_URL="wcallUrl",window.WIDTH="w",window.XFORM_QUERY_STRING="xfq",window.XFRAMES="xf",window.INITIAL_CUSTOMER_ID="iccid",window.CONVERSATION_ID="cid",com.inq.utils.Capabilities=function(){},$hxClasses["com.inq.utils.Capabilities"]=com.inq.utils.Capabilities,com.inq.utils.Capabilities.__name__=["com","inq","utils","Capabilities"],com.inq.utils.Capabilities.os=null,com.inq.utils.Capabilities._os=null,com.inq.utils.Capabilities.userAgent=null,com.inq.utils.Capabilities.isWebKit=null,com.inq.utils.Capabilities.viewportDetector=null,com.inq.utils.Capabilities.init=function(){var e=null,t=null,n=null;try{for(var s=0,i=com.inq.utils.Capabilities.patternTable.length;s<i;){var a=s++;if((n=new EReg(com.inq.utils.Capabilities.patternTable[a],"i")).match(com.inq.utils.Capabilities.getUserAgent())){switch(com.inq.utils.Capabilities._os=n.matched(1),com.inq.utils.Capabilities._os){case"Windows NT 6.1":com.inq.utils.Capabilities._os="Windows 7/Windows Server 2008 R2";break;case"Windows NT 6.0":com.inq.utils.Capabilities._os="Windows Vista/Windows Server 2008";break;case"Windows NT 5.2":com.inq.utils.Capabilities._os="Windows XP/Windows Server 2003/Windows Home Server";break;case"Windows NT 5.1":com.inq.utils.Capabilities._os="Windows XP";break;case"Windows NT 6.2":com.inq.utils.Capabilities._os="Windows 8";break;case"Windows NT 10.0":com.inq.utils.Capabilities._os="Windows 10";break;default:if(-1!=com.inq.utils.Capabilities._os.indexOf("like Mac OS X")){var o="",l="",r=new EReg("CPU OS (\\w*) like Mac OS X","gi"),c=new EReg("[\\s]*\\w+[/ ][0-9a-zA-Z.]*\\s[(](\\w+);\\s*([^;\\)]*).*","gi");r.match(com.inq.utils.Capabilities._os)&&(o=r.matched(1)),c.match(com.inq.utils.Capabilities.getUserAgent())&&(l=" "+c.matched(1)),com.inq.utils.Capabilities._os="Mac iOS "+o+l}}return!0}}}catch(e){if(!js.Boot.__instanceof(e,Error))throw e}try{e=window.navigator.platform,t=window.navigator.cpuClass}catch(e){if(!js.Boot.__instanceof(e,Error))throw e}return com.inq.utils.Capabilities._os=null==e?"unknown":e,null!=t&&(com.inq.utils.Capabilities._os+=" "+t),!0},com.inq.utils.Capabilities._getOS=function(){return 0==com.inq.utils.Capabilities._init&&(com.inq.utils.Capabilities._init=com.inq.utils.Capabilities.init()),com.inq.utils.Capabilities._os},com.inq.utils.Capabilities.getUserAgent=function(){return null==com.inq.utils.Capabilities.userAgent&&(com.inq.utils.Capabilities.userAgent=window.navigator.userAgent),com.inq.utils.Capabilities.userAgent},com.inq.utils.Capabilities.isMobile=function(){return null==com.inq.utils.Capabilities.mobile&&(com.inq.utils.Capabilities.mobile=com.inq.utils.Capabilities.isPhone()||com.inq.utils.Capabilities.isTablet()),com.inq.utils.Capabilities.mobile},com.inq.utils.Capabilities.isIphone=function(){return com.inq.utils.Capabilities.isPhone()&&-1!=com.inq.utils.Capabilities._getOS().indexOf("iPhone")},com.inq.utils.Capabilities.isIpad=function(){var e=["iPad Simulator","iPad"].includes(navigator.platform),t=navigator.userAgent.includes("Mac")&&"ontouchend"in document;return e||t},com.inq.utils.Capabilities.isIe10Phone=function(){var e=com.inq.utils.Capabilities.isWindowsPhone(),t=com.inq.utils.Capabilities.getIeVersion();return e&&t>=10},com.inq.utils.Capabilities.getIeVersion=function(){try{if(null!=com.inq.utils.Capabilities.ieVersion)return com.inq.utils.Capabilities.ieVersion;var e=com.inq.utils.Capabilities.getUserAgent().match(/(MSIE (\d+\.*\d*))|(IEMobile\/(\d+\.*\d+))/),t=Std.parseInt(e[2]||e[4]);return com.inq.utils.Capabilities.ieVersion=t,t}catch(e){return-1}},com.inq.utils.Capabilities.isPhone=function(){return"Phone"==com.inq.utils.Capabilities.getDeviceType()},com.inq.utils.Capabilities.isTablet=function(){return"Tablet"==com.inq.utils.Capabilities.getDeviceType()},com.inq.utils.Capabilities.getDeviceType=function(){return null==com.inq.utils.Capabilities.deviceType&&(com.inq.utils.Capabilities.deviceType=com.inq.flash.client.control.FlashPeer.getDeviceType(),"Standard"==com.inq.utils.Capabilities.deviceType&&com.inq.utils.Capabilities.isIpad()&&(com.inq.utils.Capabilities.deviceType="Tablet")),com.inq.utils.Capabilities.deviceType},com.inq.utils.Capabilities.isChrome=function(){return-1==com.inq.utils.Capabilities.getUserAgent().toLowerCase().indexOf("edge")&&com.inq.utils.Capabilities.getUserAgent().toLowerCase().indexOf("chrome")>-1},com.inq.utils.Capabilities.getChromeVersion=function(){try{if(null!=com.inq.utils.Capabilities.chromeVersion)return com.inq.utils.Capabilities.chromeVersion;if(1==com.inq.utils.Capabilities.isChrome()){var e=com.inq.utils.Capabilities.getUserAgent().match(/Chrome\/(\d+)/),t=Std.parseInt(e[1]);return com.inq.utils.Capabilities.chromeVersion=t,t}return-1}catch(e){return-1}},com.inq.utils.Capabilities._isWebKit=function(){if(null!=com.inq.utils.Capabilities.webKit)return com.inq.utils.Capabilities.webKit;var e=new EReg("(safari)","i");return com.inq.utils.Capabilities.webKit=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities.webKit},com.inq.utils.Capabilities.isSafari=function(){if(null!=com.inq.utils.Capabilities._isSafari)return com.inq.utils.Capabilities._isSafari;var e=com.inq.utils.Capabilities.userAgent.toLowerCase();return com.inq.utils.Capabilities._isSafari=e.indexOf("safari")>=0&&!(e.indexOf("chrome")>=0||e.indexOf("crios")>=0),com.inq.utils.Capabilities._isSafari},com.inq.utils.Capabilities.isSafariVersion8=function(){if(null!=com.inq.utils.Capabilities._isVersion8)return com.inq.utils.Capabilities._isVersion8;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/8)","i");return com.inq.utils.Capabilities._isVersion8=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion8},com.inq.utils.Capabilities.isSafariVersion9=function(){if(null!=com.inq.utils.Capabilities._isVersion9)return com.inq.utils.Capabilities._isVersion9;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/9)","i");return com.inq.utils.Capabilities._isVersion9=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion9},com.inq.utils.Capabilities.isSafariVersion10=function(){if(null!=com.inq.utils.Capabilities._isVersion10)return com.inq.utils.Capabilities._isVersion10;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/10)","i");return com.inq.utils.Capabilities._isVersion10=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion10||(e=new EReg("(iPhone|iPad) OS 10.*AppleWebKit","i"),com.inq.utils.Capabilities._isVersion10=e.match(com.inq.utils.Capabilities.getUserAgent())),com.inq.utils.Capabilities._isVersion10},com.inq.utils.Capabilities.isSafariVersion11=function(){if(null!=com.inq.utils.Capabilities._isVersion11)return com.inq.utils.Capabilities._isVersion11;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/11)","i");return com.inq.utils.Capabilities._isVersion11=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion11||(e=new EReg("(iPhone|iPad) OS 11.*AppleWebKit","i"),com.inq.utils.Capabilities._isVersion11=e.match(com.inq.utils.Capabilities.getUserAgent())),com.inq.utils.Capabilities._isVersion11},com.inq.utils.Capabilities.isSafariVersion12=function(){if(null!=com.inq.utils.Capabilities._isVersion12)return com.inq.utils.Capabilities._isVersion12;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/12)","i");return com.inq.utils.Capabilities._isVersion12=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion12||(e=new EReg("(iPhone|iPad) OS 12.*AppleWebKit","i"),com.inq.utils.Capabilities._isVersion12=e.match(com.inq.utils.Capabilities.getUserAgent())),com.inq.utils.Capabilities._isVersion12},com.inq.utils.Capabilities.isSafariVersion13=function(){if(null!=com.inq.utils.Capabilities._isVersion13)return com.inq.utils.Capabilities._isVersion13;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/13)","i");return com.inq.utils.Capabilities._isVersion13=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion13||(e=new EReg("(iPhone|iPad) OS 13.*AppleWebKit","i"),com.inq.utils.Capabilities._isVersion13=e.match(com.inq.utils.Capabilities.getUserAgent())),com.inq.utils.Capabilities._isVersion13},com.inq.utils.Capabilities.isSafariVersion14orLater=function(){if(null!==com.inq.utils.Capabilities._isVersion14orLater)return com.inq.utils.Capabilities._isVersion14orLater;var e=["14","15"];for(let s=0;s<e.length;s++){let i=e[s];var t=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*(Version\\/"+i+")","i"),n=new EReg("(iPhone|iPad) OS "+i+".*AppleWebKit","i");if(com.inq.utils.Capabilities._isVersion14orLater=t.match(com.inq.utils.Capabilities.getUserAgent())||n.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersion14orLater)return!0}return com.inq.utils.Capabilities._isVersion14orLater},com.inq.utils.Capabilities.isIOSWebView=function(){if(null!=com.inq.utils.Capabilities._isIOSWebView)return com.inq.utils.Capabilities._isIOSWebView;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)","i");return com.inq.utils.Capabilities._isIOSWebView=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isIOSWebView||com.inq.utils.Capabilities.isIPadWebViewInDesktopMode()},com.inq.utils.Capabilities.isIPadWebViewInDesktopMode=function(){if(null!=com.inq.utils.Capabilities._isIOSWebViewInDM)return com.inq.utils.Capabilities._isIOSWebViewInDM;var e=new RegExp("(Macintosh).*AppleWebKit(?!.*Safari)","i");return com.inq.utils.Capabilities._isIOSWebViewInDM=e.test(com.inq.utils.Capabilities.getUserAgent())&&!com.inq.utils.Capabilities.isChrome(),com.inq.utils.Capabilities._isIOSWebViewInDM},com.inq.utils.Capabilities.isAndroidWebView=function(){if(null!=com.inq.utils.Capabilities._isAndroidWebView)return com.inq.utils.Capabilities._isAndroidWebView;var e=new EReg("Android.*?(wv|Version\\/[.0-9]+).*?Chrome\\/([0-9]{2})","i");return com.inq.utils.Capabilities._isAndroidWebView=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isAndroidWebView},com.inq.utils.Capabilities.isSafariVersionPrior8=function(){if(null!=com.inq.utils.Capabilities._isVersionPrior8)return com.inq.utils.Capabilities._isVersionPrior8;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*Version\\/(6|7)","i");return com.inq.utils.Capabilities._isVersionPrior8=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isVersionPrior8},com.inq.utils.Capabilities.isChromeiOS8=function(){if(null!=com.inq.utils.Capabilities._isCriOS8)return com.inq.utils.Capabilities._isCriOS8;var e=new EReg("(iPhone|iPod|iPad).*(CPU\\s(iPhone|iPod|iPad)\\sOS\\s(6|7|8|9)_).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS8=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS8},com.inq.utils.Capabilities.isChromeiOS10=function(){if(null!=com.inq.utils.Capabilities._isCriOS10)return com.inq.utils.Capabilities._isCriOS10;var e=new EReg("(iPhone|iPod|iPad).*(CPU.*\\sOS\\s10_).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS10=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS10},com.inq.utils.Capabilities.isChromeiOS11=function(){if(null!=com.inq.utils.Capabilities._isCriOS11)return com.inq.utils.Capabilities._isCriOS11;var e=new EReg("(iPhone|iPod|iPad).*(CPU.*\\sOS\\s11_).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS11=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS11},com.inq.utils.Capabilities.isChromeiOS12=function(){if(null!=com.inq.utils.Capabilities._isCriOS12)return com.inq.utils.Capabilities._isCriOS12;var e=new EReg("(iPhone|iPod|iPad).*(CPU.*\\sOS\\s12_).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS12=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS12},com.inq.utils.Capabilities.isChromeiOS13=function(){if(null!=com.inq.utils.Capabilities._isCriOS13)return com.inq.utils.Capabilities._isCriOS13;var e=new EReg("(iPhone|iPod|iPad).*(CPU.*\\sOS\\s13_).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS13=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS13},com.inq.utils.Capabilities.isChromeiOS14=function(){if(null!==com.inq.utils.Capabilities._isCriOS14)return com.inq.utils.Capabilities._isCriOS14;var e=new EReg("(iPhone|iPod|iPad).*(CPU.*\\sOS\\s14_).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS14=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS14},com.inq.utils.Capabilities.isChromeOnIphone=function(){return com.inq.utils.Capabilities.isPhone()&&(com.inq.utils.Capabilities.isChromeiOS14()||com.inq.utils.Capabilities.isChromeiOS13()||com.inq.utils.Capabilities.isChromeiOS12()||com.inq.utils.Capabilities.isChromeiOS11()||com.inq.utils.Capabilities.isChromeiOS10())},com.inq.utils.Capabilities.isChromeiOS=function(){if(null!=com.inq.utils.Capabilities._isCriOS)return com.inq.utils.Capabilities._isCriOS;var e=new EReg("(iPhone|iPod|iPad).*AppleWebKit?.*CriOS","i");return com.inq.utils.Capabilities._isCriOS=e.match(com.inq.utils.Capabilities.getUserAgent()),com.inq.utils.Capabilities._isCriOS},com.inq.utils.Capabilities.BindListener=function(e,t,n){null!=window.addEventListener?e.addEventListener(t,n,!1):null!=window.attachEvent&&e.attachEvent("on"+t,n)},com.inq.utils.Capabilities.UnbindListener=function(e,t,n){null!=window.removeEventListener?e.removeEventListener(t,n,!1):null!=window.detachEvent&&e.detachEvent("on"+t,n)},com.inq.utils.Capabilities.isWindowsPhone=function(e){var t=new EReg("Windows Phone","i").match(com.inq.utils.Capabilities.getUserAgent());return t&&null!=e&&(t=-1!=com.inq.utils.Capabilities.getUserAgent().indexOf(e)),t},com.inq.utils.Capabilities.isAndroid=function(e){var t=new EReg("^(?!.*windows)(?=.*android)","i").match(com.inq.utils.Capabilities.getUserAgent());return t&&null!=e&&(t=-1!=com.inq.utils.Capabilities.getUserAgent().indexOf(e)),t},com.inq.utils.Capabilities.getDefaultResizeArea=function(){return com.inq.utils.Capabilities.isMobile()?new com.inq.utils.Area(0,0,32,32):new com.inq.utils.Area(0,0,16,16)},com.inq.utils.Capabilities.isFF=function(){return"undefined"!=typeof InstallTrigger&&-1!=com.inq.utils.Capabilities.getUserAgent().toLowerCase().indexOf("firefox")},com.inq.utils.Capabilities.isAutoZoom=function(){var e=!1;return com.inq.utils.Capabilities.isMobile()&&(e=!new EReg("android","i").match(com.inq.utils.Capabilities.getUserAgent())||!new EReg("a100|a200|transformer tf101|transformer tf300|gt-p6210|gt-p7100|sony tablet s|kindle fire","i").match(com.inq.utils.Capabilities.getUserAgent())),e},com.inq.utils.Capabilities.getViewport=function(){var e,t=com.inq.flash.client.chatskins.ScrollMonitor.getScrollLeft(),n=com.inq.flash.client.chatskins.ScrollMonitor.getScrollTop();if(com.inq.utils.Capabilities.isAndroid()&&(!com.inq.utils.Capabilities.isChrome()||com.inq.utils.Capabilities.getChromeVersion()<40)){var s=com.inq.utils.Capabilities.getLowerRightCorner();e=new com.inq.utils.Area(t,n,s.x,s.y)}else{var i=Std.parseInt(window.parent.innerWidth),a=Std.parseInt(window.parent.innerHeight);e=new com.inq.utils.Area(t,n,i,a)}return e},com.inq.utils.Capabilities.getOrientation=function(){var e=!("orientation"in window)||(window.parent.orientation+360)%180==0;if(com.inq.utils.Capabilities.isChrome()){var t=parseInt(window.navigator.appVersion.match(/Chrome\/(\d+)\./)[1],10),n=window.top;isNaN(t)||t>=33&&t<=35?e=n.outerWidth<n.outerHeight:t>=36&&(e=n.screen.width<n.screen.height)}return e},com.inq.utils.Capabilities.getScreenHeight=function(){var e=window.top;return com.inq.utils.Capabilities.isIphone()||com.inq.utils.Capabilities.isIpad()?com.inq.utils.Capabilities.getOrientation()?e.screen.height>e.screen.width?e.screen.height:e.screen.width:e.screen.height>e.screen.width?e.screen.width:e.screen.height:e.screen.height},com.inq.utils.Capabilities.getScreenWidth=function(){var e=window.top;return com.inq.utils.Capabilities.isIphone()||com.inq.utils.Capabilities.isIpad()?com.inq.utils.Capabilities.getOrientation()?e.screen.height>e.screen.width?e.screen.width:e.screen.height:e.screen.height>e.screen.width?e.screen.height:e.screen.width:e.screen.width},com.inq.utils.Capabilities.getAvailHeight=function(){var e=window.top;return com.inq.utils.Capabilities.isIphone()||com.inq.utils.Capabilities.isIpad()?com.inq.utils.Capabilities.getOrientation()?e.screen.availHeight>e.screen.availWidth?e.screen.availHeight:e.screen.availWidth:e.screen.availHeight>e.screen.availWidth?e.screen.availWidth:e.screen.availHeight:e.screen.availHeight},com.inq.utils.Capabilities.isChromed=function(){return window.top.innerHeight===com.inq.utils.Capabilities.getAvailHeight()},com.inq.utils.Capabilities.getZoom=function(){try{var e=com.inq.utils.Capabilities.getViewport(),t=Std.parseInt(window.parent.screen.width);return Math.round(t/e.w*100)/100}catch(e){return 1}},com.inq.utils.Capabilities.getLowerRightCorner=function(){0==window.top.pageYOffset&&window.top.scrollBy(0,1),com.inq.utils.Capabilities.initZoomDetection();var e=com.inq.utils.Capabilities.viewportDetector.offsetLeft-com.inq.utils.Capabilities.viewportDetector.parentNode.scrollLeft,t=com.inq.utils.Capabilities.viewportDetector.offsetTop-com.inq.utils.Capabilities.viewportDetector.parentNode.scrollTop;return e+=1,t+=1,com.inq.utils.Capabilities.isTablet()&&(com.inq.utils.Capabilities.viewportDetector.offsetTop+1===window.parent.innerHeight&&(t=window.parent.innerHeight),com.inq.utils.Capabilities.viewportDetector.offsetLeft+1===window.parent.innerWidth&&(e=window.parent.innerWidth)),new com.inq.utils.Point(e,t)},com.inq.utils.Capabilities.initZoomDetection=function(){try{if(!com.inq.utils.Capabilities.viewportDetectorInitialized){var e=window.parent.document.createElement("DIV");e.style.position="fixed",e.style.height="1px",e.style.width="1px",e.style.right="0px",e.style.bottom="0px",com.inq.utils.Capabilities.viewportDetector=e,window.parent.document.body.appendChild(com.inq.utils.Capabilities.viewportDetector),com.inq.utils.Capabilities.viewportDetectorInitialized=!0}}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace(e,{fileName:"Capabilities.hx",lineNumber:387,className:"com.inq.utils.Capabilities",methodName:"initZoomDetection"})}},com.inq.utils.Capabilities.waitFor=function(e,t,n,s,i){null==i&&(i=1);var a=0,o=window.setInterval((function(){haxe.Log.trace("interval[count: "+a+", max: "+s+", ripples: "+i+"]",{fileName:"Capabilities.hx",lineNumber:402,className:"com.inq.utils.Capabilities",methodName:"waitFor"}),null!=s&&++a>s?window.clearInterval(o):e()&&(--i<=0&&window.clearInterval(o),a=0,n())}),t);return o},com.inq.utils.Capabilities.setDomSafeTimeout=function(e,t){var n="domsafe"+(Math.random()+"").substring(2),s=function(){com.inq.utils.Capabilities.UnbindListener(window,n,s),e()};com.inq.utils.Capabilities.BindListener(window,n,s);var i=window.setTimeout((function(){window.dispatchEvent(new Event(n))}),t);return{clear:function(){window.clearTimeout(i),com.inq.utils.Capabilities.UnbindListener(window,n,s)}}},com.inq.utils.Capabilities.viewportStopsMoving=function(e){var t=com.inq.utils.Capabilities.getViewport(),n=(new Date).getTime();return function(){var s=(new Date).getTime(),i=s-n,a=com.inq.utils.Capabilities.getViewport(),o=t.equals(a);return haxe.Log.trace("viewportStopsMoving[dt: "+i+", time: "+e+"]",{fileName:"Capabilities.hx",lineNumber:434,className:"com.inq.utils.Capabilities",methodName:"viewportStopsMoving"}),o?(haxe.Log.trace("viewport has remained the same for "+i+"ms.",{fileName:"Capabilities.hx",lineNumber:436,className:"com.inq.utils.Capabilities",methodName:"viewportStopsMoving"}),i>e&&(n=s,!0)):(haxe.Log.trace("viewport has changed.",{fileName:"Capabilities.hx",lineNumber:446,className:"com.inq.utils.Capabilities",methodName:"viewportStopsMoving"}),n=s,t=a,!1)}},com.inq.utils.Capabilities.getIOSNativeSDKInstance=function(){return window.top.webkit&&window.top.webkit.messageHandlers&&window.top.webkit.messageHandlers.NuanIJSFBridge},com.inq.utils.Capabilities.extractBrowserNameAndVersion=function(e){for(var t=null,n=null,s=[{browser:"IOS WebView",pattern:"(.*)(iPhone|iPod|iPad)(.*)AppleWebKit(?!.*Safari)(.*)",replaceWith:"IOS WebView"},{browser:"Android WebView",pattern:"(.*?)Android(.*?)(wv|Version\\/[.0-9]+)(.*?)Chrome\\/([0-9]{2})(.*?)Mobile(.*)",replaceWith:"Android WebView/Stock Browser - Chrome $5"},{browser:"Edge",pattern:"(.*)(Edge)(/)([0-9.]*)",replaceWith:"Edge $4"},{browser:"Edge",pattern:"(.*)(Edg)(/)([0-9.]*)",replaceWith:"Edge $4"},{browser:"Android Browser",pattern:".*Android(?!.*Chrome)(?=.*Mobile Safari).*Version/([0-9.]+).*",replaceWith:"Android Browser $1"},{browser:"Chrome",pattern:"(.*)(Chrome)([/| ])([0-9a-zA-Z.]*)( .*)",replaceWith:"Chrome $4"},{browser:"Chrome",pattern:"(.*?)(AppleWebKit)(.*?) CriOS/([0-9]{2,})(.*?)Safari(.*)",replaceWith:"Chrome $4"},{browser:"IE",pattern:"(.*)(Trident)(/)([0-9.]*)(.*)",replaceWith:"$4",ieVersionCorrection:4},{browser:"IE",pattern:"(.*)(MSIE)( )([0-9.]*)(;.*)",replaceWith:"IE $4"},{browser:"IE",pattern:"(.*)(MSIE)(.*)",replaceWith:"IE"},{browser:"Firefox",pattern:"(.*)(Gecko)([/ ])([0-9]*)(.*)(Firefox)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$6 $8 $4"},{browser:"Firefox",pattern:"(.*)(Firefox)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Firefox",pattern:"(.*)(Firefox)(.*)",replaceWith:"$2"},{browser:"Safari",pattern:"(.*)(AppleWebKit)(.*)(Version)([/| ])([0-9a-zA-Z.]*)( .*)",replaceWith:"Safari $6"},{browser:"Safari",pattern:"(.*)(AppleWebKit)(.*)",replaceWith:"Safari"},{browser:"Opera",pattern:"(.*)(Opera)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Opera",pattern:"(.*)(Opera)(.*)",replaceWith:"$2"},{browser:"Lobo",pattern:"(.*)(Lobo)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Beonex",pattern:"(.*)(Beonex)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"BonEcho",pattern:"(.*)(BonEcho)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Camino",pattern:"(.*)(Camino)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Chimera",pattern:"(.*)(Chimera)([/| ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Dillo",pattern:"(.*)(Dillo)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Elinks",pattern:"(.*)(Elinks)([/ (])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Epiphany",pattern:"(.*)(Epiphany)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Firebird",pattern:"(.*)(Firebird)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Flock",pattern:"(.*)(Flock)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Galeon",pattern:"(.*)(Galeon)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"GranParadiso",pattern:"(.*)(GranParadiso)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"IBrowse",pattern:"(.*)(IBrowse)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"iCab",pattern:"(.*)(iCab)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Iceape",pattern:"(.*)(Iceape)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Iceweasel",pattern:"(.*)(Iceweasel)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"K-Meleon",pattern:"(.*)(K-Meleon)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"K-Ninja",pattern:"(.*)(K-Ninja)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Kazehakase",pattern:"(.*)(Kazehakase)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Links",pattern:"(.*)(Links)([/( ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Lynx",pattern:"(.*)(Lynx)([y/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Minefield",pattern:"(.*)(Minefield)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"MultiZilla",pattern:"(.*)(MultiZilla)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Mosaic",pattern:"(.*)(Mosaic)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"NetNewsWire",pattern:"(.*)(NetNewsWire)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Netscape",pattern:"(.*)(Netscape)([6]*)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $5"},{browser:"OmniWeb",pattern:"(.*)(OmniWeb)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Oregano",pattern:"(.*)(Oregano)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Phoenix",pattern:"(.*)(Phoenix)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"SeaMonkey",pattern:"(.*)(SeaMonkey)([/ ]*)([0-9a-zA-Z.]*)(.*)",replaceWith:"$2 $4"},{browser:"Shiira",pattern:"(.*)(Shiira)([/ ]*)(([0-9][0-9a-zA-Z.]*)|([ ]))(.*)",replaceWith:"$2 $4"},{browser:"Sunrise",pattern:"(.*)(Sunrise)([/ ]*)(([0-9][0-9a-zA-Z.]*)|([ ]))(.*)",replaceWith:"$2 $4"},{browser:"Netscape",pattern:"(.*)(Mozilla)([/ ])([0-9a-zA-Z.]*)(.*)",replaceWith:"Netscape $4"}],i=0;i<s.length;i++)if(n=new EReg(s[i].pattern,"i"),t=s[i].replaceWith,n.match(e)){var a=n.replace(e,t),o=s[i].ieVersionCorrection;return o?"IE "+new String(new Number(a)+o)+".0":a}return"Unknown"},com.inq.utils.Capabilities.getiPhoneModel=function(){if(null!==com.inq.utils.Capabilities._iPhoneModel)return com.inq.utils.Capabilities._iPhoneModel;var e=null,t=document.createElement("canvas");if(t){var n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var s=n.getExtension("WEBGL_debug_renderer_info");if(s)var i=n.getParameter(s.UNMASKED_RENDERER_WEBGL)}}var a=window.parent.screen.height/window.parent.screen.width;if(a==844/390&&3==window.devicePixelRatio)e="iPhone12";else if(a==926/428&&3==window.devicePixelRatio)e="iPhone12ProMax";else if(a==896/414&&3==window.devicePixelRatio)e="iPhoneXSMax";else if(a==896/414&&2==window.devicePixelRatio)e="iPhoneXR";else if(a==812/375&&3==window.devicePixelRatio)e="Apple A12 GPU"===i?"iPhoneXS_XSMaxZoomed":"iPhoneX";else if(a==812/375&&2==window.devicePixelRatio)e="iPhoneXRZoomed";else if(a==736/414&&3==window.devicePixelRatio)switch(i){case"Apple A8 GPU":e="iPhone6Plus";break;case"Apple A9 GPU":e="iPhone6sPlus";break;case"Apple A10 GPU":e="iPhone7Plus";break;case"Apple A11 GPU":e="iPhone8Plus";break;default:e="iPhone6Plus"}else if(a==667/375&&3==window.devicePixelRatio)switch(i){case"Apple A8 GPU":e="iPhone6PlusZoomed";break;case"Apple A9 GPU":e="iPhone6sPlusZoomed";break;case"Apple A10 GPU":e="iPhone7PlusZoomed";break;case"Apple A11 GPU":e="iPhone8PlusZoomed";break;default:e="iPhone6PlusZoomed"}else if(a==667/375&&2==window.devicePixelRatio)switch(i){case"Apple A8 GPU":e="iPhone6";break;case"Apple A9 GPU":e="iPhone6s";break;case"Apple A10 GPU":e="iPhone7";break;case"Apple A11 GPU":e="iPhone8";break;default:e="iPhone6"}else if(1.775==a&&2==window.devicePixelRatio)switch(i){case"PowerVR SGX 543":e="iPhone5";break;case"Apple A7 GPU":e="iPhone5s";break;case"Apple A8 GPU":e="iPhone6Zoomed";break;case"Apple A9 GPU":e="iPhone6sZoomed";break;case"Apple A10 GPU":e="iPhone7Zoomed";break;case"Apple A11 GPU":e="iPhone8Zoomed";break;default:e="iPhone6Zoomed"}else if(1.5==a&&2==window.devicePixelRatio)e="PowerVR SGX 535"===i?"iPhone4":"iPhone4s";else if(1.5==a&&1==window.devicePixelRatio)switch(i){case"ALP0298C05":e="iPhone 3GS";break;case"S5L8900":e="iPhone 1, 3G";break;default:e="iPhone 1, 3G or 3GS"}else e="Not an iPhone";return com.inq.utils.Capabilities._iPhoneModel=e,com.inq.utils.Capabilities._iPhoneModel},com.inq.utils.Capabilities.isIPhoneXOrNewer=function(){return-1!==com.inq.utils.Capabilities.getiPhoneModel().indexOf("iPhoneX")},com.inq.utils.Capabilities.getiPadModel=function(){var e=document.createElement("canvas");if(e){var t=e.getContext("webgl")||e.getContext("experimental-webgl");if(t){var n=t.getExtension("WEBGL_debug_renderer_info");if(n)var s=t.getParameter(n.UNMASKED_RENDERER_WEBGL)}}if(window.parent.screen.height/window.parent.screen.width==1024/768)if(1==window.devicePixelRatio)switch(s){case"PowerVR SGX 535":return"iPad";case"PowerVR SGX 543":return"iPad 2 or Mini";default:return"iPad, iPad 2, iPad Mini"}else switch(s){case"PowerVR SGX 543":return"iPad 3";case"PowerVR SGX 554":return"iPad 4";case"Apple A7 GPU":return"iPad Air, Mini 2, Mini 3";case"Apple A8X GPU":return"iPad Air 2";case"Apple A8 GPU":return"iPad Mini 4";case"Apple A9 GPU":return"iPad 5, Pro 9.7";default:return"iPad 3, 4, 5, Mini 2, Mini 3, Mini 4, Air, Air 2"}else{if(window.parent.screen.height/window.parent.screen.width==1112/834)return"iPad Pro 10.5";if(window.parent.screen.height/window.parent.screen.width!=1366/1024)return"Not an iPad";switch(s){case"Apple A10X GPU":return"iPad Pro 12.9 (2nd Gen)";case"Apple A9 GPU":return"iPad Pro 12.9";default:return"iPad Pro 12.9, Pro 12.9 (2nd Gen)"}}},com.inq.utils.Capabilities.setOrigViewPortHeight=function(){com.inq.utils.Capabilities._origViewPortHeight=parseInt(window.parent.innerHeight)},com.inq.utils.Capabilities.getOrigViewPortHeight=function(){return com.inq.utils.Capabilities._origViewPortHeight},com.inq.utils.Capabilities.prototype.__class__=com.inq.utils.Capabilities,com.inq.utils.Capabilities.patternTable=["[\\s]*Mozilla[/ ][0-9a-zA-Z.]*\\s[(][^;]*;[^;]*;\\s*America Online[^;]*;[^;]*;([^;\\)]*).*","[\\s]*Mozilla[/ ][0-9a-zA-Z.]*\\s[(][^;]*;[^;]*;\\s*AOL[^;]*;([^;\\)]*).*","[\\s]*Opera[/ ][0-9a-zA-Z.]*\\s[(]Macintosh;([^;\\)]*).*","[\\s]*Opera[/ ][0-9a-zA-Z.]*\\s[(]X11;([^;\\)]*).*","[\\s]*Opera[/ ][0-9a-zA-Z.]*\\s[(]([^;\\)]*).*","[\\s]*Mozilla[/ ][0-9a-zA-Z.]*\\s[(]([^;]*);[^;]*;[\\s]Trident[^;)]*.*","[\\s]*Mozilla[/ ][0-9a-zA-Z.]*\\s[(][^;]*;[ U;]*;[ ]([^;\\)]*).*","[\\s]*Mozilla[/ ][0-9a-zA-Z.]*\\s[(]compatible; MSIE \\d*.\\d*;\\s*([^;\\)]*).*","[\\s]*\\w+[/ ][0-9a-zA-Z.]*\\s[(]\\w+;\\s*([^;\\)]*).*","[\\s]*Mozilla[/ ][0-9a-zA-Z.]*\\s[(]([^;\\)]*).*"],com.inq.utils.Capabilities._init=com.inq.utils.Capabilities.init(),com.inq.utils.Capabilities.deviceType=null,com.inq.utils.Capabilities.mobile=null,com.inq.utils.Capabilities.webKit=null,com.inq.utils.Capabilities.viewportDetectorInitialized=!1,com.inq.utils.Capabilities._iPhoneModel=null,com.inq.utils.Capabilities._isVersionPrior8=null,com.inq.utils.Capabilities._isVersion8=null,com.inq.utils.Capabilities._isVersion9=null,com.inq.utils.Capabilities._isCriOS8=null,com.inq.utils.Capabilities._isCriOS10=null,com.inq.utils.Capabilities._isCriOS11=null,com.inq.utils.Capabilities._isCriOS12=null,com.inq.utils.Capabilities._isCriOS13=null,com.inq.utils.Capabilities._isCriOS14=null,com.inq.utils.Capabilities._isVersion14orLater=null,com.inq.utils.Capabilities._isCriOS=null,com.inq.utils.Capabilities._isSafari=null,com.inq.utils.Capabilities._isIOSWebView=null,com.inq.utils.Capabilities._isAndroidWebView=null,com.inq.utils.Capabilities._origViewPortHeight=0,com.inq.events.Event=function(e,t){this.type=e,this.originalEvent=t},$hxClasses["com.inq.events.Event"]=com.inq.events.Event,com.inq.events.Event.__name__=["com","inq","events","Event"],com.inq.events.Event.ID3=null,com.inq.events.Event.ADDED_TO_STAGE=null,com.inq.events.Event.REMOVED_FROM_STAGE=null,com.inq.events.Event.prototype.type=null,com.inq.events.Event.prototype.target=null,com.inq.events.Event.prototype.eventPhase=null,com.inq.events.Event.prototype.currentTarget=null,com.inq.events.Event.prototype.cancelable=null,com.inq.events.Event.prototype.bubbles=null,com.inq.events.Event.prototype.__class__=com.inq.events.Event,com.inq.events.Event.ACTIVATE="activate",com.inq.events.Event.ADDED="added",com.inq.events.Event.CANCEL="cancel",com.inq.events.Event.CHANGE="change",com.inq.events.Event.CLOSE="close",com.inq.events.Event.COMPLETE="complete",com.inq.events.Event.CONNECT="connect",com.inq.events.Event.DEACTIVATE="deactivate",com.inq.events.Event.ENTER_FRAME="enterFrame",com.inq.events.Event.INIT="init",com.inq.events.Event.MOUSE_LEAVE="mouseLeave",com.inq.events.Event.OPEN="open",com.inq.events.Event.REMOVED="removed",com.inq.events.Event.RENDER="render",com.inq.events.Event.RESIZE="resize",com.inq.events.Event.SCROLL="scroll",com.inq.events.Event.SELECT="select",com.inq.events.Event.SOUND_COMPLETE="soundComplete",com.inq.events.Event.TAB_CHILDREN_CHANGE="tabChildrenChange",com.inq.events.Event.TAB_ENABLED_CHANGE="tabEnabledChange",com.inq.events.Event.TAB_INDEX_CHANGE="tabIndexChange",com.inq.events.Event.UNLOAD="unload",com.inq.events.Event.UNAUTHORIZED="unauthorized",com.inq.events.Event.BAD_GATEAWAY="badGateway",com.inq.events.Event.SERVICE_UNAVAILABLE="serviceUnavailable",com.inq.events.Event.NETWORK_ERROR="networkError",com.inq.events.Event.BAD_REQUEST="badRequest",function(){for(var e in com.inq.events.TextEvent=function(e,t,n,s){com.inq.events.Event.call(this,e)},$hxClasses["com.inq.events.TextEvent"]=com.inq.events.TextEvent,com.inq.events.TextEvent.__name__=["com","inq","events","TextEvent"],com.inq.events.TextEvent.__super__=com.inq.events.Event,com.inq.events.Event.prototype)com.inq.events.TextEvent.prototype[e]=com.inq.events.Event.prototype[e];com.inq.events.TextEvent.prototype.m_text=null,com.inq.events.TextEvent.prototype.text=null,com.inq.events.TextEvent.prototype.__class__=com.inq.events.TextEvent,com.inq.events.TextEvent.LINK="link",com.inq.events.TextEvent.TEXT_INPUT="textInput"}(),function(){for(var e in com.inq.events.ErrorEvent=function(e,t,n,s){com.inq.events.TextEvent.call(this,e)},$hxClasses["com.inq.events.ErrorEvent"]=com.inq.events.ErrorEvent,com.inq.events.ErrorEvent.__name__=["com","inq","events","ErrorEvent"],com.inq.events.ErrorEvent.__super__=com.inq.events.TextEvent,com.inq.events.TextEvent.prototype)com.inq.events.ErrorEvent.prototype[e]=com.inq.events.TextEvent.prototype[e];com.inq.events.ErrorEvent.prototype.__class__=com.inq.events.ErrorEvent,com.inq.events.ErrorEvent.ERROR="error"}(),function(){for(var e in com.inq.events.FocusEvent=function(e,t,n,s,i,a){com.inq.events.Event.call(this,e)},$hxClasses["com.inq.events.FocusEvent"]=com.inq.events.FocusEvent,com.inq.events.FocusEvent.__name__=["com","inq","events","FocusEvent"],com.inq.events.FocusEvent.__super__=com.inq.events.Event,com.inq.events.Event.prototype)com.inq.events.FocusEvent.prototype[e]=com.inq.events.Event.prototype[e];com.inq.events.FocusEvent.KEY_FOCUS_CHANGE=null,com.inq.events.FocusEvent.MOUSE_FOCUS_CHANGE=null,com.inq.events.FocusEvent.prototype.m_shiftKey=null,com.inq.events.FocusEvent.prototype.m_relatedObject=null,com.inq.events.FocusEvent.prototype.m_keyCode=null,com.inq.events.FocusEvent.prototype.shiftKey=null,com.inq.events.FocusEvent.prototype.relatedObject=null,com.inq.events.FocusEvent.prototype.keyCode=null,com.inq.events.FocusEvent.prototype.__class__=com.inq.events.FocusEvent,com.inq.events.FocusEvent.FOCUS_IN="FocusIn",com.inq.events.FocusEvent.FOCUS_OUT="FocusOut"}(),function(){for(var e in com.inq.events.HTTPStatusEvent=function(e,t,n,s){com.inq.events.Event.call(this,e)},$hxClasses["com.inq.events.HTTPStatusEvent"]=com.inq.events.HTTPStatusEvent,com.inq.events.HTTPStatusEvent.__name__=["com","inq","events","HTTPStatusEvent"],com.inq.events.HTTPStatusEvent.__super__=com.inq.events.Event,com.inq.events.Event.prototype)com.inq.events.HTTPStatusEvent.prototype[e]=com.inq.events.Event.prototype[e];com.inq.events.HTTPStatusEvent.prototype.m_status=null,com.inq.events.HTTPStatusEvent.prototype.status=null,com.inq.events.HTTPStatusEvent.prototype.__class__=com.inq.events.HTTPStatusEvent,com.inq.events.HTTPStatusEvent.HTTP_STATUS="http_status"}(),function(){for(var e in com.inq.events.KeyboardEvent=function(e,t,n,s,i,a,o,l,r){com.inq.events.Event.call(this,e)},$hxClasses["com.inq.events.KeyboardEvent"]=com.inq.events.KeyboardEvent,com.inq.events.KeyboardEvent.__name__=["com","inq","events","KeyboardEvent"],com.inq.events.KeyboardEvent.__super__=com.inq.events.Event,com.inq.events.Event.prototype)com.inq.events.KeyboardEvent.prototype[e]=com.inq.events.Event.prototype[e];com.inq.events.KeyboardEvent.prototype.m_shiftKey=null,com.inq.events.KeyboardEvent.prototype.m_keyLocation=null,com.inq.events.KeyboardEvent.prototype.m_keyCode=null,com.inq.events.KeyboardEvent.prototype.m_ctrlKey=null,com.inq.events.KeyboardEvent.prototype.m_charCode=null,com.inq.events.KeyboardEvent.prototype.m_altKey=null,com.inq.events.KeyboardEvent.prototype.updateAfterEvent=function(){},com.inq.events.KeyboardEvent.prototype.shiftKey=null,com.inq.events.KeyboardEvent.prototype.keyLocation=null,com.inq.events.KeyboardEvent.prototype.keyCode=null,com.inq.events.KeyboardEvent.prototype.ctrlKey=null,com.inq.events.KeyboardEvent.prototype.charCode=null,com.inq.events.KeyboardEvent.prototype.altKey=null,com.inq.events.KeyboardEvent.prototype.__class__=com.inq.events.KeyboardEvent,com.inq.events.KeyboardEvent.KEY_DOWN="KeyDown",com.inq.events.KeyboardEvent.KEY_UP="KeyUp",com.inq.events.KeyboardEvent.KEY_PRESS="KeyPress"}(),function(){for(var e in com.inq.events.MouseEvent=function(e,t){com.inq.events.Event.call(this,e,t)},$hxClasses["com.inq.events.MouseEvent"]=com.inq.events.MouseEvent,com.inq.events.MouseEvent.__name__=["com","inq","events","MouseEvent"],com.inq.events.MouseEvent.__super__=com.inq.events.Event,com.inq.events.Event.prototype)com.inq.events.MouseEvent.prototype[e]=com.inq.events.Event.prototype[e];com.inq.events.MouseEvent.DOUBLE_CLICK=null,com.inq.events.MouseEvent.MOUSE_DOWN=null,com.inq.events.MouseEvent.MOUSE_MOVE=null,com.inq.events.MouseEvent.MOUSE_OUT=null,com.inq.events.MouseEvent.MOUSE_OVER=null,com.inq.events.MouseEvent.MOUSE_UP=null,com.inq.events.MouseEvent.MOUSE_WHEEL=null,com.inq.events.MouseEvent.ROLL_OUT=null,com.inq.events.MouseEvent.ROLL_OVER=null,com.inq.events.MouseEvent.prototype.m_shiftKey=null,com.inq.events.MouseEvent.prototype.m_relatedObject=null,com.inq.events.MouseEvent.prototype.m_localY=null,com.inq.events.MouseEvent.prototype.m_localX=null,com.inq.events.MouseEvent.prototype.m_delta=null,com.inq.events.MouseEvent.prototype.m_ctrlKey=null,com.inq.events.MouseEvent.prototype.m_buttonDown=null,com.inq.events.MouseEvent.prototype.m_altKey=null,com.inq.events.MouseEvent.prototype.stageY=null,com.inq.events.MouseEvent.prototype.stageX=null,com.inq.events.MouseEvent.prototype.shiftKey=null,com.inq.events.MouseEvent.prototype.relatedObject=null,com.inq.events.MouseEvent.prototype.localY=null,com.inq.events.MouseEvent.prototype.localX=null,com.inq.events.MouseEvent.prototype.delta=null,com.inq.events.MouseEvent.prototype.ctrlKey=null,com.inq.events.MouseEvent.prototype.buttonDown=null,com.inq.events.MouseEvent.prototype.altKey=null,com.inq.events.MouseEvent.prototype.__class__=com.inq.events.MouseEvent,com.inq.events.MouseEvent.CLICK="click"}(),function(){for(var e in com.inq.events.ProgressEvent=function(e,t,n,s,i){com.inq.events.Event.call(this,e)},$hxClasses["com.inq.events.ProgressEvent"]=com.inq.events.ProgressEvent,com.inq.events.ProgressEvent.__name__=["com","inq","events","ProgressEvent"],com.inq.events.ProgressEvent.__super__=com.inq.events.Event,com.inq.events.Event.prototype)com.inq.events.ProgressEvent.prototype[e]=com.inq.events.Event.prototype[e];com.inq.events.ProgressEvent.prototype.m_bytesTotal=null,com.inq.events.ProgressEvent.prototype.m_bytesLoaded=null,com.inq.events.ProgressEvent.prototype.bytesTotal=null,com.inq.events.ProgressEvent.prototype.bytesLoaded=null,com.inq.events.ProgressEvent.prototype.__class__=com.inq.events.ProgressEvent,com.inq.events.ProgressEvent.PROGRESS="progress",com.inq.events.ProgressEvent.SOCKET_DATA="socketData"}(),function(){for(var e in com.inq.events.SecurityErrorEvent=function(e,t,n,s){com.inq.events.ErrorEvent.call(this,e)},$hxClasses["com.inq.events.SecurityErrorEvent"]=com.inq.events.SecurityErrorEvent,com.inq.events.SecurityErrorEvent.__name__=["com","inq","events","SecurityErrorEvent"],com.inq.events.SecurityErrorEvent.__super__=com.inq.events.ErrorEvent,com.inq.events.ErrorEvent.prototype)com.inq.events.SecurityErrorEvent.prototype[e]=com.inq.events.ErrorEvent.prototype[e];com.inq.events.SecurityErrorEvent.prototype.__class__=com.inq.events.SecurityErrorEvent,com.inq.events.SecurityErrorEvent.SECURITY_ERROR="securityError"}(),com.inq.flash.client.control.PersistenceManager=function(){this.getCookieInfo()},$hxClasses["com.inq.flash.client.control.PersistenceManager"]=com.inq.flash.client.control.PersistenceManager,com.inq.flash.client.control.PersistenceManager.__name__=["com","inq","flash","client","control","PersistenceManager"],com.inq.flash.client.control.PersistenceManager.Close=function(){com.inq.flash.client.control.PersistenceManager.__inst=null},com.inq.flash.client.control.PersistenceManager.reopen=function(){com.inq.flash.client.control.PersistenceManager.__inst=new com.inq.flash.client.control.PersistenceManager},com.inq.flash.client.control.PersistenceManager.ClearValues=function(){null!=com.inq.flash.client.control.PersistenceManager.__inst&&com.inq.flash.client.control.PersistenceManager.__inst.clearValues()},com.inq.flash.client.control.PersistenceManager.GetValue=function(e,t){return null!=com.inq.flash.client.control.PersistenceManager.__inst?com.inq.flash.client.control.PersistenceManager.__inst.getValue(e,t):t},com.inq.flash.client.control.PersistenceManager.SetValue=function(e,t,n,s){null==s&&(s=!0),null==n&&(n=!1),null!=com.inq.flash.client.control.PersistenceManager.__inst&&com.inq.flash.client.control.PersistenceManager.__inst.setValue(e,t,n,s)},com.inq.flash.client.control.PersistenceManager.DeleteValue=function(e,t){null==t&&(t=!0),null!=com.inq.flash.client.control.PersistenceManager.__inst&&com.inq.flash.client.control.PersistenceManager.__inst.deleteValue(e,t)},com.inq.flash.client.control.PersistenceManager.SetValues=function(e){null!=com.inq.flash.client.control.PersistenceManager.__inst&&com.inq.flash.client.control.PersistenceManager.__inst.setValues(e)},com.inq.flash.client.control.PersistenceManager.createInstance=function(){return new com.inq.flash.client.control.PersistenceManager},com.inq.flash.client.control.PersistenceManager.prototype.setCookieInfo=function(){com.inq.flash.client.control.FlashPeer.setV3Data(this.dict)},com.inq.flash.client.control.PersistenceManager.prototype.getCookieInfo=function(){this.dict=com.inq.flash.client.control.FlashPeer.getV3Data()},com.inq.flash.client.control.PersistenceManager.prototype.setValue=function(e,t,n,s){null==s&&(s=!0),null==n&&(n=!1),(n||this.dict[e]!=t)&&(this.dict[e]=t,s&&this.setCookieInfo())},com.inq.flash.client.control.PersistenceManager.prototype.deleteValue=function(e,t){null==t&&(t=!0),this.dict[e]&&(delete this.dict[e],t&&this.setCookieInfo())},com.inq.flash.client.control.PersistenceManager.prototype.setValues=function(e){for(var t=com.inq.utils.Util.fields(e),n=0;n<t.length;n++){var s=""+t[n];this.dict[s]=e[s]}com.inq.flash.client.control.FlashPeer.setV3Data(this.dict)},com.inq.flash.client.control.PersistenceManager.prototype.getValue=function(e,t){var n=this.dict[e];return null==n&&(n=t),haxe.Log.trace("value ["+e+"]:"+Std.string(n),{fileName:"PersistenceManager.hx",lineNumber:56,className:"com.inq.flash.client.control.PersistenceManager",methodName:"getValue"}),n},com.inq.flash.client.control.PersistenceManager.prototype.clearValues=function(){this.dict={},this.setCookieInfo()},com.inq.flash.client.control.PersistenceManager.prototype.dict=null,com.inq.flash.client.control.PersistenceManager.prototype.__class__=com.inq.flash.client.control.PersistenceManager,com.inq.flash.client.control.PersistenceManager.__inst=com.inq.flash.client.control.PersistenceManager.createInstance(),com.inq.flash.client.control.ApplicationController=function(){null==com.inq.flash.client.control.ApplicationController.applicationController&&(com.inq.flash.client.control.ApplicationController.applicationController=this),this.chatRouterListen=!1,this.firstMessageSent=this.persistentReconnect=!1,this.openerMessageQueue=new Array,this.authorizedOnce=!1,this.chatAccepted=!1,this.bSendClickStreamData=!1,this.messageQueue=new Array,this.flagChatInQueue=!1,this._updateUsername=!1,haxe.Log.trace("create FlashMessagingFramework",{fileName:"ApplicationController.hx",lineNumber:107,className:"com.inq.flash.client.control.ApplicationController",methodName:"new"}),this.framework=new com.inq.flash.messagingframework.FlashMessagingFramework(this),haxe.Log.trace("created FlashMessagingFramework",{fileName:"ApplicationController.hx",lineNumber:109,className:"com.inq.flash.client.control.ApplicationController",methodName:"new"}),window.com=com,window.com.inq=com.inq,window.com.inq.getOpenerMessageQueue=$bind(this,this.getOpenerMessageQueue),window.com.inq.getMessageQueue=$bind(this,this.getMessageQueue),this.msgcntAtEntry=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0),null==this.chat&&(this.chat=new com.inq.flash.client.data.Chat)},$hxClasses.registerClass(com.inq.flash.client.control.ApplicationController,"com.inq.flash.client.control.ApplicationController"),com.inq.flash.client.control.ApplicationController.isSkipRestoreMsgOnce=!1,com.inq.flash.client.control.ApplicationController.prototype.registerMessageHandlers=function(){this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatAutomatonDataMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatCommunicationSurveyMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatDeniedReconnectMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatAutomatonRequestMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ErrorHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatSystemMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.NinaCoachChatTakeOverMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.NeedWaitHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.TypingActivityHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CommandMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.PersistentActiveHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatAutomatonRequestElementSettingHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatWebCallMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatVideoPlayerStatusMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.AuthenticatedUserResponseMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler),this.skinControl=com.inq.flash.client.chatskins.SkinControl},com.inq.flash.client.control.ApplicationController.prototype.getChat=function(){return this.chat},com.inq.flash.client.control.ApplicationController.prototype.sendDTEvent=function(e,t){var n=new com.inq.flash.client.data.ChatAutomatonResponseMessage(this.chat,e,t),s=null;t.selectedLinkName&&(s=t.selectedLinkName),this.skinControl.modifyDTFields(t.divId,s),this.sendMessageOrQueue(n),this.skinControl.stopOpenerScript(),com.inq.flash.client.control.Incrementality.onInteracted(),com.inq.flash.client.control.Incrementality.onCustomerMsg()},com.inq.flash.client.control.ApplicationController.prototype.sendInputState=function(e,t,n,s){s&&com.inq.flash.client.control.messagehandlers.ChatAutomatonRequestElementSettingHandler.setAttribute(e,t,n);var i=new com.inq.flash.client.data.ChatAutomatonElementSetMessage(this.chat,e,t,n);this.sendMessageOrQueue(i),com.inq.flash.client.control.messagehandlers.ChatAutomatonRequestElementSettingHandler.incrementOutstandingCount()},com.inq.flash.client.control.ApplicationController.prototype.sendCoBrowseMessage=function(e,t,n,s){var i=new com.inq.flash.client.data.ChatCommunicationCobrowseMessage(this.chat,e);i.addProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT,t),i.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),n&&t==com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT&&i.addProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_HIGHLIGHT_ENABLED,"1"),!s||t!=com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT&&t!=com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT_SHARE||i.addProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_MINIMIZE_RESTORE_ENABLED,"1"),this.sendText(i)},com.inq.flash.client.control.ApplicationController.prototype.sendVideoMessage=function(e,t){var n=new com.inq.flash.client.data.ChatActivityMessage(this.chat,t);n.addProperty(com.inq.flash.client.data.MessageFields.KEY_DISPLAY_TEXT,e),n.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),this.sendText(n)},com.inq.flash.client.control.ApplicationController.prototype.sendFileUploadMessage=function(e,t){var n=new com.inq.flash.client.data.ChatCommunicationFileUploadMessage(this.chat,e);n.addProperty(com.inq.flash.client.data.MessageFields.KEY_FILE_DELETE_SETTING,t),n.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),this.sendMessageOrQueue(n)},com.inq.flash.client.control.ApplicationController.prototype.sendVideoStatusMessage=function(e,t,n){var s=new com.inq.flash.client.data.ChatVideoPlayerStatusMessage(this.chat,e);s.addProperty(com.inq.flash.client.data.MessageFields.KEY_VIDEO_URL,t),s.addProperty(com.inq.flash.client.data.MessageFields.KEY_VIDEO_ACTION,n),s.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),this.sendMessageOrQueue(s)},com.inq.flash.client.control.ApplicationController.prototype.sendWebCallMessage=function(e,t){var n=new com.inq.flash.client.data.ChatCommunicationWebCallMessage(this.chat,e);n.addProperty(com.inq.flash.client.data.MessageFields.KEY_WEBCALL_ACTION,t),n.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),this.sendMessageOrQueue(n)},com.inq.flash.client.control.ApplicationController.prototype.sendWebCallEndMessage=function(e,t,n){var s=com.inq.flash.client.control.WebRTCMgr,i=com.inq.flash.client.data.MessageFields,a=new com.inq.flash.client.data.ChatCommunicationWebCallMessage(this.chat,e);a.addProperty(i.KEY_WEBCALL_ACTION,n?s.WEBCALL_LEFT:s.WEBCALL_ENDED),a.addProperty(i.KEY_CALL_TERMINATED,t?"1":"0"),a.addProperty(i.KEY_LINE_NR,"-1"),this.sendMessageOrQueue(a)},com.inq.flash.client.control.ApplicationController.prototype.sendCoBrowseMessageQuietly=function(e,t,n,s,i){var a=new com.inq.flash.client.data.ChatCommunicationCobrowseMessage(this.chat,e);a.addProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT,t),a.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),n!==com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT_SUCCESS&&n!==com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT_FAILURE||a.addProperty(com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT,n),a.addProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_CUSTOMER_QUIET,"true"),a.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_ADVANCED_AGENT_ID,i),s&&t==com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT&&a.addProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_HIGHLIGHT_ENABLED,"1"),this.sendText(a)},com.inq.flash.client.control.ApplicationController.prototype.updateFormFields=function(e,t,n){this.skinControl.updateFormFields(e,t,n)},com.inq.flash.client.control.ApplicationController.prototype.submitForm=function(e,t,n,s){var i=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,s);i.addProperty(com.inq.flash.client.data.MessageFields.FORM_DATA,n),i.addProperty(com.inq.flash.client.data.MessageFields.FORM_NAME,e),i.addProperty(com.inq.flash.client.data.MessageFields.FORM_ID,t),this.sendText(i)},com.inq.flash.client.control.ApplicationController.prototype.isFirstMessageSent=function(){return this.firstMessageSent},com.inq.flash.client.control.ApplicationController.prototype.customerClosesPopup=function(){this.waitingToExitChat=!0;try{var e=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);if(this.framework.isConnected()||this.wasConnected||0!=e)return!(!this.authorizedOnce&&0==this.msgcntAtEntry&&(this.shutdownQuietly(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_CUSTOMER_CLOSED),1))}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("customerClosesPopup: Warning:"+Std.string(e),{fileName:"ApplicationController.hx",lineNumber:910,className:"com.inq.flash.client.control.ApplicationController",methodName:"customerClosesPopup"})}return!1},com.inq.flash.client.control.ApplicationController.prototype.sendChatExitMsg=function(e,t){try{if(null!=this.chat&&this.framework.isConnected()){var n=this.chat.getChatID(),s=new com.inq.flash.client.data.ChatExitMessage(n,t);this.sendMessage(s,(function(){com.inq.flash.client.control.FlashPeer.fireNativeSurveyLaunchEvent(),"function"==typeof e&&e()}),(function(){com.inq.flash.client.control.FlashPeer.logError("Message CHAT.EXIT was not sent: Request failed.",null,n),"function"==typeof e&&e()}))}else{var i=[];null===this.chat&&i.push("ApplicationController.chat is null"),this.framework.isConnected()||i.push("ApplicationController.framework.isConnected() === false"),com.inq.flash.client.control.FlashPeer.logError("Message CHAT.EXIT was not sent: "+i.join(", ")),"function"==typeof e&&e()}}catch(e){var a="Message CHAT.EXIT was not sent"+(e?": "+e.message:""),o=e||null;com.inq.flash.client.control.FlashPeer.logError(a,o)}},com.inq.flash.client.control.ApplicationController.prototype.checkForChatExit=function(){this.waitingToExitChat&&this.skinControl.sendExitMsg(null,"checkForChatExit")},com.inq.flash.client.control.ApplicationController.prototype.setSocketIP=function(e){haxe.Log.trace("setSocketIP:207 crAddress="+e,{fileName:"ApplicationController.hx",lineNumber:838,className:"com.inq.flash.client.control.ApplicationController",methodName:"setSocketIP"}),haxe.Log.trace("setSocketIP:213 crAddress="+e,{fileName:"ApplicationController.hx",lineNumber:844,className:"com.inq.flash.client.control.ApplicationController",methodName:"setSocketIP"}),this.persistentFrameReconnect(),haxe.Log.trace("setSocketIP:215 crAddress="+e,{fileName:"ApplicationController.hx",lineNumber:846,className:"com.inq.flash.client.control.ApplicationController",methodName:"setSocketIP"})},com.inq.flash.client.control.ApplicationController.prototype.setQueueMessages=function(){this.authorizedOnce=!0,this.attemptingConnection=!1,this.queueMessages&&(this.queueMessages=!1,this.sendQueuedMessages())},com.inq.flash.client.control.ApplicationController.prototype.sendQueuedMessages=function(){for(var e,t=0;t<this.messageQueue.length;t++)e=this.addTimeDeltaToMessage(this.messageQueue[t]),this.isChatContinued()&&e.getMessageType()===com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER||this.sendMessage(e);this.messageQueue.length=0},com.inq.flash.client.control.ApplicationController.prototype.sendFirstQueuedMessage=function(e){if(this.queueMessages&&!(this.messageQueue.length<1))for(var t=0;t<this.messageQueue.length;t++){var n=this.messageQueue[t].msg;e&&n.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION&&(n.addProperty(com.inq.flash.client.data.MessageFields.KEY_TIME_LOG,e),Application.application.isVirtualAgent()&&this.addPageDataToMessage(n))}},com.inq.flash.client.control.ApplicationController.prototype.playQueueMessages=function(){for(var e=0;e<this.messageQueue.length;e++){var t=this.addTimeDeltaToMessage(this.messageQueue[e]);this.framework.sendMessage(t)}},com.inq.flash.client.control.ApplicationController.prototype.shouldBeDisconnected=function(){return this.intentionalDisconnect},com.inq.flash.client.control.ApplicationController.prototype.shutdownQuietly=function(e){this.intentionalDisconnect=!0,this.framework.disconnect(e)},com.inq.flash.client.control.ApplicationController.prototype.shutdown=function(e){this.shutdownQuietly(e),1!=this.waitingToExitChat&&this.skinControl.agentClosesChat()},com.inq.flash.client.control.ApplicationController.prototype.sendAutomatonDataMessage=function(e){var t=new Date,n=com.inq.flash.client.chatskins.SkinControl.addAutomatonDataToChatWindow(e,-1,null,"",t),s=new com.inq.flash.client.data.ChatAutomatonDataMessage(this.chat,e);s.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,""+n);var i=Date.now();s.addProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TIMESTAMP,i),this.sendMessageOrQueue(s)},com.inq.flash.client.control.ApplicationController.prototype.sendChatCommunicationMessage=function(e,t){e.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,""+t);var n=Date.now();if(e.addProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TIMESTAMP,n),this.attemptingConnection||this.intentionalDisconnect||this.framework.isConnected()||this.wasConnected)this.sendText(e);else{this.sendButtonClickedTime=Math.round((new Date).getTime());try{haxe.Log.trace("attemptingConnection",{fileName:"ApplicationController.hx",lineNumber:734,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatCommunicationMessage"}),this.attemptingConnection=!0,haxe.Log.trace("queueMessages",{fileName:"ApplicationController.hx",lineNumber:736,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatCommunicationMessage"}),this.queueMessages=!0,haxe.Log.trace("do a send text",{fileName:"ApplicationController.hx",lineNumber:738,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatCommunicationMessage"}),this.sendText(e),haxe.Log.trace("framework.connect()",{fileName:"ApplicationController.hx",lineNumber:740,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatCommunicationMessage"}),this.framework.connect()}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("ERROR: "+Std.string(e),{fileName:"ApplicationController.hx",lineNumber:743,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatCommunicationMessage"})}}},com.inq.flash.client.control.ApplicationController.prototype.prepareEngageChat=function(e){if(!this.attemptingConnection&&!this.intentionalDisconnect&&(this.chatRouterListen||!this.framework.isConnected()&&!this.wasConnected)){this.setEngageParameters(e);var t=new com.inq.flash.client.data.ChatEngageMessage(this.chat,e.agentOutcome,e.clientOutcome,this.getAgentAlias());e.phone&&this.addInitialData(t,"CallerPhone",e.phone,"CallerPhone");var n=-1;return e.clientOutcome&&(n=this.addClientOutcomeToChatWindow(e.clientOutcome)),t.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,n),this.queueMessages=!0,this.sendText(t),!0}return!1},com.inq.flash.client.control.ApplicationController.prototype.engageChat=function(e){if(!this.attemptingConnection&&!this.intentionalDisconnect&&(this.chatRouterListen||!this.framework.isConnected()&&!this.wasConnected)){this.sendButtonClickedTime=Math.round((new Date).getTime()),this.setEngageParameters(e);var t=new com.inq.flash.client.data.ChatEngageMessage(this.chat,e.agentOutcome,e.clientOutcome,this.getAgentAlias());e.phone&&this.addInitialData(t,"CallerPhone",e.phone,"CallerPhone");var n=-1;return e.clientOutcome&&(n=this.addClientOutcomeToChatWindow(e.clientOutcome)),this.sendChatCommunicationMessage(t,n),!0}return!1},com.inq.flash.client.control.ApplicationController.prototype.setEngageParameters=function(e){e.agentAttrs&&this.chat.setAgentAttributes(e.agentAttrs),e.businessUnitID&&this.chat.setBusinessUnitID(e.businessUnitID),e.agentGroupId&&this.chat.setAgentGroupID(e.agentGroupId),e.publicUserId&&this.chat.setPublicUserId(e.publicUserId),e.scriptTreeId&&this.chat.setScriptID(e.scriptTreeId),e.automatonId&&(this.chat.setAutomatonId(e.automatonId),e.automatonFields&&this.chat.setAutomatonFields(e.automatonFields)),e.agentName||!0!==e.overrideAgentAlias?"boolean"==typeof e.overrideAgentAlias&&com.inq.flash.client.control.FlashVars.setValue("overrideAgentAlias",""+e.overrideAgentAlias):haxe.Log.trace("ERROR: setEngageParameters: agentName is empty. Cannot override agent alias"),e.agentName&&(com.inq.flash.client.control.FlashVars.setAgentName(e.agentName),this.chat.setAgentName(e.agentName)),e.queueThreshold&&this.chat.setQueueThreshold(e.queueThreshold),this.chat.setRoutingAllocSpecs(e.routingAllocSpecs),this.persistEngageChatParameters(e,["businessUnitID","agentGroupId"])},com.inq.flash.client.control.ApplicationController.prototype.persistEngageChatParameters=function(e,t){var n={},s={businessUnitID:BUSINESS_UNIT_ID,agentGroupId:AGENT_GROUP_ID},i=!1;t.forEach((function(t){e[t]&&(n[s[t]||t]=e[t],i=!0)})),i&&com.inq.flash.client.control.PersistenceManager.SetValue(ENGAGE_CHAT_PARAMS,n)},com.inq.flash.client.control.ApplicationController.prototype.addClientOutcomeToChatWindow=function(e){var t=this.skinControl.checkForSpecialExpression(e);return this.skinControl.AddOpenerToChatWindow(StringTools.htmlUnescape(this.getAgentAlias()),t.text,com.inq.flash.client.chatskins.ChatTextArea.AGENT,-1,t.expressionList)},com.inq.flash.client.control.ApplicationController.prototype.getAgentAlias=function(){var e=com.inq.flash.client.control.FlashVars.getFlashVars().agentName;return com.inq.utils.Util.isDefaultAgentAlias()&&(e=com.inq.utils.Util.getConfig("defaultAgentAlias","&nbsp;")),e},com.inq.flash.client.control.ApplicationController.prototype.sendButtonClicked=function(e){if(com.inq.utils.StringUtil.isEmptyString(e))haxe.Log.trace("sendButtonClicked: no text",{fileName:"ApplicationController.js",className:"com.inq.flash.client.control.ApplicationController",methodName:"sendButtonClicked"});else{haxe.Log.trace("sendButtonClicked enter\nCheck connections: \n\tattemptingConnection="+Std.string(this.attemptingConnection)+"\n\tintentionalDisconnect="+Std.string(this.intentionalDisconnect)+"\n",{fileName:"ApplicationController.js",className:"com.inq.flash.client.control.ApplicationController",methodName:"sendButtonClicked"}),com.inq.flash.client.chatskins.SkinControl.customerTypedText="";var t=new Date,n=this.appendSentText(e,-1,t),s=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,e,this.isUpdateUsername()),i="";e.toLowerCase()===com.inq.flash.client.data.MessageFields.KEY_CHAT_INFO?i="Customer requested Chat Info":e.toLowerCase().startsWith(com.inq.flash.client.data.MessageFields.KEY_SWITCH_DEBUG)&&(i="Customer enabled debug mode"),i&&s.addProperty(com.inq.flash.client.data.MessageFields.KEY_DISPLAY_TEXT,i),Application.application.isVirtualAgent()&&this.addPageDataToMessage(s),this.sendChatCommunicationMessage(s,n),this.isUpdateUsername()&&this.cancelUpdateUsername()}},com.inq.flash.client.control.ApplicationController.prototype.sendVALinkClicked=function(e){var t,n=e.target||e.srcElement;if(t="A"==n.tagName?n:function(e,t){for(;e.parentNode&&e!=t;)if("A"===(e=e.parentNode).tagName)return e;return null}(n,e.currentTarget)){t.getAttribute("data-vtz-jump");var s,i=t.getAttribute("data-vtz-link-type"),a=t.getAttribute("data-vtz-browse"),o=!1,l=!0,r=e.target.href;if("Web"==i&&a)this.openerMessageQueue.length>0&&0===r.indexOf("http")&&(e.preventDefault(),this.webOpenerLinkHref=r),o=!0,s=(s="##Url#"+a).substring(0,100);else if("Dialog"==i){s=t.text;var c=this.appendSentText(s,-1);e.preventDefault?e.preventDefault():e.returnValue=!1}else{if("touchend"!=e.type||!r)return;e.preventDefault(),window.setTimeout((function(){window.parent.location.href=r}),1e3),l=!1}for(var h=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,s),m=t.attributes,d=0;d<m.length;d++){var g=m[d].name;g.startsWith("data-vtz")&&h.addPropertyIfNotNull(g.replace("data-",""),m[d].value)}o&&(h.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"0"),h.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA_HIDDEN_FOR_CUSTOMER,"true")),this.addPageDataToMessage(h),this.sendChatCommunicationMessage(h,c),!com.inq.flash.client.chatskins.SkinControl.isTxtInputAutofocusBlocked()&&l&&Application.application.setTextFieldfocus()}},com.inq.flash.client.control.ApplicationController.prototype.launchPostChatSurvey=function(e){var t=e.target;t&&com.inq.flash.client.control.FlashPeer.launchNativePostChatSurvey(t.getAttribute(com.inq.flash.client.chatskins.SkinControl.DATA_SURVEY_URL)),e.preventDefault()},com.inq.flash.client.control.ApplicationController.prototype.addPageDataToMessage=function(e){e.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CLIENT_PAGE_LOCATION,com.inq.utils.Util.getTopWindowURL()),e.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_PAGE_MARKER_ID,com.inq.flash.client.control.FlashPeer.getPageMarker())},com.inq.flash.client.control.ApplicationController.prototype.agentQuickResponse=function(e){var t=e.target,n=t.getAttribute("data-nuance-quick-answer"),s="_blank"==t.getAttribute("target"),i=t.href;s||e.preventDefault(),n||i&&i.length&&(n="##URL#"+i);var a=this.appendSentText(n,-1),o=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,n);this.sendChatCommunicationMessage(o,a)},com.inq.flash.client.control.ApplicationController.prototype.callButtonClicked=function(e,t,n){this.callStreamData=t;var s=new com.inq.flash.client.data.CallCommunicationMessage(this.chat,e);s.addProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME,n),s.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,"-1"),s.addProperty("fromV3",n),com.inq.flash.client.control.PersistenceManager.SetValue(CLIENT_NAME_PERSIST,n),this.queueMessages=!0,this.sendMessageOrQueue(s),this.chatRouterListen=!1},com.inq.flash.client.control.ApplicationController.prototype.isConnected=function(){return null!=this.framework&&this.framework.isConnected()},com.inq.flash.client.control.ApplicationController.prototype.isSendMessageFail=function(){return!!this.framework&&this.framework.isSendMessageFail()},com.inq.flash.client.control.ApplicationController.prototype.getResponseTimestamp=function(){return this.framework?this.framework._getResponseTimestamp():0},com.inq.flash.client.control.ApplicationController.prototype.localChatRouterListen=function(){try{if(this.framework.isConnected())return;this.attemptingConnection=!0,this.queueMessages=!0;var e=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);this.framework.setParam("count",e),this.framework.connect(),this.chatRouterListen=!0}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("Error: "+Std.string(e),{fileName:"ApplicationController.hx",lineNumber:635,className:"com.inq.flash.client.control.ApplicationController",methodName:"localChatRouterListen",customParams:["error"]})}},com.inq.flash.client.control.ApplicationController.prototype.persistentFrameReconnect=function(){try{if(!this.attemptingConnection){this.attemptingConnection=!0,this.queueMessages=!0;var e=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);this.framework.setParam("count",e),this.persistentReconnect=!0,this.chatRouterListen=!1,this.framework.connect()}}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("Error: "+Std.string(e),{fileName:"ApplicationController.hx",lineNumber:614,className:"com.inq.flash.client.control.ApplicationController",methodName:"persistentFrameReconnect"})}},com.inq.flash.client.control.ApplicationController.prototype.connectionLost=function(){haxe.Log.trace("connectionLost();",{fileName:"ApplicationController.hx",lineNumber:591,className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionLost"}),this.queueMessages=!0},com.inq.flash.client.control.ApplicationController.prototype.setAgentConfig=function(e,t,n,s,i){null==n&&(n=!1),haxe.Log.trace("ApplicationController.setAgentConfig('"+e+"')",{fileName:"ApplicationController.hx",lineNumber:585,className:"com.inq.flash.client.control.ApplicationController",methodName:"setAgentConfig"}),this.agentID=e,this.setFlagChatInQueue(!1),this.skinControl.setTypingActivity(!1),this.skinControl.setAgentConfig(e,t,n,s,i)},com.inq.flash.client.control.ApplicationController.prototype.urlStringToObject=function(e){for(var t=new com.inq.utils.Dictionary,n=StringTools.urlDecode(e).split("&"),s=0;s<n.length;s++){var i=n[s].split("=");if(2==i.length){var a=i[0],o=i[1];t[a]=o}}return t},com.inq.flash.client.control.ApplicationController.prototype.sendMessage=function(e,t,n){this.addClickStreamData(e),this.framework.sendMessage(e,t,n),com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION==e.getMessageType()&&Application.application.notificationController&&Application.application.notificationController.hideNotification()},com.inq.flash.client.control.ApplicationController.prototype.initializeAutomatonMode=function(){return!(!this.isAutomatonMode()||this.framework.isConnected()||this.skinControl.isContinued()||(haxe.Log.trace("initializing Inline DT automaton",{fileName:"ApplicationController.hx",lineNumber:553,className:"com.inq.flash.client.control.ApplicationController",methodName:"initializeAutomatonMode"}),this.sendButtonClickedTime=Math.round((new Date).getTime()),this.queueMessages=!0,this.framework.connect(),this.skinControl.StopTimer(),0))},com.inq.flash.client.control.ApplicationController.prototype.isAutomatonMode=function(){return null!=this.chat.getAutomatonId()&&!this.chat.isSendChatRequestOnDemand()&&!com.inq.flash.client.control.FlashPeer.getVAList().includes(this.chat.getAutomatonId())},com.inq.flash.client.control.ApplicationController.prototype.addInitialData=function(e,t,n,s){var i=com.inq.flash.client.data.MessageFields.KEY_INITIAL_CLICKSTREAM_PREFIX+e.nextInitialDataIndex();e.addProperty(i+".id",t),e.addProperty(i+".data",n),null!=s&&""!=s&&"undefined"!=s&&e.addProperty(i+".label",s)},com.inq.flash.client.control.ApplicationController.prototype.addClickStreamData=function(e){if(0==com.inq.flash.client.control.PersistenceManager.GetValue(CLICK_STREAM_DATA_SENT_KEY,0)&&(this.bSendClickStreamData=!0),this.bSendClickStreamData&&(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION==e.getMessageType()||com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER==e.getMessageType()||com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_QUEUE==e.getMessageType()||com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_RESPONSE==e.getMessageType()||com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME==e.getMessageType())){var t=com.inq.flash.client.control.FlashPeer.isPersistentWindow(),n=this.skinControl.getInitialClickstreamData();if(t||this.skinControl.isClick2WebCall()||com.inq.flash.client.control.WebRTCMgr.isEngaged)try{n+=this.skinControl.getOpener().Application.application.applicationController.callStreamData}catch(e){haxe.Log.trace("ApplicationController.addClickstreamData Error"+Std.string(e),{fileName:"ApplicationController.js",className:"com.inq.flash.client.control.ApplicationController",methodName:"addClickStreamData"})}haxe.Log.trace("ApplicationController.addClickstreamData: clickStreamData = "+n,{fileName:"ApplicationController.js",className:"com.inq.flash.client.control.ApplicationController",methodName:"addClickStreamData"}),this.bSendClickStreamData=!1;var s=new com.inq.utils.Dictionary;if(null!=n){for(var i=n.split("^^"),a=0;a<i.length;a++){var o=i[a];if(""!==o){var l=o.split("="),r=l.shift(),c=l.join("=");s[r]=c}}for(var h=0;h<i.length;h++){var m=i[h];if(""!=m){haxe.Log.trace("field is "+m,{fileName:"ApplicationController.hx",lineNumber:511,className:"com.inq.flash.client.control.ApplicationController",methodName:"addClickStreamData"});var d=m.split("=").shift();if(null!=d&&"_"!=d.charAt(0)){var g=s[d],p=s["_"+d];this.addInitialData(e,d,g,p)}}}com.inq.flash.client.control.PersistenceManager.SetValue(CLICK_STREAM_DATA_SENT_KEY,1)}}},com.inq.flash.client.control.ApplicationController.prototype.connectionEstablished=function(){try{com.inq.flash.client.control.FlashPeer.setCABeacon(this.chat.BEACON_ACTIVATE);var e=this.framework.getConnectionType();com.inq.flash.client.chatskins.SkinControl.connectionType=e,Application.application.getTextInput("txtInput").setEnabled(!0),this.wasConnected=!0,com.inq.flash.client.chatskins.SkinControl.isContinued()&&0!=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)?this.isAgentAssigned()&&this.setConnectionAccepted(!0):(haxe.Log.trace("ApplicationController.connectionEstablished, sending a chat request message",{fileName:"ApplicationController.hx",lineNumber:407,className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionEstablished"}),this.sendChatRequestMessage(this.chat.isAsyncReconnect())),Application.application.setActiveWindowId(),haxe.Log.trace("framework.sendMessage(chat.request) sent",{fileName:"ApplicationController.hx",lineNumber:432,className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionEstablished"}),this.persistentReconnect&&(this.playQueueMessages(),this.queueMessages=!1)}catch(e){haxe.Log.trace("Exception: "+Std.string(e),{fileName:"ApplicationController.hx",lineNumber:438,className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionEstablished"})}haxe.Log.trace("exit connectionEstablished",{fileName:"ApplicationController.hx",lineNumber:440,className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionEstablished"})},com.inq.flash.client.control.ApplicationController.prototype.sendChatRequestMessage=function(e){var t=com.inq.flash.client.chatskins.SkinControl.getIsPersistentChat();t&&(this.notifiedAsPersistent?t=!1:this.notifiedAsPersistent=!0);var n=null;try{haxe.Log.trace("ApplicationController: creating msg. chat="+this.chat.toString(),{fileName:"ApplicationController.hx",lineNumber:410,className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionEstablished"}),haxe.Log.trace("ApplicationController: creating msg. isPersistent="+Std.string(t)+", agentID="+this.agentID,{fileName:"ApplicationController.hx",className:"com.inq.flash.client.control.ApplicationController",methodName:"connectionEstablished"});var s=null!=this.sendButtonClickedTime?Math.round((new Date).getTime())-this.sendButtonClickedTime:0;n=new com.inq.flash.client.data.ChatRequestMessage(this.chat,t,this.agentID,s,this,e),com.inq.flash.client.control.PersistenceManager.SetValue(CHAT_ENGAGED,!0,!1,!0),com.inq.flash.client.chatskins.SkinControl.isClick2call()&&(n.addProperty(com.inq.flash.client.data.MessageFields.KEY_CALL_ENABLED,"true"),n.addProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME,com.inq.flash.client.control.PersistenceManager.GetValue(CLIENT_NAME_PERSIST,com.inq.flash.client.chatskins.SkinControl.getCallerNameString()))),haxe.Log.trace("ApplicationController: msg sent. msg="+n.toString(),{fileName:"ApplicationController.hx",lineNumber:1337,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatRequestMessage"})}catch(e){haxe.Log.trace("Exception: "+Std.string(e),{fileName:"ApplicationController.hx",lineNumber:1339,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatRequestMessage",customParams:["error"]})}haxe.Log.trace("framework.sendMessage(message):"+n.toString(),{fileName:"ApplicationController.hx",lineNumber:1342,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendChatRequestMessage"}),e&&!this.getChat().isAsyncReconnect()?(this.queueMessages=!0,this.sendMessage(n,this.framework.sendReconnectGetMessage.bind(this.framework))):this.sendMessage(n,this.restoreTranscript.bind(this)),e||this.updateDataInStorage()},com.inq.flash.client.control.ApplicationController.prototype.updateDataInStorage=function(e){var t,n={};t="number"==typeof e?e:com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0),n[MESSAGE_COUNT]=t,n[LAST_TOUCHED_TIME]=Date.now(),com.inq.flash.client.control.PersistenceManager.SetValues(n)},com.inq.flash.client.control.ApplicationController.prototype.restoreTranscript=function(){this.framework.getMessages(),this.skinControl.clearOpenersArray(),this.skinControl.clearTranscriptArray()},com.inq.flash.client.control.ApplicationController.prototype.sendCommunicationMessagesFromQueue=function(){this.framework.sendCommunicationMessagesFromQueue()},com.inq.flash.client.control.ApplicationController.prototype.isConnectionAccepted=function(){return this.chatAccepted},com.inq.flash.client.control.ApplicationController.prototype.setConnectionAccepted=function(e){this.chatAccepted=e},com.inq.flash.client.control.ApplicationController.prototype.acknowledgeChatPersistent=function(e){var t=com.inq.flash.client.control.FlashPeer.registerPersistentWindow();t||com.inq.flash.client.chatskins.SkinControl.noUnload();var n=window.location.protocol+"//"+window.location.hostname;this.framework.acknowledgePersistentActive(this.chat.getChatID(),n,e,!t)},com.inq.flash.client.control.ApplicationController.prototype.acknowledgeChatActive=function(){this.framework.acknowledgeChatActive(this.chat.getChatID())},com.inq.flash.client.control.ApplicationController.prototype.handleChatLost=function(){this.framework.handleChatLost()},com.inq.flash.client.control.ApplicationController.prototype.enable=function(){this.framework.enable()},com.inq.flash.client.control.ApplicationController.prototype.disable=function(){this.framework.disable();var e=com.inq.flash.client.control.FlashPeer.getBrowserMajorVer(!0);(!com.inq.flash.client.control.FlashPeer.isPersistentChat()||com.inq.flash.client.control.FlashPeer.isPersistentWindow()||!com.inq.utils.Util.isIE||e>7)&&com.inq.flash.client.control.FlashPeer.setCABeacon(this.chat.BEACON_DEACTIVATE)},com.inq.flash.client.control.ApplicationController.prototype.sendMessageOrQueue=function(e,t){if(this.queueMessages){var n=null==t?(new Date).getTime():t;this.messageQueue.push({clientTime:n,msg:e})}else this.sendMessage(e)},com.inq.flash.client.control.ApplicationController.prototype.processClickToCallQueueMessages=function(){var e=com.inq.flash.client.chatskins.SkinControl.getOpener();this.openerMessageQueue=e.com.inq.getOpenerMessageQueue();var t=e.com.inq.getMessageQueue();if(t.length>0){var n=t.shift().msg,s=n.getProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME);com.inq.flash.client.control.FlashVars.setCustomerName(s,!0);var i=com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow(s,com.inq.flash.messagingframework.StringUtils.htmlDecode(n.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA)),com.inq.flash.client.chatskins.ChatTextArea.CUSTOMER,-1,null,n.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY));this.sendChatCommunicationMessage(n,i)}},com.inq.flash.client.control.ApplicationController.prototype.processClickToWebCallQueueMessages=function(e){var t=com.inq.utils.Util.getConfig("isVidyo",!0),n=com.inq.utils.Util.getConfig("appKeyId","123");this.callStreamData="^^"+com.inq.flash.client.chatskins.SkinControl.CSDL_WEBCALLADDRESS+(t?"true":"false")+" "+!com.inq.flash.client.control.WebRTCMgr.isAudioOnlyWebCall(),this.callStreamData+=" "+com.inq.flash.client.control.FlashPeer.getVanityUrl()+" "+n;var s=new com.inq.flash.client.data.CallCommunicationMessage(this.chat,com.inq.flash.client.control.XFrameWorker.DO_NOT_DISPLAY_IN_CI+com.inq.utils.Util.getConfig("webCallStart","Start call")),i=-1;e&&(this.setEngageParameters(e),e.phone&&this.addInitialData(s,"CallerPhone",e.phone,"CallerPhone"),e.clientOutcome&&(i=this.addClientOutcomeToChatWindow(e.clientOutcome))),s.addProperty(com.inq.flash.client.data.MessageFields.KEY_CALL_ENABLED,"false"),s.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,i),s.addProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME,com.inq.flash.client.control.FlashVars.getCustomerName()),this.queueMessages=!0,this.chatRouterListen=!1,com.inq.flash.client.control.FlashVars.setCustomerName(s.getProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME),!0),this.sendChatCommunicationMessage(s,i)},com.inq.flash.client.control.ApplicationController.prototype.getMessageQueue=function(){return this.messageQueue},com.inq.flash.client.control.ApplicationController.prototype.getOpenerMessageQueue=function(){return this.openerMessageQueue},com.inq.flash.client.control.ApplicationController.prototype.sendOpenerQueue=function(){for(;this.openerMessageQueue.length>0;){var e=this.openerMessageQueue.shift();this.sendMessageOrQueue(e.msg,e.clientTime)}},com.inq.flash.client.control.ApplicationController.prototype.sendQueueingText=function(e,t,n){var s=new com.inq.flash.client.data.ChatCommunicationQueueMessage(this.chat,e,n);s.addProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,""+t),this.sendMessageOrQueue(s)},com.inq.flash.client.control.ApplicationController.prototype.enqueueOpenerText=function(e,t,n){var s=(new Date).getTime(),i=new com.inq.flash.client.data.ChatCommunicationOpenerMessage(this.chat,e,t,n);this.openerMessageQueue.push({clientTime:s,msg:i})},com.inq.flash.client.control.ApplicationController.prototype.sendText=function(e){this.firstMessageSent||this.sendOpenerQueue(),this.sendMessageOrQueue(e),this.chatRouterListen=!1,this.firstMessageSent=!0},com.inq.flash.client.control.ApplicationController.prototype.sendTextToAgent=function(e){if(haxe.Log.trace("enter",{fileName:"ApplicationController.hx",lineNumber:618,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendTextToAgent"}),null!=e&&""!=e){haxe.Log.trace("Check connections",{fileName:"ApplicationController.hx",lineNumber:637,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendTextToAgent"}),haxe.Log.trace("attemptingConnection="+Std.string(this.attemptingConnection)+"\nintentionalDisconnect="+Std.string(this.intentionalDisconnect)+"\n",{fileName:"ApplicationController.hx",lineNumber:643,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendTextToAgent"});var t=this.appendSentText(e,-1),n=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,e);this.sendChatCommunicationMessage(n,t)}else haxe.Log.trace("no text",{fileName:"ApplicationController.hx",lineNumber:670,className:"com.inq.flash.client.control.ApplicationController",methodName:"sendTextToAgent"})},com.inq.flash.client.control.ApplicationController.prototype.sendRestoredMessage=function(){if(com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)>0)if(!0===com.inq.flash.client.control.ApplicationController.isSkipRestoreMsgOnce)com.inq.flash.client.control.ApplicationController.isSkipRestoreMsgOnce=!1;else{var e=new com.inq.flash.client.data.ChatActivityMessage(this.chat,com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_RESTORED);this.sendMessageOrQueue(e)}},com.inq.flash.client.control.ApplicationController.prototype.sendMinimizedMessage=function(){if(com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)>0){var e=new com.inq.flash.client.data.ChatActivityMessage(this.chat,com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_MINIMIZED);this.sendMessageOrQueue(e)}},com.inq.flash.client.control.ApplicationController.prototype.TypingActivity=function(e){var t=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);if(this.firstMessageSent||t>0){var n=Application.application.getTextInput("txtInput")._getInput(),s=e?new com.inq.flash.client.data.ChatActivityMessage(this.chat,com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_TYPING,null,null):new com.inq.flash.client.data.ChatActivityMessage(this.chat,com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_STOPS_TYPING,n,null);this.sendMessageOrQueue(s)}else this.skinControl.setTypingActivity(!1)},com.inq.flash.client.control.ApplicationController.prototype.appendSentText=function(e,t,n){return com.inq.flash.client.chatskins.SkinControl.AddCustomerTextToChatWindow(e,t,null,"",n)},com.inq.flash.client.control.ApplicationController.prototype.appendReceivedText=function(e,t,n,s,i,a,o,l,r){if(com.inq.flash.client.control.XFrameWorker.isDisplayInCI(e)){var c=-1!==e.indexOf(com.inq.utils.Util.getConfig("sFormSubmitted","form submitted"));r?com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow(t,e,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM_INFO,n,i,a,o,l):com.inq.flash.client.control.FlashVars.getCustomerName()!=t||s?""===t?com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow(t,e,c?com.inq.flash.client.chatskins.ChatTextArea.FORM_STATUS:com.inq.flash.client.chatskins.ChatTextArea.SYSTEM_STATUS,n,i,a,o):com.inq.flash.client.control.FlashPeer.getIsBuilder()&&"system"==t?this.skinControl.AddTranscriptItemToChatWindow(t,e,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,n,i,a):this.skinControl.AddTranscriptItemToChatWindow(t,e,com.inq.flash.client.chatskins.ChatTextArea.AGENT,n,i,a,o,l):com.inq.flash.client.chatskins.SkinControl.AddCustomerTextToChatWindow(e,n,i,a,l)}else haxe.Log.trace('Text filtered... "'+e+'"',{fileName:"ApplicationController.hx",lineNumber:167,className:"com.inq.flash.client.control.ApplicationController",methodName:"appendReceivedText"})},com.inq.flash.client.control.ApplicationController.prototype.registerHandler=function(e){this.framework.registerMessageHandler(e),e.setController(this)},com.inq.flash.client.control.ApplicationController.prototype.checkIfAdBlockersActive=function(){com.inq.flash.client.control.FlashPeer.isAdblockEnabled()&&com.inq.utils.Util.getConfig(Application.application.notificationController.FLAG_ADBLOCK_DETECTION_ENABLED,!1)&&(com.inq.flash.client.chatskins.SkinControl.disableInput(),com.inq.flash.client.chatskins.SkinControl.stopOpenerScript(!0),com.inq.flash.client.chatskins.SkinControl.hideInput(),com.inq.flash.client.chatskins.SkinControl.getSendButton().disable(),Application.application.notificationController.showAdblockDetectedMessage())},com.inq.flash.client.control.ApplicationController.prototype.processMessage=function(e){this.framework.processMessage(e)},com.inq.flash.client.control.ApplicationController.prototype.getMessagingFramework=function(){return this.framework},com.inq.flash.client.control.ApplicationController.prototype.isAgentAssigned=function(){return!!com.inq.flash.client.control.FlashPeer.getAgentID()},com.inq.flash.client.control.ApplicationController.prototype.setFlagChatInQueue=function(e){this.flagChatInQueue=e},com.inq.flash.client.control.ApplicationController.prototype.isChatInQueue=function(){return this.flagChatInQueue},com.inq.flash.client.control.ApplicationController.prototype.updateUsername=function(){this._updateUsername=!0},com.inq.flash.client.control.ApplicationController.prototype.cancelUpdateUsername=function(){this._updateUsername=!1},com.inq.flash.client.control.ApplicationController.prototype.isUpdateUsername=function(){var e=com.inq.flash.client.control.FlashVars.getCustomerDisplayName();return this._updateUsername&&!!e},com.inq.flash.client.control.ApplicationController.prototype.sendSystemMessage=function(e,t,n){var s="-1";n&&"customerInterface"!==n||(s=com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",e,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,-1,null,null,t));var i=new com.inq.flash.client.data.ChatCommunicationSystemMessage(this.chat,e,""+s,n,t);this.sendMessageOrQueue(i)},com.inq.flash.client.control.ApplicationController.prototype.onLostConnection=function(){this.skinControl.connectionLostClosingChat(!0)},com.inq.flash.client.control.ApplicationController.prototype.noUnload=function(){this.skinControl.noUnload()},com.inq.flash.client.control.ApplicationController.prototype.showIntroductionAfterPreloadMessages=function(){this.skinControl.showIntroductionAfterPreloadMessages()},com.inq.flash.client.control.ApplicationController.prototype.getMessageHandlerByPrefix=function(e){return this.framework.getMessageHandlerByPrefix(e)},com.inq.flash.client.control.ApplicationController.cleanUp=function(){com.inq.flash.client.control.ApplicationController.applicationController=null},com.inq.flash.client.control.ApplicationController.prototype.isChatContinued=function(){return com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)>1},com.inq.flash.client.control.ApplicationController.prototype.addTimeDeltaToMessage=function(e){var t=e.clientTime,n=Math.round((new Date).getTime()-t),s=e.msg;return s.addProperty(com.inq.flash.client.data.MessageFields.KEY_TIME_DELTA,""+n),s},com.inq.flash.client.control.ApplicationController.prototype.setChatID=function(e){com.inq.flash.client.control.FlashVars.setValue("chatID",e),this.getChat().setChatID(e),this.updateMessageQueue(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e)},com.inq.flash.client.control.ApplicationController.prototype.setCustomerID=function(e){com.inq.flash.client.control.FlashVars.setValue("customerID",e),this.getChat().setCustomerID(e),this.updateMessageQueue(com.inq.flash.client.data.MessageFields.KEY_CUSTOMER_ID,e)},com.inq.flash.client.control.ApplicationController.prototype.updateMessageQueue=function(e,t){for(var n=this.getMessageQueue(),s=0;s<n.length;s++)n[s].msg.setPropertyIfNotNullIfExists(e,t)},com.inq.flash.client.control.ApplicationController.prototype.sendButtonClickedTime=null,com.inq.flash.client.control.ApplicationController.prototype.bSendClickStreamData=null,com.inq.flash.client.control.ApplicationController.prototype.chatAccepted=null,com.inq.flash.client.control.ApplicationController.prototype.authorizedOnce=null,com.inq.flash.client.control.ApplicationController.prototype.waitingToExitChat=null,com.inq.flash.client.control.ApplicationController.prototype.openerMessageQueue=null,com.inq.flash.client.control.ApplicationController.prototype.messageQueue=null,com.inq.flash.client.control.ApplicationController.prototype.chatRouterListen=null,com.inq.flash.client.control.ApplicationController.prototype.notifiedAsPersistent=null,com.inq.flash.client.control.ApplicationController.prototype.attemptingConnection=null,com.inq.flash.client.control.ApplicationController.prototype.wasConnected=null,com.inq.flash.client.control.ApplicationController.prototype.persistentReconnect=null,com.inq.flash.client.control.ApplicationController.prototype.queueMessages=null,com.inq.flash.client.control.ApplicationController.prototype.intentionalDisconnect=null,com.inq.flash.client.control.ApplicationController.prototype.firstMessageSent=null,com.inq.flash.client.control.ApplicationController.prototype.builtApplicationParameters=null,com.inq.flash.client.control.ApplicationController.prototype.framework=null,com.inq.flash.client.control.ApplicationController.prototype.agentID=null,com.inq.flash.client.control.ApplicationController.prototype.chat=null,com.inq.flash.client.control.ApplicationController.prototype.callStreamData=null,com.inq.flash.client.control.ApplicationController.prototype.__class__=com.inq.flash.client.control.ApplicationController,com.inq.flash.client.control.ApplicationController.applicationController=null,com.inq.flash.client.control.ApplicationController.prototype.msgcntAtEntry=0,com.inq.flash.client.control.ApplicationController.prototype.clientDisconnect=!1,com.inq.flash.messagingframework||(com.inq.flash.messagingframework={}),com.inq.flash.messagingframework.connectionhandling||(com.inq.flash.messagingframework.connectionhandling={}),com.inq.flash.client.control.ClientConnectionEventHandler=function(e){this.controller=e},$hxClasses["com.inq.flash.client.control.ClientConnectionEventHandler"]=com.inq.flash.client.control.ClientConnectionEventHandler,com.inq.flash.client.control.ClientConnectionEventHandler.__name__=["com","inq","flash","client","control","ClientConnectionEventHandler"],com.inq.flash.client.control.ClientConnectionEventHandler.prototype.allConnectionAttemptsFailed=function(){},com.inq.flash.client.control.ClientConnectionEventHandler.prototype.connectionSuccessful=function(){haxe.Log.trace("enter",{fileName:"ClientConnectionEventHandler.hx",lineNumber:25,className:"com.inq.flash.client.control.ClientConnectionEventHandler",methodName:"connectionSuccessful"}),this.controller.connectionEstablished(),haxe.Log.trace("exit",{fileName:"ClientConnectionEventHandler.hx",lineNumber:27,className:"com.inq.flash.client.control.ClientConnectionEventHandler",methodName:"connectionSuccessful"})},com.inq.flash.client.control.ClientConnectionEventHandler.prototype.connectionClosedNeedRetryRequest=function(){return this.connectionFailedNeedRetryRequest(3,3)},com.inq.flash.client.control.ClientConnectionEventHandler.prototype.connectionFailedNeedRetryRequest=function(e,t){return this.controller.connectionLost(),!this.controller.shouldBeDisconnected()},com.inq.flash.client.control.ClientConnectionEventHandler.prototype.controller=null,com.inq.flash.client.control.ClientConnectionEventHandler.prototype.__class__=com.inq.flash.client.control.ClientConnectionEventHandler,com.inq.flash.client.control.FlashVars=function(){},$hxClasses["com.inq.flash.client.control.FlashVars"]=com.inq.flash.client.control.FlashVars,com.inq.flash.client.control.FlashVars.__name__=["com","inq","flash","client","control","FlashVars"],com.inq.flash.client.control.FlashVars._flashVars=null,com.inq.flash.client.control.FlashVars.flashVars=null,com.inq.flash.client.control.FlashVars.getFlashVars=function(){return null==com.inq.flash.client.control.FlashVars._flashVars&&com.inq.flash.client.control.FlashVars.setApplicationParameters(),com.inq.flash.client.control.FlashVars._flashVars},com.inq.flash.client.control.FlashVars.persistentFrame=null,com.inq.flash.client.control.FlashVars.chatID=null,com.inq.flash.client.control.FlashVars.clickStream=null,com.inq.flash.client.control.FlashVars.submitURL=null,com.inq.flash.client.control.FlashVars.shutdownPopup=null,com.inq.flash.client.control.FlashVars.continued=null,com.inq.flash.client.control.FlashVars.tagServerBaseURL=null,com.inq.flash.client.control.FlashVars.openerID=null,com.inq.flash.client.control.FlashVars.agentName=null,com.inq.flash.client.control.FlashVars.openerDelay=null,com.inq.flash.client.control.FlashVars.userAgent=null,com.inq.flash.client.control.FlashVars.useAgentAlias=null,com.inq.flash.client.control.FlashVars.overrideChatTheme=null,com.inq.flash.client.control.FlashVars._init=function(){return com.inq.flash.client.control.FlashVars._flashVars=null,com.inq.flash.client.control.FlashVars.customerName=null,!0},com.inq.flash.client.control.FlashVars.getValue=function(e){return com.inq.flash.client.control.FlashVars.getFlashVars()[e]},com.inq.flash.client.control.FlashVars.getBooleanValue=function(e){return"true"===com.inq.flash.client.control.FlashVars.getFlashVars()[e]},com.inq.flash.client.control.FlashVars.setValue=function(e,t){com.inq.flash.client.control.FlashVars.getFlashVars()[e]=t},com.inq.flash.client.control.FlashVars.setAgentName=function(e){null!=e&&"null"!=e&&""!=StringTools.trim(e)||(e="Jessica"),com.inq.flash.client.control.FlashVars.getFlashVars().agentName=e},com.inq.flash.client.control.FlashVars.setAutomatonSpecData=function(e){com.inq.flash.client.control.FlashVars.setValue("automatonSpecData",e)},com.inq.flash.client.control.FlashVars.getAutomatonSpecData=function(){return com.inq.flash.client.control.FlashVars.getValue("automatonSpecData")},com.inq.flash.client.control.FlashVars.getUserAgent=function(){return com.inq.flash.client.control.FlashVars.getValue("userAgent")},com.inq.flash.client.control.FlashVars.getChatID=function(){try{return com.inq.flash.client.control.FlashVars.getValue("chatID")}catch(e){if(js.Boot.__instanceof(e,Error))return haxe.Log.trace("FlashVars.getChatID ERROR: "+Std.string(e),{fileName:"FlashVars.hx",lineNumber:73,className:"com.inq.flash.client.control.FlashVars",methodName:"getChatID"}),null;throw e}},com.inq.flash.client.control.FlashVars.getClickStream=function(){return com.inq.flash.client.control.FlashVars.getValue("clickStream")},com.inq.flash.client.control.FlashVars.getSubmitURL=function(){return com.inq.flash.client.control.FlashVars.getValue("submitURL")},com.inq.flash.client.control.FlashVars.getShutdownPopup=function(){return com.inq.flash.client.control.FlashVars.getValue("shutdownPopup")},com.inq.flash.client.control.FlashVars.isContinued=function(){return 1==Std.parseInt(""+Std.string(com.inq.flash.client.control.FlashVars.getValue("continued")))},com.inq.flash.client.control.FlashVars.getTagServerBaseURL=function(){return com.inq.flash.client.control.FlashVars.getValue("tagServerBaseURL")},com.inq.flash.client.control.FlashVars.getUseAgentAlias=function(){return com.inq.flash.client.control.FlashVars.getValue("useAgentAlias")},com.inq.flash.client.control.FlashVars.getOverrideChatTheme=function(){return com.inq.flash.client.control.FlashVars.getValue("overrideChatTheme")},com.inq.flash.client.control.FlashVars.getOpenerID=function(){return com.inq.flash.client.control.FlashVars.getValue("openerID")},com.inq.flash.client.control.FlashVars.getAgentName=function(){return com.inq.utils.Util.getConfig("agentName")?com.inq.utils.Util.getConfig("agentName"):com.inq.flash.client.control.FlashVars.getValue("agentName")},com.inq.flash.client.control.FlashVars.getCustomerDisplayName=function(){return com.inq.flash.client.control.PersistenceManager.GetValue(CUSTOMER_DISPLAY_NAME,null)},com.inq.flash.client.control.FlashVars.getCustomerName=function(){if(null==com.inq.flash.client.control.FlashVars.customerName){var e=com.inq.flash.client.control.FlashVars.getCustomerDisplayName();null!=e&&""!=e||(e=com.inq.utils.Util.getConfig("customerName")?com.inq.utils.Util.getConfig("customerName"):com.inq.flash.client.control.FlashVars.getValue("userName")),com.inq.flash.client.control.FlashVars.setCustomerName(e)}return com.inq.flash.messagingframework.StringUtils.htmlEncode(com.inq.flash.client.control.FlashVars.customerName)},com.inq.flash.client.control.FlashVars.setCustomerName=function(e,t){com.inq.flash.client.control.FlashVars.customerName=e,Application.application.updateCustomerName(e),1==t&&com.inq.flash.client.control.PersistenceManager.SetValue(CUSTOMER_DISPLAY_NAME,e)},com.inq.flash.client.control.FlashVars.isCustomerNameUpdated=function(){var e=com.inq.flash.client.control.FlashVars.getCustomerDisplayName(),t=com.inq.utils.Util.getConfig("customerName"),n=com.inq.flash.client.control.FlashVars.getValue("userName");return!!e&&(t&&t!=e||n&&n!=e)},com.inq.flash.client.control.FlashVars.getOpenerDelay=function(){return com.inq.flash.client.control.FlashVars.getValue("openerDelay")},com.inq.flash.client.control.FlashVars.getWindowId=function(){return com.inq.flash.client.control.FlashVars.getValue(com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM)},com.inq.flash.client.control.FlashVars.isSecureWithCustToken=function(){return com.inq.flash.client.control.FlashVars.getBooleanValue(com.inq.flash.client.data.MessageFields.KEY_SECURE_WITH_CUST_TOKEN)},com.inq.flash.client.control.FlashVars.getPersistentCustomerID=function(){return com.inq.flash.client.control.FlashVars.getValue(com.inq.flash.client.data.MessageFields.KEY_SECURE_CUST_TOKEN)},com.inq.flash.client.control.FlashVars.setApplicationParameters=function(){com.inq.flash.client.control.FlashVars._flashVars=new com.inq.utils.Dictionary;var e=com.inq.utils.Util.fields(Application.application.parameters);haxe.Log.trace("MainApplication.parameters="+Std.string(Application.application.parameters),{fileName:"FlashVars.hx",lineNumber:100,className:"com.inq.flash.client.control.FlashVars",methodName:"setApplicationParameters"}),null==Application.application.parameters&&haxe.Log.trace("ERROR: no parameters",{fileName:"FlashVars.hx",lineNumber:102,className:"com.inq.flash.client.control.FlashVars",methodName:"setApplicationParameters"});for(var t=0;t<e.length;t++){var n=e[t],s=Application.application.parameters[n];try{com.inq.flash.client.control.FlashVars.setValue(n,s),haxe.Log.trace("FlashVars.hx: setApplicationParameters: "+n+" = "+s,{fileName:"FlashVars.hx",lineNumber:111,className:"com.inq.flash.client.control.FlashVars",methodName:"setApplicationParameters"})}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("FlashVars.hx: setApplicationparameters: Error"+Std.string(e),{fileName:"FlashVars.hx",lineNumber:113,className:"com.inq.flash.client.control.FlashVars",methodName:"setApplicationParameters"})}}com.inq.flash.client.control.FlashVars.setupFlashVar("chatID","-1"),com.inq.flash.client.control.FlashVars.setupFlashVar("continued","0");var i=com.inq.flash.client.control.FlashPeer.isCEAPIPostChatSurveyMode();com.inq.flash.client.control.PersistenceManager.SetValue(CHAT_CONTINUED,i?0:1),com.inq.flash.client.control.FlashVars.setupFlashVar("iframeURL","http://sb3.conversive.com/gui_gamefly/chat.html"),com.inq.flash.client.control.FlashVars.setupFlashVar("agentName","Jessica"),com.inq.flash.client.control.FlashVars.setupFlashVar("shutdownPopup","false"),com.inq.flash.client.control.FlashVars.setupFlashVar("userName","Visitor"),com.inq.flash.client.control.FlashVars.setupFlashVar("delay","0"),com.inq.flash.client.control.FlashVars.setupFlashVar("submitURL","chatrouterv3.inq.com"),com.inq.flash.client.control.FlashVars.setupFlashVar("clickStream",""),com.inq.flash.client.control.FlashVars.setupFlashVar("windowId","-1"),com.inq.flash.client.control.FlashVars.setValue("shutdownPopup","true"==com.inq.flash.client.control.FlashVars.getValue("shutdownPopup")),com.inq.flash.client.control.FlashVars.setupFlashVar("openerDelay","6"),com.inq.flash.client.control.FlashVars.setupFlashVar("tagServerBaseURL","https://tagserverv3.inq.com");var a=com.inq.flash.client.control.FlashVars.getValue("tagServerBaseURL");"/"!=HxOverrides.substr(a,a.length-1,null)&&(a+="/",com.inq.flash.client.control.FlashVars.setValue("tagServerBaseURL",a));for(var o="\n",l=com.inq.utils.Util.fields(com.inq.flash.client.control.FlashVars._flashVars),r=0;r<l.length;r++){var c=l[r],h=com.inq.flash.client.control.FlashVars._flashVars[c],m=" ";"String"==(m=m.charAt(0).toUpperCase()+HxOverrides.substr(m,1,null))&&(h='"'+Std.string(h)+'"'),o+="FlashVars.flashVars."+c+":"+m+"="+Std.string(h)+";\n"}return haxe.Log.trace(o,{fileName:"FlashVars.hx",lineNumber:188,className:"com.inq.flash.client.control.FlashVars",methodName:"setApplicationParameters"}),com.inq.flash.client.control.FlashVars._flashVars},com.inq.flash.client.control.FlashVars.setupFlashVar=function(e,t){try{var n=null;try{n=com.inq.flash.client.control.FlashVars.getValue(e)}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;n=null}null==n&&com.inq.flash.client.control.FlashVars.setValue(e,t)}catch(n){if(!js.Boot.__instanceof(n,Error))throw n;haxe.Log.trace("FlashVars.setupFlashVars: ERROR: "+Std.string(n),{fileName:"FlashVars.hx",lineNumber:213,className:"com.inq.flash.client.control.FlashVars",methodName:"setupFlashVar"}),com.inq.flash.client.control.FlashVars.setValue(e,t)}},com.inq.flash.client.control.FlashVars.get=function(e){return com.inq.flash.client.control.FlashVars.getFlashVars(),com.inq.flash.client.control.FlashVars._flashVars[e]},com.inq.flash.client.control.FlashVars.prototype.__class__=com.inq.flash.client.control.FlashVars,com.inq.flash.client.control.FlashVars.customerName=null,com.inq.flash.client.control.Incrementality=function(){},com.inq.flash.client.control.Incrementality.__name__=["com","inq","flash","client","control","Incrementality"],com.inq.flash.client.control.Incrementality.interacted=null,com.inq.flash.client.control.Incrementality.init=function(){return com.inq.flash.client.control.Incrementality.interacted=com.inq.flash.client.control.PersistenceManager.GetValue(CHAT_INTERACTED,!1),!0},com.inq.flash.client.control.Incrementality.onEngaged=function(){if(Application.application.applicationController.skinControl.StopTimer(),!com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&""!=com.inq.flash.client.control.FlashVars.getFlashVars().brID){com.inq.flash.client.control.FlashPeer.onEngaged({brID:com.inq.flash.client.control.FlashVars.getFlashVars().brID});var e=new Date;com.inq.flash.client.chatskins.SkinControl.closeChatOneHourTimer(e),Application.application.fireMxmlEvent("onEngaged"),haxe.Log.trace("Incrementality.onEngaged",{fileName:"Incrementality.hx",lineNumber:28,className:"com.inq.flash.client.control.Incrementality",methodName:"onEngaged"})}},com.inq.flash.client.control.Incrementality.onInteracted=function(){try{var e=!1;try{e=com.inq.flash.client.control.Incrementality.interacted}catch(e){}if(e)return;if(com.inq.flash.client.control.Incrementality.interacted=!0,com.inq.flash.client.control.PersistenceManager.SetValue(CHAT_INTERACTED,com.inq.flash.client.control.Incrementality.interacted),com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&!Application.application.applicationController.skinControl.isClick2call()&&!com.inq.flash.client.control.FlashPeer.isV3C2CPersistent())return;if(""==com.inq.flash.client.control.FlashVars.getFlashVars().brID)return;com.inq.flash.client.control.FlashPeer.onInteracted({brID:com.inq.flash.client.control.FlashVars.getFlashVars().brID}),Application.application.fireMxmlEvent("onInteracted"),haxe.Log.trace("onInteracted",{fileName:"Incrementality.hx",lineNumber:50,className:"com.inq.flash.client.control.Incrementality",methodName:"onInteracted"})}catch(e){haxe.Log.trace("onInteracted failed: "+Std.string(e),{fileName:"Incrementality.hx",lineNumber:52,className:"com.inq.flash.client.control.Incrementality",methodName:"onInteracted"})}},com.inq.flash.client.control.Incrementality.onAgentMsg=function(e){""!=com.inq.flash.client.control.FlashVars.getFlashVars().brID&&(com.inq.flash.client.control.FlashPeer.onAgentMsg({brID:com.inq.flash.client.control.FlashVars.getFlashVars().brID,textLine:null==e?"":e}),Application.application.fireMxmlEvent("onAgentMsg"),haxe.Log.trace("onAgentMsg",{fileName:"Incrementality.hx",lineNumber:63,className:"com.inq.flash.client.control.Incrementality",methodName:"onAgentMsg"}))},com.inq.flash.client.control.Incrementality.onAgentDataPass=function(e){com.inq.flash.client.control.FlashPeer.onAgentDataPass(e),Application.application.fireMxmlEvent("onAgentDataPass"),haxe.Log.trace("onAgentDataPass",{fileName:"Incrementality.js",className:"com.inq.flash.client.control.Incrementality",methodName:"onAgentDataPass"})},com.inq.flash.client.control.Incrementality.onVADataPass=function(e){com.inq.flash.client.control.FlashPeer.onVADataPass(e),Application.application.fireMxmlEvent("onVADataPass"),com.inq.flash.client.control.FlashPeer.debugLogInfoToTagServer("VA_DATA_PASS","onVADataPass received: "+e)},com.inq.flash.client.control.Incrementality.onChatroomReady=function(){com.inq.flash.client.control.FlashVars.getFlashVars().brID&&(com.inq.flash.client.control.FlashPeer.onChatroomReady({brID:com.inq.flash.client.control.FlashVars.getFlashVars().brID}),Application.application.fireMxmlEvent("onChatroomReady"),haxe.Log.trace("onChatroomReady",{fileName:"Incrementality.js"}))},com.inq.flash.client.control.Incrementality.onCustomerMsg=function(e){if(""!=com.inq.flash.client.control.FlashVars.getFlashVars().brID){var t={textLine:null==e?"":e};com.inq.flash.client.control.FlashPeer.onCustomerMsg(t),Application.application.fireMxmlEvent("onCustomerMsg"),haxe.Log.trace("onCustomerMsg",{fileName:"Incrementality.hx",lineNumber:75,className:"com.inq.flash.client.control.Incrementality",methodName:"onCustomerMsg"})}},com.inq.flash.client.control.Incrementality.onAssisted=function(){""!=com.inq.flash.client.control.FlashVars.getFlashVars().brID&&(com.inq.flash.client.control.FlashPeer.onAssisted({brID:com.inq.flash.client.control.FlashVars.getFlashVars().brID}),Application.application.fireMxmlEvent("onAssisted"),haxe.Log.trace("onAssisted",{fileName:"Incrementality.hx",lineNumber:85,className:"com.inq.flash.client.control.Incrementality",methodName:"onAssisted"}))},com.inq.flash.client.control.Incrementality.prototype.__class__=com.inq.flash.client.control.Incrementality,com.inq.flash.client.control.ClickStreamBuilder=function(){},$hxClasses.registerClass(com.inq.flash.client.control.ClickStreamBuilder,"com.inq.flash.client.control.ClickStreamBuilder"),com.inq.flash.client.control.ClickStreamBuilder.IdentifyPlatform=function(){var e=com.inq.flash.client.control.ClickStreamBuilder.SEP_ATTRIBUTE,t=com.inq.flash.client.control.ClickStreamBuilder.CSDL_OS+com.inq.utils.Capabilities._getOS()+e;try{""!=com.inq.flash.client.control.FlashVars.getValue("userAgent")&&(com.inq.flash.client.control.FlashVars.setValue("userAgent",js.Lib.window.navigator.userAgent),t+=com.inq.flash.client.control.ClickStreamBuilder.CSDL_BROWSER+com.inq.utils.Capabilities.extractBrowserNameAndVersion(com.inq.flash.client.control.FlashVars.getValue("userAgent"))+e+com.inq.flash.client.control.ClickStreamBuilder.CSDL_USERAGENT+StringTools.htmlEscape(com.inq.flash.client.control.FlashVars.getValue("userAgent"))+e,!com.inq.flash.client.control.FlashVars.isContinued()&&com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&(t+=com.inq.flash.client.control.ClickStreamBuilder.CSDL_CLICK2PER+"YES"+e))}catch(e){if(!js.Boot.__instanceof(e,Error))throw e}return haxe.Log.trace("IdentifyPlatform(): exit",{fileName:"ClickStreamBuilder.js",className:"com.inq.flash.client.control.ClickStreamBuilder",methodName:"IdentifyPlatform"}),t},com.inq.flash.client.control.ClickStreamBuilder.parseClickstreamData=function(){return StringTools.urlDecode(com.inq.flash.client.control.FlashVars.getValue("clickStream")).split("&")},com.inq.flash.client.control.ClickStreamBuilder.parseInitialClickstreamData=function(){for(var e=com.inq.flash.client.control.ClickStreamBuilder.SEP_ATTRIBUTE,t="",n=com.inq.flash.client.control.ClickStreamBuilder.parseClickstreamData(),s=0;s<n.length;s++){var i=n[s].split("="),a=i.shift(),o=i.join("=");""!==o&&("data"==HxOverrides.substr(a,0,4)?t=(""!=t?t+e:"")+"_"+a+"=Data["+HxOverrides.substr(a,4,null)+"]&"+a+"="+o:"markerHistory"==a?t=(""!=t?t+e:"")+com.inq.flash.client.control.ClickStreamBuilder.CSDL_VISITED+o:"launchPageMarker"==a&&(t=(""!=t?t+e:"")+com.inq.flash.client.control.ClickStreamBuilder.CSDL_LAUNCH_PAGE_MARKER+o))}return haxe.Log.trace("ClickStreamBuilder.parseInitialClickstreamData: "+t,{fileName:"ClickStreamBuilder.js",className:"com.inq.flash.client.control.ClickStreamBuilder",methodName:"parseInitialClickstreamData"}),t+e},com.inq.flash.client.control.ClickStreamBuilder.parseURLfromClickStreamData=function(){for(var e="",t=com.inq.flash.client.control.ClickStreamBuilder.parseClickstreamData(),n=0;n<t.length;n++)if(t[n].includes("pageURL")){var s=t[n].split("="),i=s.shift(),a=s.join("=");""!==a&&"pageURL"===i&&(e=com.inq.flash.client.control.ClickStreamBuilder.CSDL_URL+a)}return com.inq.flash.client.control.ClickStreamBuilder.SEP_ATTRIBUTE+e},com.inq.flash.client.control.ClickStreamBuilder.parseDFVfromClickStreamData=function(){for(var e="",t=com.inq.flash.client.control.ClickStreamBuilder.parseClickstreamData(),n=0;n<t.length;n++)if(t[n].includes("dfv")){var s=t[n].split("="),i=s.shift(),a=s.join("=");""!==a&&"dfv"==i&&(e=(""!=e?e+"&":"")+com.inq.flash.client.control.ClickStreamBuilder.CSDL_DFV+a)}return com.inq.flash.client.control.ClickStreamBuilder.SEP_ATTRIBUTE+e},com.inq.flash.client.control.ClickStreamBuilder.CSDL_OS="_OperatingSystem=OS^^OperatingSystem=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_USERAGENT="_UserAgent=UserAgent^^UserAgent=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_BROWSER="_Browser=Browser^^Browser=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_CLICK2PER="_ClickToPersistent=ClickToPersistent^^ClickToPersistent=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_VISITED="_visited=Page Markers^^visited=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_LAUNCH_PAGE_MARKER="_launchPageMarker=Page Marker^^launchPageMarker=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_URL="_URL=Page URL^^URL=",com.inq.flash.client.control.ClickStreamBuilder.CSDL_DFV="_dfv=Data^^dfv=",com.inq.flash.client.control.ClickStreamBuilder.SEP_ATTRIBUTE="^^",com.inq.flash.messagingframework.AbstractMessageHandler=function(e){this.messageType=e},$hxClasses["com.inq.flash.messagingframework.AbstractMessageHandler"]=com.inq.flash.messagingframework.AbstractMessageHandler,com.inq.flash.messagingframework.AbstractMessageHandler.__name__=["com","inq","flash","messagingframework","AbstractMessageHandler"],com.inq.flash.messagingframework.AbstractMessageHandler.prototype.getMessagingFramework=function(){return this.framework},com.inq.flash.messagingframework.AbstractMessageHandler.prototype.setMessagingFramework=function(e){this.framework=e},com.inq.flash.messagingframework.AbstractMessageHandler.prototype.getMessageType=function(){return this.messageType},com.inq.flash.messagingframework.AbstractMessageHandler.prototype.processMessage=function(e){},com.inq.flash.messagingframework.AbstractMessageHandler.prototype.framework=null,com.inq.flash.messagingframework.AbstractMessageHandler.prototype.messageType=null,com.inq.flash.messagingframework.AbstractMessageHandler.prototype.__class__=com.inq.flash.messagingframework.AbstractMessageHandler,com.inq.flash.client.control.messagehandlers||(com.inq.flash.client.control.messagehandlers={}),function(){for(var e in com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler=function(e){com.inq.flash.messagingframework.AbstractMessageHandler.call(this,e)},$hxClasses["com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler"]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ClientApplicationMessageHandler"],com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.__super__=com.inq.flash.messagingframework.AbstractMessageHandler,com.inq.flash.messagingframework.AbstractMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e]=com.inq.flash.messagingframework.AbstractMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype.getController=function(){return this.controller},com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype.setController=function(e){this.controller=e},com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype.setAgent=function(e,t,n){var s,i=com.inq.flash.client.control.FlashPeer.getAgentID(),a=t.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_LAST_AGENT_ASSIGNED_MESSAGE),o="1"===t.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY);s="boolean"!=typeof n?t.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_ENABLED):n,e&&(!o||a&&e!==i)&&this.getController().setAgentConfig(e,com.inq.utils.EventDataUtils.fromMessage(t),s,t.getProperty(com.inq.flash.client.data.MessageFields.KEY_BUSINESS_UNIT_ID),t.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_GROUP_ID))},com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype.controller=null,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler}(),com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_AGENT_DATA_PASS)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler,"com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler"),com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler.prototype.processMessage=function(e){com.inq.flash.client.chatskins.SkinControl.getChatWindow().removeSystemMessageAndRerender(),com.inq.flash.client.control.Incrementality.onAgentDataPass(e)},com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler,com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_ASYNC_UNAUTH_TOKEN_INFO)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler,"com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler"),com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler.prototype.processMessage=function(e){com.inq.flash.client.control.PersistenceManager.SetValue(CONVERSATION_ID,e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_ID)),com.inq.flash.client.control.FlashPeer.verifyToken(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TOKEN_ID))},com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler,function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACCEPTED)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler,com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatAcceptedMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.prototype.processMessage=function(e){var t=e.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_FOR_RECONNECT),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID),s=com.inq.flash.client.control.FlashPeer.getAgentID(),i=e.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_LAST_AGENT_ASSIGNED_MESSAGE),a="1"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY);if(this.setAgent(n,e),n&&(!a||i&&n!==s)&&Application.application.fireMxmlEvent("onChatAccepted"),!a)if(this.getController().sendFirstQueuedMessage(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TIME_LOG)),this.getController().setQueueMessages(),this.getController().checkForChatExit(),this.getController().setConnectionAccepted(!0),t)this.getController().sendCommunicationMessagesFromQueue(),this.getController().getChat().isAsyncReconnect()||this.getController().restoreTranscript(),this.getController().getChat().setAsyncReconnect(!1);else if(com.inq.flash.client.control.FlashPeer.setSurveyAuxParams({Agent:!0}),"true"===com.inq.flash.client.control.FlashVars.getValue("enableAgentEncryptData")){var o,l,r,c=com.inq.flash.client.control.FlashVars.getValue("siteID"),h=e.getProperty("public_user_id");h&&(l="tagserver/secure-agent-data/public-agent-id/"+h+"?siteId="+c,r=Std.string(com.inq.flash.client.control.FlashVars.getValue("tagServerBaseURL"))+l,this.agentEncryptedDataLoader=new com.inq.net.URLLoader,o=new com.inq.net.URLRequest(r),this.agentEncryptedDataLoader.addEventListener(com.inq.events.Event.NETWORK_ERROR,$bind(this,this.agentEncrypteDataFailed)),this.agentEncryptedDataLoader.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.agentEncrypteDataLoaded)),this.agentEncryptedDataLoader.load(o))}},com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.prototype.agentEncryptedDataLoader=null,com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.prototype.agentEncrypteDataFailed=function(e){haxe.Log.trace("ChatAcceptedMessageHandler.agentEncrypteDataLoader request failed",{fileName:"ChatAcceptedMessageHandler.js",lineNumber:69,className:"com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler",methodName:"agentEncryptedDataLoader"})},com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.prototype.agentEncrypteDataLoaded=function(e){if(this.agentEncryptedDataLoader.data){for(keyName in top.CHAT_AGENT_ENCRYPTED_DATA={},this.agentEncryptedDataLoader.data)"secureAgentAttributes"!==keyName&&(top.CHAT_AGENT_ENCRYPTED_DATA[keyName]=this.agentEncryptedDataLoader.data[keyName]);if(top.CHAT_AGENT_ENCRYPTED_DATA.secureAgentAttributes={},this.agentEncryptedDataLoader.data.secureAgentAttributes)for(var t=0;t<this.agentEncryptedDataLoader.data.secureAgentAttributes.length;t++)void 0===top.CHAT_AGENT_ENCRYPTED_DATA.secureAgentAttributes[this.agentEncryptedDataLoader.data.secureAgentAttributes[t].key]&&(top.CHAT_AGENT_ENCRYPTED_DATA.secureAgentAttributes[this.agentEncryptedDataLoader.data.secureAgentAttributes[t].key]=[]),top.CHAT_AGENT_ENCRYPTED_DATA.secureAgentAttributes[this.agentEncryptedDataLoader.data.secureAgentAttributes[t].key].push(this.agentEncryptedDataLoader.data.secureAgentAttributes[t].secureValue)}},com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTHORIZED)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler,com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatAuthorizedMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler.prototype.processMessage=function(e){e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_TYPE)==com.inq.flash.client.data.MessageFields.DATA_CHATROOM_MEMBER_VIRTUAL_AGENT&&com.inq.flash.client.control.PersistenceManager.SetValue(VIRTUAL_AGENT,1,!0,!0),this.getController().getChat().setHasAuthorized(!0);var t=e.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_CONFIG_IS_ASYNC_ENGAGEMENT);null!==t&&(this.getController().getChat().setAsyncChat(t),com.inq.flash.client.control.FlashPeer.setAsyncChat(t));var n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_ID);n&&com.inq.flash.client.control.PersistenceManager.SetValue(CONVERSATION_ID,n),this.getController().sendFirstQueuedMessage(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TIME_LOG)),this.getController().setQueueMessages(),com.inq.flash.client.control.Incrementality.onChatroomReady()},com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_COBROWSE)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler,com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatCobrowseMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.prototype.executeCobrowseInvite=function(e,t,n){var s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY),i=e.getPropertyAsDate(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TIMESTAMP);com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow(t,n,com.inq.flash.client.chatskins.ChatTextArea.AGENT,-1,null,s,null,i),"1"!=s&&com.inq.flash.client.control.MinimizeManager.lastAgentMessage(n)},com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.prototype.executeCobrowseGetHTMLTest=function(e){var t=!1;Inq.CBC&&(t=Inq.CBC.testGetHTML()),this.sendCobrowseTestResult(t,e)},com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.prototype.sendCobrowseTestResult=function(e,t){e?Application.application.applicationController.sendCoBrowseMessageQuietly(com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseTestSuccess,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE_TEST_RESULT,com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT_SUCCESS,null,t):Application.application.applicationController.sendCoBrowseMessageQuietly(com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseTestFail,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE_TEST_RESULT,com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT_FAILURE,null,t)},com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.prototype.processMessage=function(e){var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_AGENT_ALIAS),s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USER_ID),i=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_CUSTOMER_QUIET),a=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY);if(null!=n){var o=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT);if(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_END!=o)com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE==o||com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_SHARED_INVITE==o?this.executeCobrowseInvite(e,n,t):com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE_TEST==o&&"1"!=a?this.executeCobrowseGetHTMLTest(s):com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_FAIL_NO_CONNECTION==o&&"1"!=a&&this.sendCobrowseTestResult(!1,s);else{var l=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_TYPE);if(com.inq.flash.client.data.MessageFields.DATA_AGENT_TYPE_FLEX==l&&"1"!=a){var r=e.getProperty(com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM);com.inq.flash.client.chatskins.CoBrowseMgr.endCobByEtlEvent(r)}}}else if(t===com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsCobrowse||t===com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsSharedControl?com.inq.flash.client.chatskins.CoBrowseMgr.ariaCobStart(a):com.inq.flash.client.chatskins.CoBrowseMgr.ariaCobEnd(),i)try{com.inq.flash.client.chatskins.FormMgr.updateFormTimeExecutor(com.inq.flash.client.chatskins.SkinControl.cw)}catch(e){haxe.Log.trace("ChatCobrowseMessageHandler.processMessage: ERROR - during execution of com.inq.flash.client.chatskins.FormMgr.updateFormTimeExecutor")}else null!=com.inq.flash.client.chatskins.SkinControl.cw&&com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",t,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,-1,null,a)},com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler,com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatCommunicationMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler.prototype.processMessage=function(e){var t;(t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS)?e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS):e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_AGENT_ALIAS))||(t=com.inq.flash.client.control.FlashVars.getFlashVars().agentName);var n,s,i,a=com.inq.flash.client.control.FlashVars.getCustomerName(),o=com.inq.flash.client.chatskins.SkinControl.checkMessageForSpecialExpression(e),l=o.text,r="1"==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY);if(e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_QUEUE){if(com.inq.flash.client.control.WebRTCMgr.setCallQueue(),com.inq.flash.client.control.FlashPeer.onQueueWaitMsg(),!r&&(this.getController().setFlagChatInQueue(!0),!com.inq.flash.client.control.FlashPeer.getQueueMessagingSpecId()))return;n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS),com.inq.utils.Util.isDefaultAgentAlias()&&(t=com.inq.utils.Util.getConfig("defaultAgentAlias","&nbsp;"))}else r&&com.inq.flash.client.control.messagehandlers.NeedWaitHandler.incrementCounter(),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID);var c=!!n;if(c&&(l.indexOf("http:")>=0||l.indexOf("https:")>=0)&&-1==l.indexOf("href=")&&(l=l.replace(/https?:\/\/[-\w.]+(:\d+)?(\/([-\w.,;/?:@&=+$%#!~*'()]*(\?\S+)?)?)?/g,'<a href="$&" target="_blank">$&</a>')),s=-1,null!=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR)&&(s=parseInt(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_LINE_NR))),i=null==e.getProperty(com.inq.flash.client.data.MessageFields.FORM_DATA)?c?t:a:"",e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER||r||(e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION&&(c&&"true"!==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_AUTO_OPENER)?(com.inq.flash.client.control.Incrementality.onInteracted(),com.inq.flash.client.control.Incrementality.onAgentMsg(l)):com.inq.flash.client.control.FlashVars.getCustomerName()===i&&com.inq.flash.client.control.Incrementality.onCustomerMsg(l)),c&&(this.getController().setFlagChatInQueue(!1),com.inq.flash.client.chatskins.FocusMonitor.startTitlebarFlash(),com.inq.flash.client.control.MinimizeManager.lastAgentMessage(l),com.inq.flash.client.chatskins.SndMgr.PlaySound())),r&&c&&com.inq.flash.client.control.MinimizeManager.displayAgentMessageAndCount(l),l)switch(e.getMessageType()){case com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME:case com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER:com.inq.flash.client.chatskins.SkinControl.AddOpenerToChatWindow(t,l,com.inq.flash.client.chatskins.ChatTextArea.AGENT,s,o.expressionList);break;case com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_SYSTEM:var h=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CONTEXT);if(!h||"customerInterface"===h){var m=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CSS_CLASS_NAME);com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",l,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,s,o.expressionList,r,m)}break;default:var d=e.getPropertyAsDate(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TIMESTAMP);m=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_EXTERNAL_APP)?com.inq.flash.client.chatskins.ChatTextArea.EXTERNAL_AGENT_CLASS_NAME:com.inq.flash.client.chatskins.ChatTextArea.LIVE_AGENT_CLASS_NAME,this.getController().appendReceivedText(l,i,s,c,o.expressionList,r,m,d),!0===com.inq.flash.client.chatskins.SkinControl.agentImageTypeEnabled&&c&&com.inq.flash.client.chatskins.SkinControl.setAgentImage(com.inq.flash.client.chatskins.SkinControl.LIVE_AGENT)}c&&l&&!1===r&&(l=com.inq.addons.Salesforce.scanMessage(l)),null!=e.getProperty(com.inq.flash.client.data.MessageFields.FORM_DATA)&&this.getController().updateFormFields(e.getProperty(com.inq.flash.client.data.MessageFields.FORM_DATA),e.getProperty(com.inq.flash.client.data.MessageFields.FORM_NAME),e.getProperty(com.inq.flash.client.data.MessageFields.FORM_ID))},com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler.prototype.chat=null,com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler}(),com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler,"com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler"),com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler.prototype.processMessage=function(e){if(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DENIED_REASON)!==com.inq.flash.client.data.MessageFields.DATA_CHAT_DENIED_WRONG_REQUEST_FOR_RECONNECT_REASON){var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TY_LABEL);null!=t&&"undefined"!=t&&"null"!=t&&(com.inq.flash.client.chatskins.SkinControl.tYImageLabel=t),this.getController().shutdown(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_DENIED),com.inq.flash.client.chatskins.SkinControl.doThankYou(),com.inq.flash.client.chatskins.SkinControl.sendEventToAllAutomatons("onChatDenied"),this.getController().disable()}else this.getController().handleChatLost()},com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler,function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler,com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatExitMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler.prototype.processMessage=function(e){var t="true"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_RESOLVED),n={conversationResolved:t};com.inq.flash.client.control.FlashPeer.setEventDataForSurvey(n);var s=e.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_FORCED_CLOSE);t&&(s||com.inq.flash.client.control.FlashPeer.fireConversationResolvedEvent(),com.inq.flash.client.control.FlashPeer.resetConversationManager());var i=!1;com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT===e.getMessageType()&&"client"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USER_TYPE)?i=!0:com.inq.flash.client.control.FlashPeer.setAgentClosedChat(!0);var a=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TY_LABEL);null!=a&&"undefined"!=a&&"null"!=a?(com.inq.flash.client.chatskins.SkinControl.tYImageLabel=a,com.inq.flash.client.control.FlashVars.setValue("agentExitLine",a)):com.inq.flash.client.chatskins.SkinControl.tYImageLabel="",0==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID).length||(this.getController().msgcntAtEntry=0,this.getController().clientDisconnect=i||!!s,!this.getController().getChat().isAsyncChat()||!this.getController().getChat().isCiEnabledOnResolve()&&t||s?this.getController().shutdown(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_EXIT):(this.getController().shutdownQuietly(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_EXIT),com.inq.flash.client.chatskins.SkinControl.closeChatSession(),com.inq.flash.client.control.PersistenceManager.ClearValues(),com.inq.flash.client.control.PersistenceManager.reopen()),this.getController().disable(),com.inq.flash.client.control.MinimizeManager.onClose(),com.inq.flash.client.chatskins.SkinControl.keyCount=0,!this.getController().getChat().isAsyncChat()||!this.getController().getChat().isCiEnabledOnResolve()&&t||s||com.inq.flash.client.control.FlashPeer.reinitializeChatWithNewId())},com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHATLINE)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler,com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatLineMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler.prototype.processMessage=function(e){e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION),this.getController().processMessage(e)},com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_CONNECTED)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler,com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatroomMemberConnectedMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler.prototype.processMessage=function(e){e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_TYPE)==com.inq.flash.client.data.MessageFields.DATA_CHATROOM_MEMBER_AGENT&&com.inq.flash.client.control.PersistenceManager.SetValue("va",null,!0,!0),e.getProperty(com.inq.flash.client.data.MessageFields.KEY_OWNER)==com.inq.flash.client.data.MessageFields.DATA_TRUE&&(this.getController().setConnectionAccepted(!0),this.setAgent(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_ID),e));var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_IS_REASSIGNMENT_MODE),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TC_MODE);(n==com.inq.flash.client.data.MessageFields.DATA_TRANSFER||n==com.inq.flash.client.data.MessageFields.DATA_CONFERENCE&&e.getProperty(com.inq.flash.client.data.MessageFields.KEY_SCREENING)==com.inq.flash.client.data.MessageFields.DATA_FALSE||t==com.inq.flash.client.data.MessageFields.DATA_TRUE)&&com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_DISPLAY_TEXT),com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,-1,null,e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY))},com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_LOST)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler,com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatroomMemberLostMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler.prototype.processMessage=function(e){var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_DISPLAY_TEXT);if(null!=t){var n=StringTools.trim(t);com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",n,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,-1,null,e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY))}},com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_OWNER_TRANSFER_RESPONSE)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler"]=com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler,com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ChatroomOwnerTransferResponseMessageHandler"],com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler.prototype.processMessage=function(e){var t=StringTools.trim(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_OWNER_ID));"undefined"!=t&&"null"!=t&&this.setAgent(t,e)},com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_TRANSFER_RESPONSE)},$hxClasses["com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse"]=com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse,com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse.__name__=["com","inq","flash","client","control","messagehandlers","ChatroomTransferResponse"],com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse.prototype.processMessage=function(e){var t=StringTools.trim(e.getProperty("client.display.text"));com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",t,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,-1,null,e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY)),this.setAgent(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID),e)},com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse.prototype.__class__=com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse}(),com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CLIENT_AUTH_DATA)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler,"com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler"),com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler.prototype.processMessage=function(e){var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME);null!=t&&com.inq.flash.client.control.FlashVars.setCustomerName(t,!0)},com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler,function(){for(var e in com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler=function(){this.replaybleCommandsQueue=[],com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CLIENT_COMMAND)},$hxClasses["com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler"]=com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler,com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","ClientCommandMessageHandler"],com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.prototype.runCommands=function(){for(var e=0;e<this.replaybleCommandsQueue.length;e++)this.processCommand(this.replaybleCommandsQueue[e],!0);this.replaybleCommandsQueue=[]},com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.prototype.processCommand=function(e,t){if(com.inq.flash.client.control.FlashPeer.isMultiChatSupported()){var n=e.getProperty(com.inq.flash.client.data.MessageFields.MASTER_WINDOW_ID);if(!t&&""!=n&&n!=com.inq.flash.client.control.FlashVars.getWindowId())return}var s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_CMD_PARAM);null!=s&&""!=s||(s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_COMMAND_PARAM));var i,a,o=s,l="inqNewWindow",r="client_command",c="client_function";if("hide_input"!=o)if(null!=(a=o.match(/^show_input(\|(.*))?/)))com.inq.flash.client.chatskins.SkinControl.showInput("true"==a[2]);else if(0!=o.indexOf(r))if((i=o.indexOf(" to "))>=0&&(l=HxOverrides.substr(o,i+4,null),o=HxOverrides.substr(o,0,i)),0!=o.indexOf(c)||t)if("xform"!=o){if(!t)if(haxe.Log.trace("doPushPage: extract target "+l,{fileName:"ClientCommandMessageHandler.hx",lineNumber:66,className:"com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler",methodName:"processMessage"}),"skin"!=l)if("forward"!=l)o.indexOf("goToPersistentChat")>=0&&(haxe.Log.trace("CHAT: Frameset Push, closing socket",{fileName:"ClientCommandMessageHandler.hx",lineNumber:107,className:"com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler",methodName:"processMessage"}),this.getController().shutdownQuietly(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_CLIENT_COMMAND)),com.inq.flash.client.control.FlashVars.getFlashVars().persistentFrame?com.inq.flash.client.chatskins.SkinControl.PushToFrameset(o,l):"_inqPersistentChat"==l?com.inq.flash.client.chatskins.SkinControl.enablePersistentChatButtonAndEstablishUrl(o):"flashForm"==l?com.inq.flash.client.chatskins.SkinControl.PushEmbeddedForm():"block-service"==l?com.inq.flash.client.chatskins.SkinControl.blockService(o):com.inq.flash.client.chatskins.SkinControl.PushToFrameset(o,l);else{if(!com.inq.flash.client.chatskins.SkinControl.getIsPersistentChat())return;var h=window.parent;h.focus&&h.focus()}else com.inq.ui.SkinLoader.LoadNewSkin(o)}else{var m=l.split("|"),d=m[0].split("."),g=m.length>1?m[1].split(com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.XFORM_SERVER_PLACEHOLDER).join(com.inq.flash.client.control.FlashPeer.getXFormsDomain()):null,p={type:e.getProperty(com.inq.flash.client.data.MessageFields.KEY_INITIATOR),id:e.getProperty(com.inq.flash.client.data.MessageFields.KEY_INITIATOR_ID)};if(com.inq.flash.client.control.MinimizeManager.lastAgentMessage(null),t&&"video"!==d[0])return;switch(d[0]){case"shrink":com.inq.flash.client.control.XFrameWorker.shrink(d[1]);break;case"grow":com.inq.flash.client.control.XFrameWorker.grow(d[1],g,null,p);break;case"hide":com.inq.flash.client.control.XFrameWorker.hideLayer(d[1]);break;case"show":com.inq.flash.client.control.XFrameWorker.showLayer(d[1],null,g,null,null,p);break;case"video":var f=/\((.*?)\)/.exec(m[0]);if(u=(u=/^(.*?)\(/.exec(d[1]))&&u.length>1?u[1]:null,f&&f.length>1&&u){if(t&&"0"==com.inq.flash.client.control.PersistenceManager.GetValue(XFRAMES,{})[u])return;com.inq.flash.client.control.XFrameWorker.showVideoLayer(u,null,g,null,null,p,f[1])}break;case"iframe":var u;f=/\((.*?)\)/.exec(m[0]),u=(u=/^(.*?)\(/.exec(d[1]))&&u.length>1?u[1]:null,f&&f.length>1&&u&&com.inq.flash.client.control.XFrameWorker.showIFrameLayer(u,null,f[1],null,null,p,f)}}else com.inq.flash.client.chatskins.SkinControl.executeCustomCommand(JSON.stringify({cmdType:c,cmdParam:HxOverrides.substr(o,c.length,null).trim(),functionName:l.trim()}));else com.inq.flash.client.chatskins.SkinControl.executeCustomCommand(HxOverrides.substr(o,r.length,null));else com.inq.flash.client.chatskins.SkinControl.hideInput()},com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.prototype.processMessage=function(e){"1"==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY)?this.replaybleCommandsQueue.push(e):this.processCommand(e)},com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.prototype.chat=null,com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler,com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler.XFORM_SERVER_PLACEHOLDER="${xformsServerUrl}"}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CONTINUE_TRANSITION)},$hxClasses["com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler"]=com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler,com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler.__name__=["com","inq","flash","client","control","messagehandlers","ContinueTransitionHandler"],com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler.prototype.processMessage=function(e){this.getController().acknowledgeChatActive()},com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.CommandMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_COMMAND)},$hxClasses["com.inq.flash.client.control.messagehandlers.CommandMessageHandler"]=com.inq.flash.client.control.messagehandlers.CommandMessageHandler,com.inq.flash.client.control.messagehandlers.CommandMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","CommandMessageHandler"],com.inq.flash.client.control.messagehandlers.CommandMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.CommandMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.CommandMessageHandler.prototype.processMessage=function(e){e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CLIENT_COMMAND),this.getController().processMessage(e)},com.inq.flash.client.control.messagehandlers.CommandMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.CommandMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.ErrorHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_ERROR)},$hxClasses["com.inq.flash.client.control.messagehandlers.ErrorHandler"]=com.inq.flash.client.control.messagehandlers.ErrorHandler,com.inq.flash.client.control.messagehandlers.ErrorHandler.__name__=["com","inq","flash","client","control","messagehandlers","ErrorHandler"],com.inq.flash.client.control.messagehandlers.ErrorHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.ErrorHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.ErrorHandler.prototype.processMessage=function(e){haxe.Log.trace("MessageHandler: "+e.getProperty(com.inq.flash.client.data.MessageFields.KEY_ERROR_MSG),{fileName:"ErrorHandler.hx",lineNumber:15,className:"com.inq.flash.client.control.messagehandlers.ErrorHandler",methodName:"processMessage"})},com.inq.flash.client.control.messagehandlers.ErrorHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.ErrorHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_STATE_CHANGE)},$hxClasses["com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler"]=com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler,com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler.__name__=["com","inq","flash","client","control","messagehandlers","StateChangeMessageHandler"],com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler.prototype.processMessage=function(e){var t=e.getMessageType();switch(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_STATE)){case com.inq.flash.client.data.MessageFields.DATA_STATE_QUEUED:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_NEED_WAIT);break;case com.inq.flash.client.data.MessageFields.DATA_STATE_ASSIGNED:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACCEPTED);var n=this.getController().webOpenerLinkHref;n&&(window.parent.location.href=n);break;case com.inq.flash.client.data.MessageFields.DATA_STATE_CLOSED:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT);break;case com.inq.flash.client.data.MessageFields.DATA_STATE_TRANSFER:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_TRANSFER_RESPONSE);break;case com.inq.flash.client.data.MessageFields.DATA_STATE_CONFERENCE:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_OWNER_TRANSFER_RESPONSE);break;case com.inq.flash.client.data.MessageFields.DATA_STATE_AGENT_IS_TYPING:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACTIVITY);break;case com.inq.flash.client.data.MessageFields.DATA_STATE_MOVED_TO_ASYNC:e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_AUTHENTICATED_USER_RESPONSE)}t!=e.getMessageType()&&this.getController().processMessage(e)},com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler}(),function(){for(var e in com.inq.flash.client.control.messagehandlers.TypingActivityHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACTIVITY),this.sAgentIsTyping=com.inq.utils.Util.getConfig("sAgentIsTyping","Agent is typing"),this.sAgentStoppedTyping=com.inq.utils.Util.getConfig("sAgentStoppedTyping","Agent stopped typing")},$hxClasses["com.inq.flash.client.control.messagehandlers.TypingActivityHandler"]=com.inq.flash.client.control.messagehandlers.TypingActivityHandler,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.__name__=["com","inq","flash","client","control","messagehandlers","TypingActivityHandler"],com.inq.flash.client.control.messagehandlers.TypingActivityHandler.__super__=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype)com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype[e]=com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.prototype[e];com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.processMessage=function(e){var t=com.inq.flash.client.chatskins.SkinControl.cw;switch(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TYPE)){case com.inq.flash.client.data.MessageFields.ACTIVITY_AGENT_TYPING:null!=t&&t.addTranscript("",this.sAgentIsTyping,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM_STATUS,-1);break;case com.inq.flash.client.data.MessageFields.ACTIVITY_AGENT_STOPPED_TYPING:null!=t&&t.addTranscript("",this.sAgentStoppedTyping,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM_STATUS,-1);break;case com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_TYPING:com.inq.flash.client.chatskins.SkinControl.userWasTyping=!0;break;case com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_STOPS_TYPING:com.inq.flash.client.chatskins.SkinControl.userWasTyping=!1}com.inq.flash.client.chatskins.FormMgr.updateFormTimeExecutor(t)},com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.sAgentIsTyping=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.sAgentStoppedTyping=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.isEnabled=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.needwaitPeriod=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.needwaitMessage=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.needwaitMessageFirst=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.cntMessage=null,com.inq.flash.client.control.messagehandlers.TypingActivityHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.TypingActivityHandler}(),com.inq.flash.messagingframework.Message=function(){this.data={},this.data[com.inq.flash.client.data.MessageFields.KEY_VERSION]="0.05",this.data[com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM]=com.inq.flash.client.control.FlashVars.getWindowId(),this.initialDataIndex=0},$hxClasses["com.inq.flash.messagingframework.Message"]=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.__name__=["com","inq","flash","messagingframework","Message"],com.inq.flash.messagingframework.Message.prototype.toString=function(){for(var e="",t=com.inq.utils.Util.fields(this.data),n=0,s=t.length;n<s;){var i=t[n++];if(""!=i){var a="";try{null!=this.data[i]&&(a=i+"="+this.data[i]+"\n")}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("bad key: "+i+" error: "+Std.string(e),{fileName:"Message.js",lineNumber:79,className:"com.inq.flash.messagingframework.Message",methodName:"toString"})}e+=a}}return e+"\n"},com.inq.flash.messagingframework.Message.prototype.serializeToURL=function(){var e="";for(var t in this.data)if(t){var n=this.data[t];null!=n&&"function"!=typeof n&&(e+="&"+t+"="+encodeURIComponent(n.toString()))}return e},com.inq.flash.messagingframework.Message.prototype.getMessageType=function(){return this.data[com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TYPE]},com.inq.flash.messagingframework.Message.prototype.isMessageType=function(e){return e===this.getMessageType()},com.inq.flash.messagingframework.Message.prototype.isChatAccepted=function(){return this.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_STATE_CHANGE)&&com.inq.flash.client.data.MessageFields.DATA_STATE_ASSIGNED===this.getProperty(com.inq.flash.client.data.MessageFields.KEY_STATE)||this.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACCEPTED)},com.inq.flash.messagingframework.Message.prototype.isChatTransfer=function(){return this.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_STATE_CHANGE)&&com.inq.flash.client.data.MessageFields.DATA_STATE_TRANSFER===this.getProperty(com.inq.flash.client.data.MessageFields.KEY_STATE)||this.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_TRANSFER_RESPONSE)},com.inq.flash.messagingframework.Message.prototype.isChatConference=function(){return this.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_STATE_CHANGE)&&com.inq.flash.client.data.MessageFields.DATA_STATE_CONFERENCE===this.getProperty(com.inq.flash.client.data.MessageFields.KEY_STATE)||this.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_OWNER_TRANSFER_RESPONSE)},com.inq.flash.messagingframework.Message.prototype.getProperty=function(e){return this.data[e]},com.inq.flash.messagingframework.Message.prototype.getPropertyAsDate=function(e){var t=parseInt(this.getProperty(e));return isNaN(t)?null:new Date(t)},com.inq.flash.messagingframework.Message.prototype.getPropertyAsBoolean=function(e){var t=this.getProperty(e);return!!t&&("boolean"==typeof t?t:com.inq.flash.messagingframework.StringUtils.getBooleanValue(t))},com.inq.flash.messagingframework.Message.prototype.addProperty=function(e,t){this.data[e]=t},com.inq.flash.messagingframework.Message.prototype.addPropertyIfNotNull=function(e,t){null!=t&&(this.data[e]=t)},com.inq.flash.messagingframework.Message.prototype.nextInitialDataIndex=function(){return this.initialDataIndex++},com.inq.flash.messagingframework.Message.prototype.setData=function(e){if("object"==typeof e)this.data=e;else if("string"==typeof e)for(var t=e.split("\n"),n=0;n<t.length;n++)this.addProperty(t[n].slice(0,t[n].indexOf("=")),t[n].slice(t[n].indexOf("=")+1))},com.inq.flash.messagingframework.Message.prototype.setMessageType=function(e){this.data[com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TYPE]=e},com.inq.flash.messagingframework.Message.prototype.setPropertyIfNotNullIfExists=function(e,t){this.getProperty(e)&&this.addPropertyIfNotNull(e,t)},com.inq.flash.messagingframework.Message.prototype.getPropertyValue=com.inq.flash.messagingframework.Message.prototype.getProperty,com.inq.flash.messagingframework.Message.prototype.getPropertyValueAsBoolean=com.inq.flash.messagingframework.Message.prototype.getPropertyAsBoolean,com.inq.flash.messagingframework.Message.prototype.postSend=null,com.inq.flash.messagingframework.Message.prototype.data=null,com.inq.flash.messagingframework.Message.prototype.initialDataIndex=null,com.inq.flash.messagingframework.Message.prototype.__class__=com.inq.flash.messagingframework.Message,com.inq.flash.client.chatskins.CoBrowseMgr=function(){},com.inq.flash.client.chatskins.CoBrowseMgr.init=function(){function e(e){return com.inq.flash.client.control.FlashPeer.getLocalizedMessage(e)}com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsCobrowse=e("customerAcceptsCobrowse"),com.inq.flash.client.chatskins.CoBrowseMgr.customerDeclinesCobrowse=e("customerDeclinesCobrowse"),com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsSharedControl=e("customerAcceptsSharedControl"),com.inq.flash.client.chatskins.CoBrowseMgr.customerDeclinesSharedControl=e("customerDeclinesSharedControl"),com.inq.flash.client.chatskins.CoBrowseMgr.customerEndCobrowseSession=e("customerEndCobrowseSession"),com.inq.flash.client.chatskins.CoBrowseMgr.agentEndCobrowseSession=e("agentEndCobrowseSession"),com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseUnexpectedFail=e("cobrowseUnexpectedFail"),com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseSuppressed=e("cobrowseSuppressed"),com.inq.flash.client.chatskins.CoBrowseMgr.notSupportedBrowser="CoBrowse cannot be accepted because the client browser is not supported.",com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseTestSuccess=com.inq.utils.Util.getConfig("cobrowseTestSuccessMsg",e("cobrowseTestSuccess")),com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseTestFail=com.inq.utils.Util.getConfig("cobrowseTestFailMsg",e("cobrowseTestFail")),com.inq.flash.client.control.FlashPeer.setCiFunction("ciAcceptCobInv",com.inq.flash.client.chatskins.CoBrowseMgr.acceptCobInv),com.inq.flash.client.control.FlashPeer.setCiFunction("ciDeclineCobInv",com.inq.flash.client.chatskins.CoBrowseMgr.declineCobInv),com.inq.flash.client.control.FlashPeer.setCiFunction("ciAcceptCobShareInv",com.inq.flash.client.chatskins.CoBrowseMgr.acceptCobShareInv),com.inq.flash.client.control.FlashPeer.setCiFunction("ciDeclineCobShareInv",com.inq.flash.client.chatskins.CoBrowseMgr.declineCobShareInv),com.inq.flash.client.control.FlashPeer.setCiFunction("ciCheckCobrowseMgrAvalibility",(function(){return!0})),com.inq.flash.client.control.FlashPeer.setCiFunction("ciAgentEndsCob",com.inq.flash.client.chatskins.CoBrowseMgr.agentEndsCob),com.inq.flash.client.control.FlashPeer.setCiFunction("ciSendCobrowseEnded",com.inq.flash.client.chatskins.CoBrowseMgr.sendCobrowseEnded),com.inq.flash.client.control.FlashPeer.setCiFunction("ciSendMessageQuietly",com.inq.flash.client.chatskins.CoBrowseMgr.sendMessageQuietly),com.inq.flash.client.control.FlashPeer.setCiFunction("ciFocusCobEndBtn",com.inq.flash.client.chatskins.CoBrowseMgr.focusCobEndBtn),com.inq.flash.client.control.FlashPeer.setCiFunction("ciCobrowseSuppressedPage",com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseSuppressedPage),com.inq.flash.client.control.FlashPeer.setCiFunction("ciCobrowseFailHandler",com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseFailHandler),com.inq.flash.client.control.FlashPeer.setCiFunction("ciSendResultOfBenchmarkTest",com.inq.flash.client.chatskins.CoBrowseMgr.sendResultOfBenchmarkTest),com.inq.flash.client.control.FlashPeer.setCiFunction("ciSetFocusOnChatInputField",com.inq.flash.client.chatskins.CoBrowseMgr.setFocusOnChatInputField),com.inq.flash.client.control.FlashPeer.setCiFunction("ciGetCobEndButtonID",com.inq.flash.client.chatskins.CoBrowseMgr.getCobEndButtonID),com.inq.utils.Util.publish("ciAcceptCobInv",com.inq.flash.client.chatskins.CoBrowseMgr.acceptCobInv),com.inq.utils.Util.publish("ciDeclineCobInv",com.inq.flash.client.chatskins.CoBrowseMgr.declineCobInv),com.inq.utils.Util.publish("ciAcceptCobShareInv",com.inq.flash.client.chatskins.CoBrowseMgr.acceptCobShareInv),com.inq.utils.Util.publish("ciDeclineCobShareInv",com.inq.flash.client.chatskins.CoBrowseMgr.declineCobShareInv),com.inq.utils.Util.publish("ciActionBtnCloseChat",com.inq.flash.client.chatskins.CoBrowseMgr.closeChat),com.inq.utils.Util.publish("ciActionRestoreAndExitChat",com.inq.flash.client.chatskins.CoBrowseMgr.restoreAndExitChat),com.inq.utils.Util.publish("com.inq.flash.client.chatskins.CoBrowseMgr.stopCob",com.inq.flash.client.chatskins.CoBrowseMgr.stopCob),com.inq.utils.Util.publish("com.inq.flash.client.chatskins.CoBrowseMgr.sendCobrowseEnded",com.inq.flash.client.chatskins.CoBrowseMgr.sendCobrowseEnded),com.inq.utils.Util.publish("com.inq.flash.client.chatskins.CoBrowseMgr.setFocusOnChatInputField",com.inq.flash.client.chatskins.CoBrowseMgr.setFocusOnChatInputField),com.inq.flash.client.chatskins.CoBrowseMgr.cobEndButtonID=com.inq.utils.Util.getConfig("cobEndButtonID","tcChat_cobend"),com.inq.flash.client.chatskins.CoBrowseMgr.btnCobEndHTML=com.inq.utils.Util.getConfig("cobEndButton",""),Inq&&Inq.CBC&&"function"==typeof Inq.CBC.resetCSQ&&Inq.CBC.resetCSQ()},com.inq.flash.client.chatskins.CoBrowseMgr.getCobEndButtonID=function(){return com.inq.flash.client.chatskins.CoBrowseMgr.cobEndButtonID},com.inq.flash.client.chatskins.CoBrowseMgr.ariaCobStart=function(e){var t=com.inq.flash.client.chatskins.CoBrowseMgr;t.addCobEndButton(),!0!==com.inq.flash.client.control.MinimizeManager.minimized&&com.inq.flash.client.chatskins.SkinControl.hideModalWindow(!1),com.inq.utils.Capabilities.isPhone()&&"1"!=e&&window.setTimeout((function(){t.focusMinimizedBtn()}),5e3)},com.inq.flash.client.chatskins.CoBrowseMgr.ariaCobEnd=function(){com.inq.flash.client.chatskins.CoBrowseMgr.removeCobEndButton(),!0!==com.inq.flash.client.control.MinimizeManager.minimized&&com.inq.flash.client.chatskins.SkinControl.hideModalWindow(!0)},com.inq.flash.client.chatskins.CoBrowseMgr.addCobEndButton=function(){if(com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&null==document.getElementById(com.inq.flash.client.chatskins.CoBrowseMgr.cobEndButtonID)){var e=document.createElement("div");e.innerHTML=com.inq.flash.client.chatskins.CoBrowseMgr.btnCobEndHTML;var t=document.getElementById("chat");t&&t.appendChild(e)}com.inq.aria.AriaMsg.addAriaMsg(com.inq.utils.Util.getConfig("cobSessionStartMsg","You're being assisted"))},com.inq.flash.client.chatskins.CoBrowseMgr.closeChat=function(e){com.inq.flash.client.chatskins.SkinControl.actionBtnCloseChat(e)},com.inq.flash.client.chatskins.CoBrowseMgr.restoreAndExitChat=function(e){com.inq.flash.client.chatskins.SkinControl.actionRestoreAndExitChat(e)},com.inq.flash.client.chatskins.CoBrowseMgr.removeCobEndButton=function(){var e=document.getElementById(com.inq.flash.client.chatskins.CoBrowseMgr.cobEndButtonID);if(null!=e)try{var t=e.parentNode;t.parentNode.removeChild(t)}catch(t){e.parentNode.style.display="none"}},com.inq.flash.client.chatskins.CoBrowseMgr.stopCob=function(){Inq.CBC&&(Inq.CBC.stop(),com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&Application.application.setFocusOnInputField())},com.inq.flash.client.chatskins.CoBrowseMgr.setFocusOnChatInputField=function(){com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&com.inq.utils.Util.isIE||Application.application.setFocusOnInputField()},com.inq.flash.client.chatskins.CoBrowseMgr.sendResultOfBenchmarkTest=function(e){Application.application.applicationController.sendCoBrowseMessageQuietly(e,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_PERFORMANCE_TEST)},com.inq.flash.client.chatskins.CoBrowseMgr._isConnectionExist=function(){try{return Application.application.applicationController.isConnected()}catch(e){return!1}},com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseFailHandler=function(e){e||(e=com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseUnexpectedFail),com.inq.flash.client.control.FlashPeer.isCobrowseEngaged()&&com.inq.flash.client.control.FlashPeer.endCob();var t=!1;return com.inq.flash.client.chatskins.CoBrowseMgr._isConnectionExist()&&(Application.application.applicationController.sendCoBrowseMessageQuietly(e,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_END),t=!0),t},com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseSuppressedPage=function(){return!!com.inq.flash.client.chatskins.CoBrowseMgr._isConnectionExist()&&(Application.application.applicationController.sendCoBrowseMessageQuietly(com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseSuppressed,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_SUPPRESSED),!0)},com.inq.flash.client.chatskins.CoBrowseMgr.getCobrowseEnableHighlight=function(){try{return Inq.getEnableHighlight()}catch(e){return haxe.Log.trace(e,{fileName:"CobrowseMgr.js",lineNumber:160,className:"com.inq.flash.client.chatskins.CoBrowseMgr",methodName:"getCobrowseEnableHighlight"}),!0}},com.inq.flash.client.chatskins.CoBrowseMgr.getCobrowseEnableMinimizeRestore=function(){try{if(com.inq.utils.Capabilities.isMobile()&&com.inq.flash.client.control.FlashPeer.getCobrowseEnableMinimizeRestore())return!0}catch(e){haxe.Log.trace(e,{fileName:"CobrowseMgr.js",lineNumber:212,className:"com.inq.flash.client.chatskins.CoBrowseMgr",methodName:"getCobrowseEnableMinimizeRestore"})}return!1},com.inq.flash.client.chatskins.CoBrowseMgr.showCobBanner=function(){!com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&Inq.CBC&&(Inq.CBC.showBanner(),window.setTimeout(com.inq.flash.client.chatskins.CoBrowseMgr.focusCobEndBtn,500))},com.inq.flash.client.chatskins.CoBrowseMgr.focusCobEndBtn=function(){var e=com.inq.ui.Container._getElementById("tcChat_cobend",window.parent.document);null!=e&&e.focus()},com.inq.flash.client.chatskins.CoBrowseMgr.focusMinimizedBtn=function(){var e=Application.application,t=e.getButton("minimize")||e.getButton("btnMinimize");null!=t&&t.setImageFocus()},com.inq.flash.client.chatskins.CoBrowseMgr.acceptCobInv=function(e){com.inq.flash.client.control.FlashPeer.isCobrowseEngaged()||com.inq.flash.client.chatskins.CoBrowseMgr.isSupportedBrowser()&&(Application.application.applicationController.sendCoBrowseMessage(com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsCobrowse,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT,com.inq.flash.client.chatskins.CoBrowseMgr.getCobrowseEnableHighlight(),com.inq.flash.client.chatskins.CoBrowseMgr.getCobrowseEnableMinimizeRestore()),com.inq.flash.client.chatskins.CoBrowseMgr.showCobBanner(),com.inq.flash.client.control.FlashPeer.acceptCobInvSafe(e))},com.inq.flash.client.chatskins.CoBrowseMgr.declineCobInv=function(e){var t=com.inq.utils.Capabilities;(t.isIphone()||t.isIpad())&&e&&e.preventDefault(),Application.application.setTextFieldfocus(),com.inq.flash.client.control.FlashPeer.isCobrowseEngaged()||Application.application.applicationController.sendCoBrowseMessage(com.inq.flash.client.chatskins.CoBrowseMgr.customerDeclinesCobrowse,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_DECLINE)},com.inq.flash.client.chatskins.CoBrowseMgr.acceptCobShareInv=function(e){com.inq.flash.client.control.FlashPeer.isCobrowseSharedControl()||com.inq.flash.client.chatskins.CoBrowseMgr.isSupportedBrowser()&&(Application.application.applicationController.sendCoBrowseMessage(com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsSharedControl,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT_SHARE,com.inq.flash.client.chatskins.CoBrowseMgr.getCobrowseEnableHighlight(),com.inq.flash.client.chatskins.CoBrowseMgr.getCobrowseEnableMinimizeRestore()),com.inq.flash.client.chatskins.CoBrowseMgr.showCobBanner(),com.inq.flash.client.control.FlashPeer.acceptCobShareInv(e))},com.inq.flash.client.chatskins.CoBrowseMgr.declineCobShareInv=function(e){var t=com.inq.utils.Capabilities;(t.isIphone()||t.isIpad())&&e&&e.preventDefault(),Application.application.setTextFieldfocus(),com.inq.flash.client.control.FlashPeer.isCobrowseSharedControl()||Application.application.applicationController.sendCoBrowseMessage(com.inq.flash.client.chatskins.CoBrowseMgr.customerDeclinesSharedControl,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_DECLINE_SHARE)},com.inq.flash.client.chatskins.CoBrowseMgr.endCob=function(){com.inq.flash.client.control.FlashPeer.isCobrowseEngaged()&&(com.inq.flash.client.chatskins.CoBrowseMgr.sendCobrowseEnded(),com.inq.flash.client.control.FlashPeer.endCob())},com.inq.flash.client.chatskins.CoBrowseMgr.agentEndsCob=function(){Application.application.applicationController.sendCoBrowseMessage(com.inq.flash.client.chatskins.CoBrowseMgr.agentEndCobrowseSession,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_END_MESSAGE_FROM_CI),com.inq.flash.client.control.FlashPeer.endCob()},com.inq.flash.client.chatskins.CoBrowseMgr.endCobByEtlEvent=function(e){com.inq.flash.client.control.FlashPeer.isCobrowseEngaged()&&com.inq.flash.client.control.FlashPeer.endCobByEtlEvent(e)},com.inq.flash.client.chatskins.CoBrowseMgr.sendCobrowseEnded=function(){Application.application.applicationController.sendCoBrowseMessage(com.inq.flash.client.chatskins.CoBrowseMgr.customerEndCobrowseSession,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_END)},com.inq.flash.client.chatskins.CoBrowseMgr.sendMessageQuietly=function(e){Application.application.applicationController.sendCoBrowseMessageQuietly(e,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT)},com.inq.flash.client.chatskins.CoBrowseMgr.isSupportedBrowser=function(){var e=!0;try{var t=com.inq.flash.client.control.FlashPeer.getBrowserTypeAndVersion(),n=t[0],s=t[1];"MSIE"===n&&parseInt(s.split(".")[0])<=9&&(e=!1)}catch(t){e=!1}return!1===e&&Application.application.applicationController.sendCoBrowseMessageQuietly(com.inq.flash.client.chatskins.CoBrowseMgr.notSupportedBrowser,com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_END),e},com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsCobrowse=null,com.inq.flash.client.chatskins.CoBrowseMgr.customerDeclinesCobrowse=null,com.inq.flash.client.chatskins.CoBrowseMgr.customerAcceptsSharedControl=null,com.inq.flash.client.chatskins.CoBrowseMgr.customerDeclinesSharedControl=null,com.inq.flash.client.chatskins.CoBrowseMgr.customerEndCobrowseSession=null,com.inq.flash.client.chatskins.CoBrowseMgr.agentEndCobrowseSession=null,com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseUnexpectedFail=null,com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseSuppressed=null,com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseTestSuccess=null,com.inq.flash.client.chatskins.CoBrowseMgr.cobrowseTestFail=null,com.inq.flash.client.data||(com.inq.flash.client.data={}),function(){for(var e in com.inq.flash.client.data.ChatCommunicationMessage=function(e,t,n){var s="";if(com.inq.flash.messagingframework.Message.call(this),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e.getChatID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA,t),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"1"),n&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME,e.getUsername()),null!=t){if(t.toLowerCase()===com.inq.flash.client.data.MessageFields.KEY_CHAT_INFO){var i=com.inq.flash.client.control.FlashPeer.getBusinessUnitDisplayName()||com.inq.flash.client.control.FlashPeer.getBusinessUnitName()||"",a=com.inq.flash.client.control.FlashPeer.getAgentGroupDisplayName()||com.inq.flash.client.control.FlashPeer.getAgentGroupName()||"";s+="Chat Info<br/>Engagement ID: "+e.getChatID()+"<br/>Agent ID: "+com.inq.flash.client.control.FlashPeer.getAgentID()+"<br/>Business Unit: "+i+"<br/>Agent Group: "+a+"<br/>Business Rule: "+com.inq.flash.client.control.FlashPeer.getBrName()+"<br/>Page Marker: "+com.inq.flash.client.control.FlashPeer.getPageMarker()}else if(t.toLowerCase().startsWith(com.inq.flash.client.data.MessageFields.KEY_SWITCH_DEBUG)){var o=t.substring(com.inq.flash.client.data.MessageFields.KEY_SWITCH_DEBUG.length+1).split(":");s=com.inq.flash.client.control.FlashPeer.debugSwitchForModule(o[0],com.inq.flash.messagingframework.StringUtils.getBooleanValue(o[1]))?"Switched debugging logs for module "+o[0]+" to "+o[1]:"Debug wasn't enabled, because module:"+o[0]+" is absent or value:"+o[1]+" isn't boolean"}s&&com.inq.flash.client.chatskins.SkinControl.AddTranscriptItemToChatWindow("",s,com.inq.flash.client.chatskins.ChatTextArea.SYSTEM,-1)}},$hxClasses["com.inq.flash.client.data.ChatCommunicationMessage"]=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationMessage.__name__=["com","inq","flash","client","data","ChatCommunicationMessage"],com.inq.flash.client.data.ChatCommunicationMessage.__super__=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatCommunicationMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatCommunicationMessage.prototype.__class__=com.inq.flash.client.data.ChatCommunicationMessage}(),function(){for(var e in com.inq.flash.client.data.CallCommunicationMessage=function(e,t){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CALL_ENABLED,"true")},$hxClasses["com.inq.flash.client.data.CallCommunicationMessage"]=com.inq.flash.client.data.CallCommunicationMessage,com.inq.flash.client.data.CallCommunicationMessage.__name__=["com","inq","flash","client","data","CallCommunicationMessage"],com.inq.flash.client.data.CallCommunicationMessage.__super__=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationMessage.prototype)com.inq.flash.client.data.CallCommunicationMessage.prototype[e]=com.inq.flash.client.data.ChatCommunicationMessage.prototype[e];com.inq.flash.client.data.CallCommunicationMessage.prototype.__class__=com.inq.flash.client.data.CallCommunicationMessage}(),com.inq.flash.client.data.Chat=function(){this.transcript=new Array,this.chatID=com.inq.flash.client.control.FlashVars.getValue("chatID"),this.siteID=com.inq.flash.client.control.FlashVars.getValue("siteID"),this.restoreChatEnagageParams(),this.agentName=null==com.inq.flash.client.control.FlashVars.getValue("agentName")||"null"==com.inq.flash.client.control.FlashVars.getValue("agentName")||""==StringTools.trim(com.inq.flash.client.control.FlashVars.getValue("agentName"))?"Jessica":com.inq.flash.client.control.FlashVars.getValue("agentName"),this.useAgentAlias=com.inq.flash.client.control.FlashVars.getValue("useAgentAlias"),this.overrideChatTheme=com.inq.flash.client.control.FlashVars.getValue("overrideChatTheme"),this.scriptID=com.inq.flash.client.control.FlashVars.getValue("scriptID"),this.chatTitle=com.inq.flash.client.control.FlashVars.getValue("chatTitle"),this.brID=com.inq.flash.client.control.FlashVars.getValue("brID"),this.uniqueAgentName=com.inq.flash.client.control.FlashVars.getValue("uniqueAgentName"),this.publicUserId=com.inq.flash.client.control.FlashVars.getValue("publicUserId"),this.language=com.inq.flash.client.control.FlashVars.getValue("language"),this.launchPageMarker=com.inq.flash.client.control.FlashVars.getValue("launchPageMarker"),this.launchPageId=com.inq.flash.client.control.FlashVars.getValue("launchPageId"),this.launchType=com.inq.flash.client.control.FlashVars.getValue("launchType"),this.deviceType=com.inq.flash.client.control.FlashVars.getValue("deviceType"),this.browserType=com.inq.flash.client.control.FlashVars.getValue("browserType"),this.browserVersion=com.inq.flash.client.control.FlashVars.getValue("browserVersion"),this.operatingSystemType=com.inq.flash.client.control.FlashVars.getValue("operatingSystemType"),this.incAssignmentID=com.inq.flash.client.control.FlashVars.getValue("incAssignmentID"),this.sessionID=com.inq.flash.client.control.FlashVars.getValue("sessionID"),this.thisCustomerID=com.inq.flash.client.control.FlashVars.getValue("customerID"),this.queueThreshold=com.inq.flash.client.control.FlashVars.getValue("qt"),this.fallbackAgentGroupEnabled=com.inq.flash.client.control.FlashVars.getValue("config.fallback-agent-group-enabled"),this.thisParticipantName=com.inq.flash.client.control.FlashVars.getCustomerName(),this.asyncChat=!!parseInt(com.inq.flash.client.control.FlashVars.getValue("asyncChat")),this.sendChatRequestOnDemand=!!parseInt(com.inq.flash.client.control.FlashVars.getValue("sendChatRequestOnDemand")),this.userObject=com.inq.flash.client.control.FlashVars.getValue("userObject"),null!=com.inq.flash.client.control.FlashVars.getValue("agentAttributes")&&(this.agentAttributes=com.inq.flash.client.control.FlashVars.getValue("agentAttributes")),null!=com.inq.flash.client.control.FlashVars.getValue("ruleAttributes")&&(this.ruleAttributes=com.inq.flash.client.control.FlashVars.getValue("ruleAttributes")),null!=com.inq.flash.client.control.FlashVars.getValue("automatonId")&&(this.automatonId=com.inq.flash.client.control.FlashVars.getValue("automatonId"),this.automatonFields=com.inq.flash.client.control.FlashVars.getValue("automatonFields")),null!=com.inq.flash.client.control.FlashVars.getValue("externalCustomerIDs")&&(this.externalCustomerIDs=com.inq.flash.client.control.FlashVars.getValue("externalCustomerIDs")),this.asyncChat&&null!=com.inq.flash.client.control.FlashVars.getValue("asyncSurveySpecID")&&(this.asyncSurveySpecID=com.inq.flash.client.control.FlashVars.getValue("asyncSurveySpecID")),null!=com.inq.flash.client.control.FlashVars.getValue("pushNotificationDeviceID")&&(this.pushNotificationDeviceID=com.inq.flash.client.control.FlashVars.getValue("pushNotificationDeviceID")),null!=com.inq.flash.client.control.FlashVars.getValue("showOpenerForEndedConversation")&&(this.showOpenerForEndedConversation=com.inq.flash.client.control.FlashVars.getBooleanValue("showOpenerForEndedConversation")),null!=com.inq.flash.client.control.FlashVars.getValue("ciEnabledOnResolve")&&(this.ciEnabledOnResolve=com.inq.flash.client.control.FlashVars.getBooleanValue("ciEnabledOnResolve")),null!=com.inq.flash.client.control.FlashVars.getValue("asyncReconnect")&&(this.asyncReconnect=com.inq.flash.client.control.FlashVars.getBooleanValue("asyncReconnect")),this.asyncChat&&null!=com.inq.flash.client.control.FlashVars.getValue("createNewConversation")&&(this.createNewConversation=com.inq.flash.client.control.FlashVars.getBooleanValue("createNewConversation")),this.setRoutingAllocSpecs(com.inq.flash.client.control.FlashVars.getValue("routingAllocSpecs")),this.hasAuthorized=!1},$hxClasses["com.inq.flash.client.data.Chat"]=com.inq.flash.client.data.Chat,com.inq.flash.client.data.Chat.__name__=["com","inq","flash","client","data","Chat"],com.inq.flash.client.data.Chat.prototype.restoreChatEnagageParams=function(){var e=com.inq.flash.client.control.PersistenceManager.GetValue(ENGAGE_CHAT_PARAMS,{});e[BUSINESS_UNIT_ID]?this.businessUnitID=e[BUSINESS_UNIT_ID]:this.businessUnitID=com.inq.flash.client.control.FlashVars.getValue("businessUnitID"),e[AGENT_GROUP_ID]?this.agId=e[AGENT_GROUP_ID]:this.agId=com.inq.flash.client.control.FlashVars.getValue("agID")},com.inq.flash.client.data.Chat.prototype.setHasAuthorized=function(e){this.hasAuthorized=e},com.inq.flash.client.data.Chat.prototype.isAsyncChat=function(){return this.asyncChat},com.inq.flash.client.data.Chat.prototype.setAsyncChat=function(e){this.asyncChat=e},com.inq.flash.client.data.Chat.prototype.getUserObject=function(){return this.userObject},com.inq.flash.client.data.Chat.prototype.getAsyncSurveySpecID=function(){return this.asyncSurveySpecID},com.inq.flash.client.data.Chat.prototype.isSendChatRequestOnDemand=function(){return this.sendChatRequestOnDemand},com.inq.flash.client.data.Chat.prototype.getHasAuthorized=function(){return this.hasAuthorized},com.inq.flash.client.data.Chat.prototype.isCiEnabledOnResolve=function(){return this.ciEnabledOnResolve},com.inq.flash.client.data.Chat.prototype.isAsyncReconnect=function(){return this.asyncReconnect},com.inq.flash.client.data.Chat.prototype.setAsyncReconnect=function(e){this.asyncReconnect=e},com.inq.flash.client.data.Chat.prototype.isCreateNewConversation=function(){return this.createNewConversation},com.inq.flash.client.data.Chat.prototype.toString=function(){return"Chat["+this.chatID+"]: site-"+this.siteID+", buID-"+this.businessUnitID+", agentName-"+this.agentName+", scriptID="+this.scriptID+", customerID-"+this.thisCustomerID+", chatTitle-"+this.chatTitle+", brID-"+this.brID},com.inq.flash.client.data.Chat.prototype.addTextToTranscript=function(e,t){var n=new com.inq.flash.messagingframework.TranscriptEntry;null!=t&&(t=""),n.setData(e),""==t?n.setType("sent.message"):(n.setType("received.message"),n.setSender(t)),this.transcript.push(n)},com.inq.flash.client.data.Chat.prototype.setAutomatonId=function(e){this.automatonId=e},com.inq.flash.client.data.Chat.prototype.setAutomatonFields=function(e){this.automatonFields=e},com.inq.flash.client.data.Chat.prototype.getAutomatonFields=function(){return this.automatonFields},com.inq.flash.client.data.Chat.prototype.setRuleAttributes=function(e){this.ruleAttributes=e},com.inq.flash.client.data.Chat.prototype.setAgentAttributes=function(e){this.agentAttributes=e},com.inq.flash.client.data.Chat.prototype.getLanguage=function(){return this.language},com.inq.flash.client.data.Chat.prototype.getExternalCustomerIDs=function(){return this.externalCustomerIDs},com.inq.flash.client.data.Chat.prototype.getOperatingSystemType=function(){return this.operatingSystemType},com.inq.flash.client.data.Chat.prototype.getBrowserVersion=function(){return this.browserVersion},com.inq.flash.client.data.Chat.prototype.getBrowserType=function(){return this.browserType},com.inq.flash.client.data.Chat.prototype.getDeviceType=function(){return this.deviceType},com.inq.flash.client.data.Chat.prototype.getLaunchType=function(){return this.launchType},com.inq.flash.client.data.Chat.prototype.getLaunchPageMarker=function(){return this.launchPageMarker},com.inq.flash.client.data.Chat.prototype.getLaunchPageId=function(){return this.launchPageId},com.inq.flash.client.data.Chat.prototype.getBrID=function(){return this.brID},com.inq.flash.client.data.Chat.prototype.setBusinessUnitID=function(e){this.businessUnitID=e},com.inq.flash.client.data.Chat.prototype.setAgentGroupID=function(e){this.agId=e},com.inq.flash.client.data.Chat.prototype.getAgentGroupID=function(){return this.agId},com.inq.flash.client.data.Chat.prototype.setPublicUserId=function(e){this.publicUserId=e},com.inq.flash.client.data.Chat.prototype.getPublicUserId=function(){return this.publicUserId},com.inq.flash.client.data.Chat.prototype.getUniqueAgentName=function(){return this.uniqueAgentName},com.inq.flash.client.data.Chat.prototype.setAgentName=function(e){this.agentName=e},com.inq.flash.client.data.Chat.prototype.getAutomatonId=function(){return this.automatonId},com.inq.flash.client.data.Chat.prototype.getRuleAttributes=function(){return this.ruleAttributes},com.inq.flash.client.data.Chat.prototype.getVisitorAttributes=function(){return com.inq.flash.client.control.FlashPeer.getVisitorAttributes()},com.inq.flash.client.data.Chat.prototype.getAgentAttributes=function(){return this.agentAttributes},com.inq.flash.client.data.Chat.prototype.getBusinessUnitID=function(){return this.businessUnitID},com.inq.flash.client.data.Chat.prototype.getChatID=function(){return this.chatID},com.inq.flash.client.data.Chat.prototype.getCustomerID=function(){return this.thisCustomerID},com.inq.flash.client.data.Chat.prototype.getSessionId=function(){return this.sessionID},com.inq.flash.client.data.Chat.prototype.getIncAssignmentId=function(){return this.incAssignmentID},com.inq.flash.client.data.Chat.prototype.getAgentName=function(){return this.agentName},com.inq.flash.client.data.Chat.prototype.getUseAgentAlias=function(){return this.useAgentAlias},com.inq.flash.client.data.Chat.prototype.getOverrideChatTheme=function(){return this.overrideChatTheme},com.inq.flash.client.data.Chat.prototype.getScriptID=function(){return this.scriptID},com.inq.flash.client.data.Chat.prototype.setScriptID=function(e){this.scriptID=e},com.inq.flash.client.data.Chat.prototype.getUsername=function(){return com.inq.flash.client.control.FlashVars.getCustomerName()},com.inq.flash.client.data.Chat.prototype.setUsername=function(e){this.thisParticipantName=e},com.inq.flash.client.data.Chat.prototype.getSiteID=function(){return this.siteID},com.inq.flash.client.data.Chat.prototype.getChatTitle=function(){return this.chatTitle},com.inq.flash.client.data.Chat.prototype.getRoutingAllocSpecs=function(){return this.routingAllocSpecs},com.inq.flash.client.data.Chat.prototype.setRoutingAllocSpecs=function(e){"string"==typeof e&&e.length>0&&(this.routingAllocSpecs=e)},com.inq.flash.client.data.Chat.prototype.setQueueThreshold=function(e){this.queueThreshold=e},com.inq.flash.client.data.Chat.prototype.getQueueThreshold=function(){return this.queueThreshold},com.inq.flash.client.data.Chat.prototype.setChatID=function(e){this.chatID=e},com.inq.flash.client.data.Chat.prototype.setCustomerID=function(e){this.thisCustomerID=e},com.inq.flash.client.data.Chat.prototype.hasAuthorized=null,com.inq.flash.client.data.Chat.prototype.automatonId=null,com.inq.flash.client.data.Chat.prototype.automatonFields=null,com.inq.flash.client.data.Chat.prototype.ruleAttributes=null,com.inq.flash.client.data.Chat.prototype.agentAttributes=null,com.inq.flash.client.data.Chat.prototype.transcript=null,com.inq.flash.client.data.Chat.prototype.thisCustomerID=null,com.inq.flash.client.data.Chat.prototype.thisParticipantName=null,com.inq.flash.client.data.Chat.prototype.sessionID=null,com.inq.flash.client.data.Chat.prototype.incAssignmentID=null,com.inq.flash.client.data.Chat.prototype.operatingSystemType=null,com.inq.flash.client.data.Chat.prototype.browserVersion=null,com.inq.flash.client.data.Chat.prototype.browserType=null,com.inq.flash.client.data.Chat.prototype.deviceType=null,com.inq.flash.client.data.Chat.prototype.launchType=null,com.inq.flash.client.data.Chat.prototype.launchPageMarker=null,com.inq.flash.client.data.Chat.prototype.launchPageId=null,com.inq.flash.client.data.Chat.prototype.brID=null,com.inq.flash.client.data.Chat.prototype.chatTitle=null,com.inq.flash.client.data.Chat.prototype.language=null,com.inq.flash.client.data.Chat.prototype.siteID=null,com.inq.flash.client.data.Chat.prototype.agentName=null,com.inq.flash.client.data.Chat.prototype.scriptID=null,com.inq.flash.client.data.Chat.prototype.businessUnitID=null,com.inq.flash.client.data.Chat.prototype.chatID=null,com.inq.flash.client.data.Chat.prototype.agId=null,com.inq.flash.client.data.Chat.prototype.queueThreshold=null,com.inq.flash.client.data.Chat.prototype.publicUserId=null,com.inq.flash.client.data.Chat.prototype.uniqueAgentName=null,com.inq.flash.client.data.Chat.prototype.routingAllocSpecs=null,com.inq.flash.client.data.Chat.prototype.showOpenerForEndedConversation=!1,com.inq.flash.client.data.Chat.prototype.ciEnabledOnResolve=!1,com.inq.flash.client.data.Chat.prototype.asyncReconnect=!1,com.inq.flash.client.data.Chat.prototype.createNewConversation=!1,com.inq.flash.client.data.Chat.prototype.__class__=com.inq.flash.client.data.Chat,com.inq.flash.client.data.Chat.prototype.BEACON_ACTIVATE="ACTIVATE",com.inq.flash.client.data.Chat.prototype.BEACON_DEACTIVATE="DEACTIVATE";!function(){for(var e in com.inq.flash.client.data.ChatActivityMessage=function(e,t,n,s){com.inq.flash.messagingframework.Message.call(this),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACTIVITY),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e.getChatID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_TYPE,t),null!=n&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA,n),void 0===s&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"1")},$hxClasses["com.inq.flash.client.data.ChatActivityMessage"]=com.inq.flash.client.data.ChatActivityMessage,com.inq.flash.client.data.ChatActivityMessage.__name__=["com","inq","flash","client","data","ChatActivityMessage"],com.inq.flash.client.data.ChatActivityMessage.__super__=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatActivityMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatActivityMessage.prototype.__class__=com.inq.flash.client.data.ChatActivityMessage}(),function(){for(var e in com.inq.flash.client.data.ChatAutomatonElementSetMessage=function(e,t,n,s){com.inq.flash.messagingframework.Message.call(this),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_SETTING),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"1"),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e.getChatID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_STATE,s),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_ID,t),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_TYPE,n)},$hxClasses["com.inq.flash.client.data.ChatAutomatonElementSetMessage"]=com.inq.flash.client.data.ChatAutomatonElementSetMessage,com.inq.flash.client.data.ChatAutomatonElementSetMessage.__name__=["com","inq","flash","client","data","ChatAutomatonElementSetMessage"],com.inq.flash.client.data.ChatAutomatonElementSetMessage.__super__=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatAutomatonElementSetMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatAutomatonElementSetMessage.prototype.__class__=com.inq.flash.client.data.ChatAutomatonElementSetMessage}(),function(){for(var e in com.inq.flash.client.data.ChatAutomatonResponseMessage=function(e,t,n){com.inq.flash.messagingframework.Message.call(this),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_RESPONSE),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e.getChatID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_INC_ASSIGNMENT_ID,e.getIncAssignmentId()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_SESSION_ID,e.getSessionId()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_CUSTOMER_ID,e.getCustomerID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_BUSINESS_UNIT_ID,e.getBusinessUnitID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_SITE_ID,e.getSiteID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_EVENT,t),com.inq.flash.client.control.FlashPeer.getCustGeoData()&&(this.addProperty(com.inq.flash.client.data.MessageFields.KEY_COUNTRY_CODE,com.inq.flash.client.control.FlashPeer.getCustGeoData().country_code),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_REGION_CODE,com.inq.flash.client.control.FlashPeer.getCustGeoData().region_code)),n&&(n.type&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_TYPE,n.type),n.id&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_ID,n.id),n.state&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_STATE,n.state),n.model&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_DATA_MODEL,n.model),n.loggedQuestion&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_DT_QUESTION,n.loggedQuestion),n.answerText&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_DATA,n.answerText))},$hxClasses["com.inq.flash.client.data.ChatAutomatonResponseMessage"]=com.inq.flash.client.data.ChatAutomatonResponseMessage,com.inq.flash.client.data.ChatAutomatonResponseMessage.__name__=["com","inq","flash","client","data","ChatAutomatonResponseMessage"],com.inq.flash.client.data.ChatAutomatonResponseMessage.__super__=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatAutomatonResponseMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatAutomatonResponseMessage.prototype.__class__=com.inq.flash.client.data.ChatAutomatonResponseMessage}(),function(){for(var e in com.inq.flash.client.data.ChatAutomatonDataMapMessage=function(e,t){com.inq.flash.messagingframework.Message.call(this),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_DATA_MAP),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_AUTOMATON_DATA_MAP,t)},$hxClasses["com.inq.flash.client.data.ChatAutomatonDataMapMessage"]=com.inq.flash.client.data.ChatAutomatonDataMapMessage,com.inq.flash.client.data.ChatAutomatonDataMapMessage.__name__=["com","inq","flash","client","data","ChatAutomatonDataMapMessage"],com.inq.flash.client.data.ChatAutomatonDataMapMessage.__super__=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatAutomatonDataMapMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatAutomatonDataMapMessage.prototype.__class__=com.inq.flash.client.data.ChatAutomatonDataMapMessage}(),function(){for(var e in com.inq.flash.client.data.ChatCommunicationCobrowseMessage=function(e,t){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COBROWSE)},$hxClasses["com.inq.flash.client.data.ChatCommunicationCobrowseMessage"]=com.inq.flash.client.data.ChatCommunicationCobrowseMessage,com.inq.flash.client.data.ChatCommunicationCobrowseMessage.__name__=["com","inq","flash","client","data","ChatCommunicationCobrowseMessage"],com.inq.flash.client.data.ChatCommunicationCobrowseMessage.__super__=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationMessage.prototype)com.inq.flash.client.data.ChatCommunicationCobrowseMessage.prototype[e]=com.inq.flash.client.data.ChatCommunicationMessage.prototype[e];com.inq.flash.client.data.ChatCommunicationCobrowseMessage.prototype.__class__=com.inq.flash.client.data.ChatCommunicationCobrowseMessage}(),com.inq.flash.client.data.ChatCommunicationWebCallMessage=function(e,t){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_WEBCALL)},$hxClasses.extend(com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationWebCallMessage,"com.inq.flash.client.data.ChatCommunicationWebCallMessage"),com.inq.flash.client.data.ChatCommunicationWebCallMessage.prototype.__class__=com.inq.flash.client.data.ChatCommunicationWebCallMessage,com.inq.flash.client.data.ChatCommunicationFileUploadMessage=function(e,t){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_FILEUPLOAD)},$hxClasses.extend(com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationFileUploadMessage,"com.inq.flash.client.data.ChatCommunicationFileUploadMessage"),com.inq.flash.client.data.ChatVideoPlayerStatusMessage=function(e,t){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_VIDEOPLAYER_STATUS)},$hxClasses.extend(com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatVideoPlayerStatusMessage,"com.inq.flash.client.data.ChatVideoPlayerStatusMessage"),function(){for(var e in com.inq.flash.client.data.ChatCommunicationOpenerMessage=function(e,t,n,s){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS,n),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,s)},$hxClasses["com.inq.flash.client.data.ChatCommunicationOpenerMessage"]=com.inq.flash.client.data.ChatCommunicationOpenerMessage,com.inq.flash.client.data.ChatCommunicationOpenerMessage.__name__=["com","inq","flash","client","data","ChatCommunicationOpenerMessage"],com.inq.flash.client.data.ChatCommunicationOpenerMessage.__super__=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationMessage.prototype)com.inq.flash.client.data.ChatCommunicationOpenerMessage.prototype[e]=com.inq.flash.client.data.ChatCommunicationMessage.prototype[e];com.inq.flash.client.data.ChatCommunicationOpenerMessage.prototype.__class__=com.inq.flash.client.data.ChatCommunicationOpenerMessage}(),function(){for(var e in com.inq.flash.client.data.ChatCommunicationQueueMessage=function(e,t,n){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_QUEUE),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"1"),null!=n&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS,n)},$hxClasses["com.inq.flash.client.data.ChatCommunicationQueueMessage"]=com.inq.flash.client.data.ChatCommunicationQueueMessage,com.inq.flash.client.data.ChatCommunicationQueueMessage.__name__=["com","inq","flash","client","data","ChatCommunicationQueueMessage"],com.inq.flash.client.data.ChatCommunicationQueueMessage.__super__=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationMessage.prototype)com.inq.flash.client.data.ChatCommunicationQueueMessage.prototype[e]=com.inq.flash.client.data.ChatCommunicationMessage.prototype[e];com.inq.flash.client.data.ChatCommunicationQueueMessage.prototype.__class__=com.inq.flash.client.data.ChatCommunicationQueueMessage}(),com.inq.flash.client.data.ChatCommunicationSystemMessage=function(e,t,n,s,i){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_SYSTEM),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_LINE_NR,n),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CONTEXT,s),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CSS_CLASS_NAME,i)},$hxClasses.extend(com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationSystemMessage,"com.inq.flash.client.data.ChatCommunicationSystemMessage"),function(){for(var e in com.inq.flash.client.data.ChatEngageMessage=function(e,t,n,s){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e.getChatID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS,s),""!=n&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_OUTCOME_DATA,n)},$hxClasses["com.inq.flash.client.data.ChatEngageMessage"]=com.inq.flash.client.data.ChatEngageMessage,com.inq.flash.client.data.ChatEngageMessage.__name__=["com","inq","flash","client","data","ChatEngageMessage"],com.inq.flash.client.data.ChatEngageMessage.__super__=com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationMessage.prototype)com.inq.flash.client.data.ChatEngageMessage.prototype[e]=com.inq.flash.client.data.ChatCommunicationMessage.prototype[e];com.inq.flash.client.data.ChatEngageMessage.prototype.__class__=com.inq.flash.client.data.ChatEngageMessage}(),function(){for(var e in com.inq.flash.client.data.ChatExitMessage=function(e,t){var n,s;com.inq.flash.messagingframework.Message.call(this),this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e),t||(n=(new Error).stack.substring(0,1e3)),s=t||n,com.inq.flash.client.control.FlashPeer.logInfoToServer("Chat exit message called from "+s+".")},$hxClasses["com.inq.flash.client.data.ChatExitMessage"]=com.inq.flash.client.data.ChatExitMessage,com.inq.flash.client.data.ChatExitMessage.__name__=["com","inq","flash","client","data","ChatExitMessage"],com.inq.flash.client.data.ChatExitMessage.__super__=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatExitMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatExitMessage.prototype.__class__=com.inq.flash.client.data.ChatExitMessage}(),function(){for(var e in com.inq.flash.client.data.ChatRequestMessage=function(e,t,n,s,i,a){com.inq.flash.messagingframework.Message.call(this),a?this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST_RECONNECT):this.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID,e.getChatID()),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CONFIG_QUEUE_MESSAGING_SPEC_ID,com.inq.flash.client.control.FlashPeer.getQueueMessagingSpecId()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_SITE_ID,e.getSiteID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_LANGUAGE,e.getLanguage()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_SCRIPT_ID,e.getScriptID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BUSINESS_UNIT_ID,e.getBusinessUnitID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_TITLE,e.getChatTitle()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BR_ID,e.getBrID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_INC_ASSIGNMENT_ID,e.getIncAssignmentId()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_SESSION_ID,e.getSessionId()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS,e.getAgentName()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_QUEUE_THRESHOLD,e.getQueueThreshold()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_FALLBACK_AGENT_GROUP_ENBLED,e.fallbackAgentGroupEnabled);var o=com.inq.flash.client.control.FlashVars.getAutomatonSpecData()||com.inq.flash.client.control.FlashPeer.getAutomatonDataMap();o&&("object"==typeof o&&(o=JSON.stringify(o)),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_AUTOMATON_DATA_MAP,o));var l=com.inq.flash.client.control.FlashPeer.getPersistentCustomerID();l&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_PERSISTENT_CUSTOMER_ID,l),com.inq.flash.client.control.FlashVars.isSecureWithCustToken()&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_SECURE_CUST_TOKEN,l||""),e.asyncChat&&(this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_IS_ASYNC_ENGAGEMENT,e.isAsyncChat()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_CONVERSATION_CHANNEL,"WEB"),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_ASYNC_SURVEY_SPEC_ID,e.getAsyncSurveySpecID()),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_USER_OBJECT,e.getUserObject()),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CREATE_NEW_CONVERSATION,e.isCreateNewConversation()),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_AUTHENTICATED_USER,com.inq.flash.client.control.FlashPeer.getAuthenticatedUser()),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CONV_TOKEN_ID,com.inq.flash.client.control.FlashPeer.getConversationTokenID()),this.addPropertyIfNotNull(com.inq.flash.client.data.MessageFields.KEY_CONV_OBJECT_ID,com.inq.flash.client.control.FlashPeer.getConversationObjectID()));var r=e.getOverrideChatTheme(),c=e.getUseAgentAlias(),h=com.inq.utils.Util.getConfig("useAgentAlias",!1),m=com.inq.flash.client.control.FlashVars.getValue("overrideAgentAlias"),d="true"==r?"true"==c:h;if("true"===m&&(d=!1),d&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_USE_AGENT_ALIAS,com.inq.flash.client.data.MessageFields.DATA_TRUE),!0===d&&"true"!==m){var g=com.inq.flash.client.control.FlashVars.getValue("agentName");com.inq.utils.Util.isDefaultAgentAlias()&&(g=com.inq.utils.Util.getConfig("defaultAgentAlias","&nbsp;")),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS,g)}null!=e.getLaunchPageMarker()&&e.getLaunchPageMarker().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_LAUNCH_PAGE,e.getLaunchPageMarker()),null!=e.getLaunchType()&&e.getLaunchType().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_LAUNCH_TYPE,e.getLaunchType()),null!=e.getDeviceType()&&e.getDeviceType().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_DEVICE_TYPE,e.getDeviceType()),null!=e.getBrowserType()&&e.getBrowserType().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BROWSER_TYPE,e.getBrowserType()),null!=e.getBrowserVersion()&&e.getBrowserVersion().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BROWSER_VERSION,e.getBrowserVersion()),null!=e.getOperatingSystemType()&&e.getOperatingSystemType().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_OPERATING_SYSTEM_TYPE,e.getOperatingSystemType()),null!=e.getExternalCustomerIDs()&&e.getExternalCustomerIDs().length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_EXTERNAL_CUSTOMER_IDS,e.getExternalCustomerIDs()),null!=e.getRoutingAllocSpecs()&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_ROUTING_ALLOC_SPECS,e.getRoutingAllocSpecs()),com.inq.flash.client.control.FlashPeer.getCustGeoData()&&(this.addProperty(com.inq.flash.client.data.MessageFields.KEY_COUNTRY_CODE,com.inq.flash.client.control.FlashPeer.getCustGeoData().country_code),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_REGION_CODE,com.inq.flash.client.control.FlashPeer.getCustGeoData().region_code)),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_AGENT_ATTRIBUTE,e.getAgentAttributes());var p=e.getAgentGroupID();p&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_AGENT_GROUP_ID,p);var f=e.getPublicUserId();if(f)this.addProperty(com.inq.flash.client.data.MessageFields.KEY_PUBLIC_USER_ID,f);else{var u=e.getUniqueAgentName();u&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID,u)}if(this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_VISITOR_ATTRIBUTES,e.getVisitorAttributes()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_RULE_ATTRIBUTES,e.getRuleAttributes()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CUSTOMER_ID,e.getCustomerID()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME,e.getUsername()),null!=n&&n.length>0&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID,n),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_PERSISTENT_FLAG,t?"true":"false"),null!=e.getAutomatonId()&&!(i.msgcntAtEntry>0&&com.inq.flash.client.control.FlashPeer.isPersistentWindow())){this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_ID,e.getAutomatonId());var C=function(){var t,n=e.getAutomatonFields();if(n)try{t=JSON.parse(n)}catch(e){haxe.Log.trace("Automaton fields parsing to JSON failed: "+Std.string(e))}var s=com.inq.flash.client.control.FlashPeer.getAutomatonDatapass();if(s){for(var i={},a=0;a<s.length;a++)i[s[a].key]=s[a].value;t||(t={}),t[com.inq.flash.client.data.MessageFields.KEY_DATAPASS]=JSON.stringify(i)}return t}();if(C){var q=0;for(var _ in C)this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_FIELD+q+".name",_),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_FIELD+q+++".value",C[_])}this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_LOCATION,JSON.stringify({type:"chat"})),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_INITIATOR,JSON.stringify({type:"br",id:e.brID}))}this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_PAGE_ID,e.getLaunchPageId()),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_TIME_DELTA,s);var E=com.inq.flash.client.control.FlashVars.getValue("agentAutoOpenerId");null!=E&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_AUTO_OPENER_ID,E);var M=com.inq.flash.client.control.PersistenceManager.GetValue(INITIAL_CUSTOMER_ID);M&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_INITIAL_CLIENT_ID_STRING,M),e.pushNotificationDeviceID&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_PUSH_NOTIFICATION_DEVICE_ID,e.pushNotificationDeviceID),com.inq.flash.client.chatskins.SkinControl.topicId&&(this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_TOPIC_ID,com.inq.flash.client.chatskins.SkinControl.topicId),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_TOPICS_ENABLED,com.inq.flash.client.data.MessageFields.DATA_TRUE),com.inq.flash.client.chatskins.SkinControl.topicName&&this.addProperty(com.inq.flash.client.data.MessageFields.KEY_CONFIG_TOPIC_NAME,com.inq.flash.client.chatskins.SkinControl.topicName))},$hxClasses["com.inq.flash.client.data.ChatRequestMessage"]=com.inq.flash.client.data.ChatRequestMessage,com.inq.flash.client.data.ChatRequestMessage.__name__=["com","inq","flash","client","data","ChatRequestMessage"],com.inq.flash.client.data.ChatRequestMessage.__super__=com.inq.flash.messagingframework.Message,com.inq.flash.messagingframework.Message.prototype)com.inq.flash.client.data.ChatRequestMessage.prototype[e]=com.inq.flash.messagingframework.Message.prototype[e];com.inq.flash.client.data.ChatRequestMessage.prototype.__class__=com.inq.flash.client.data.ChatRequestMessage}(),com.inq.flash.client.data.MessageFields={},com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACTIVITY="chat.activity",com.inq.flash.client.data.MessageFields.TYPE_CLIENT_AUTH_DATA="client.auth.data",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION="chat.communication",com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_DATA="chat.communication.automaton_data",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER="chat.communication.opener",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_QUEUE="chat.communication.queue",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_SURVEY="chat.communication.survey",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME="chat.communication_outcome",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_SYSTEM="chat.communication_system",com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST="chat.request",com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST_RECONNECT="chat.request.reconnect",com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTHORIZED="chat.authorized",com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACCEPTED="chat.accepted",com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_CONNECTED="chatroom.member_connected",com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_LOST="chatroom.member_lost",com.inq.flash.client.data.MessageFields.TYPE_CHAT_TRANSFER_RESPONSE="chat.transfer_response",com.inq.flash.client.data.MessageFields.TYPE_CHAT_SYSTEM="chat.system",com.inq.flash.client.data.MessageFields.TYPE_AUTHENTICATED_USER_RESPONSE="authenticated.user.response",com.inq.flash.client.data.MessageFields.TYPE_OWNER_TRANSFER_RESPONSE="owner.transfer_response",com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT="chat.exit",com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED="chat.denied",com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED_RECONNECT="chat.denied.reconnect",com.inq.flash.client.data.MessageFields.KEY_CHAT_DENIED_REASON="chat.denied.reason",com.inq.flash.client.data.MessageFields.DATA_CHAT_DENIED_WRONG_REQUEST_FOR_RECONNECT_REASON="wrong_request_for_reconnect",com.inq.flash.client.data.MessageFields.TYPE_CLIENT_COMMAND="client.command",com.inq.flash.client.data.MessageFields.TYPE_SYSTEM_DISCONNECT="system.disconnect",com.inq.flash.client.data.MessageFields.TYPE_NINA_COACH_CHAT_TAKE_OVER="nina.coach.chat.take.over",com.inq.flash.client.data.MessageFields.TYPE_SYSTEM="system.",com.inq.flash.client.data.MessageFields.TYPE_ERROR="error",com.inq.flash.client.data.MessageFields.TYPE_CHAT_NEED_WAIT="chat.need_wait",com.inq.flash.client.data.MessageFields.TYPE_PERSISTENT_TRANSITION="chat.per_xtion",com.inq.flash.client.data.MessageFields.TYPE_CONTINUE_TRANSITION="chat.con_xtion",com.inq.flash.client.data.MessageFields.TYPE_GET_PERSISTENT_DOMAIN="chat.get_pers",com.inq.flash.client.data.MessageFields.TYPE_SYNC="sync",com.inq.flash.client.data.MessageFields.TYPE_CHAT_ACTIVE="chat.active",com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_RESPONSE="chat.automaton_response",com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_REQUEST="chat.automaton_request",com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_DATA_MAP="chat.automaton_data_map",com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_SETTING="chat.setting",com.inq.flash.client.data.MessageFields.TYPE_NULL="null",com.inq.flash.client.data.MessageFields.TYPE_CHAT_COBROWSE="chat.cobrowse",com.inq.flash.client.data.MessageFields.TYPE_CHAT_FILEUPLOAD="chat.fileUpload",com.inq.flash.client.data.MessageFields.TYPE_CHAT_VIDEOPLAYER_STATUS="chat.video_player_status",com.inq.flash.client.data.MessageFields.TYPE_ASYNC_UNAUTH_TOKEN_INFO="async.unauth.token.info",com.inq.flash.client.data.MessageFields.KEY_VIDEO_URL="video.url",com.inq.flash.client.data.MessageFields.KEY_VIDEO_ACTION="video.action",com.inq.flash.client.data.MessageFields.TYPE_CHAT_WEBCALL="chat.webCall",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_ENABLED="cobrowse.enabled",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_HIGHLIGHT_ENABLED="cobrowse.highlight.enabled",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_MINIMIZE_RESTORE_ENABLED="cobrowse.minimize.restore.enabled",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT="cobrowse.event",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT="45",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_DECLINE="46",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_ACCEPT_SHARE="47",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_DECLINE_SHARE="48",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_END="49",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE="50",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_SHARED_INVITE="51",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_END="52",com.inq.flash.client.data.MessageFields.KEY_AGENT_TYPE="agentType",com.inq.flash.client.data.MessageFields.DATA_AGENT_TYPE_FLEX="flex",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_END_MESSAGE_FROM_CI="521",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_PERFORMANCE_TEST="53",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_INIT_FAIL="54",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_CLIENT_COBROWSE_SUPPRESSED="55",com.inq.flash.client.data.MessageFields.DATA_CLIENT_VIDEO_ACCEPT="56",com.inq.flash.client.data.MessageFields.DATA_CLIENT_VIDEO_DECLINE="57",com.inq.flash.client.data.MessageFields.DATA_CLIENT_VIDEO_STOP="58",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_ISSUE_PERSIST_ACCESS_TO_MAIN="59",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE_TEST="60",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE_TEST_RESULT="62",com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_FAIL_NO_CONNECTION="63",com.inq.flash.client.data.MessageFields.KEY_TY_LABEL="thank_you_image_label",com.inq.flash.client.data.MessageFields.KEY_CHAT_WAIT_EST_ASSIGN_TIME="waitTime",com.inq.flash.client.data.MessageFields.KEY_CHAT_WAIT_POS="queueDepth",com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TIMESTAMP="messageTimestamp",com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TYPE="messageType",com.inq.flash.client.data.MessageFields.KEY_VERSION="version",com.inq.flash.client.data.MessageFields.KEY_ERROR_MSG="error.msg",com.inq.flash.client.data.MessageFields.KEY_CLIENT_COMMAND_PARAM="messageText",com.inq.flash.client.data.MessageFields.KEY_MESSAGE_DATA="messageData",com.inq.flash.client.data.MessageFields.KEY_CLIENT_CMD_PARAM="chat.cmd",com.inq.flash.client.data.MessageFields.KEY_CHATROUTER_ADDRESS="chatrouter.address",com.inq.flash.client.data.MessageFields.KEY_REASON="reason",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_ID="automaton.id",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_FIELD="automaton.field.",com.inq.flash.client.data.MessageFields.KEY_DATAPASS="datapass",com.inq.flash.client.data.MessageFields.KEY_CLIENT_PAGE_LOCATION="client.page.location",com.inq.flash.client.data.MessageFields.KEY_PAGE_MARKER_ID="page.markerID",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_LOCATION="config.location",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_INITIATOR="config.initiator",com.inq.flash.client.data.MessageFields.KEY_CONFIG_FALLBACK_AGENT_GROUP_ENBLED="config.fallback-agent-group-enabled",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_TYPE="automaton.type",com.inq.flash.client.data.MessageFields.KEY_DT_QUESTION="dt.question",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_STATE="dt.state",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_DATA_MODEL="dt.datamodel",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_EVENT="dt.event",com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_DATA="automaton.data",com.inq.flash.client.data.MessageFields.KEY_CHAT_ID="engagementID",com.inq.flash.client.data.MessageFields.KEY_CLIENT_ID="customerID",com.inq.flash.client.data.MessageFields.KEY_CUSTOMER_ID="customerID",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_PERSISTENT_CUSTOMER_ID="config.persist_cust.id",com.inq.flash.client.data.MessageFields.KEY_AUTHENTICATED_USER="authenticatedUser",com.inq.flash.client.data.MessageFields.KEY_AGENT_ID="agentID",com.inq.flash.client.data.MessageFields.KEY_ADVANCED_AGENT_ID="advancedAgentID",com.inq.flash.client.data.MessageFields.KEY_PUBLIC_USER_ID="public_user_id",com.inq.flash.client.data.MessageFields.KEY_USER_CID="user.cid",com.inq.flash.client.data.MessageFields.KEY_USER_ID="user.id",com.inq.flash.client.data.MessageFields.KEY_INITIATOR="initiator",com.inq.flash.client.data.MessageFields.KEY_INITIATOR_ID="initiator.id",com.inq.flash.client.data.MessageFields.KEY_SITE_ID="config.site_id",com.inq.flash.client.data.MessageFields.KEY_LANGUAGE="config.language",com.inq.flash.client.data.MessageFields.KEY_SCRIPT_ID="config.script_id",com.inq.flash.client.data.MessageFields.KEY_AGENT_AUTO_OPENER_ID="agent_auto_opener_id",com.inq.flash.client.data.MessageFields.KEY_AGENT_AUTO_OPENER="agent_auto_opener",com.inq.flash.client.data.MessageFields.KEY_PROTODOMAIN="pd",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BUSINESS_UNIT_ID="businessUnitID",com.inq.flash.client.data.MessageFields.KEY_CHAT_TITLE="config.chat_title",com.inq.flash.client.data.MessageFields.KEY_BR_ID="businessRuleID",com.inq.flash.client.data.MessageFields.KEY_QUEUE_THRESHOLD="qt",com.inq.flash.client.data.MessageFields.KEY_EXTERNAL_CUSTOMER_IDS="external_customer_ids",com.inq.flash.client.data.MessageFields.KEY_ROUTING_ALLOC_SPECS="routing_alloc_specs",com.inq.flash.client.data.MessageFields.KEY_COUNTRY_CODE="countryCode",com.inq.flash.client.data.MessageFields.KEY_REGION_CODE="regionCode",com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS="config.agent_alias",com.inq.flash.client.data.MessageFields.KEY_AGENT_SITE_ATTRS="agent.site_attrs",com.inq.flash.client.data.MessageFields.KEY_USE_AGENT_ALIAS="config.use_agent_alias",com.inq.flash.client.data.MessageFields.KEY_TIME_DELTA="time.delta",com.inq.flash.client.data.MessageFields.KEY_TIME_LOG="time.log",com.inq.flash.client.data.MessageFields.KEY_CONFIG_AGENT_ATTRIBUTE="config.agent_attributes",com.inq.flash.client.data.MessageFields.KEY_CONFIG_AGENT_GROUP_ID="config.agent_group_id",com.inq.flash.client.data.MessageFields.KEY_MESSAGE_AGENT_ALIAS="agent.alias",com.inq.flash.client.data.MessageFields.KEY_MESSAGE_CUSTOMER_QUIET="customer.quiet",com.inq.flash.client.data.MessageFields.KEY_CONFIG_VISITOR_ATTRIBUTES="config.visitor_attributes",com.inq.flash.client.data.MessageFields.KEY_CONFIG_RULE_ATTRIBUTES="config.rule_attributes",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BR_ID="businessRuleID",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_DEVICE_TYPE="config.device_type",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BROWSER_TYPE="config.browser_type",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_BROWSER_VERSION="config.browser_version",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_OPERATING_SYSTEM_TYPE="config.operating_system_type",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_LAUNCH_PAGE="config.launch_page",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_LAUNCH_TYPE="config.launch_type",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_INC_ASSIGNMENT_ID="config.inc_assignment_id",com.inq.flash.client.data.MessageFields.KEY_CONFIG_AUTOMATON_DATA_MAP="config.automaton_data_map",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_SESSION_ID="config.session_id",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_PAGE_ID="config.page_id",com.inq.flash.client.data.MessageFields.KEY_CONFIG_ENTRY_CUSTOMER_ID="config.customer_id",com.inq.flash.client.data.MessageFields.KEY_CONFIG_IS_ASYNC_ENGAGEMENT="config.is_async_engagement",com.inq.flash.client.data.MessageFields.KEY_CONFIG_CONVERSATION_CHANNEL="conversationChannel",com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA="messageText",com.inq.flash.client.data.MessageFields.KEY_CLIENT_OUTCOME_DATA="client.outcome.data",com.inq.flash.client.data.MessageFields.KEY_USERNAME="client.name",com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT="return.receipt",com.inq.flash.client.data.MessageFields.KEY_CLIENT_ECHO="client.echo",com.inq.flash.client.data.MessageFields.KEY_REPLAY="chat.replay",com.inq.flash.client.data.MessageFields.KEY_MSG_AGENT_ALIAS="agent.alias",com.inq.flash.client.data.MessageFields.KEY_EVENT_AGENT_FIRST_NAME="event.agent_first_name",com.inq.flash.client.data.MessageFields.KEY_EVENT_AGENT_LAST_NAME="event.agent_last_name",com.inq.flash.client.data.MessageFields.KEY_EVENT_INITIAL_REQUEST_ATTRIBUTES="event.initial_request_attributes",com.inq.flash.client.data.MessageFields.KEY_EVENT_TRANSFER_REQUEST_ATTRIBUTES="event.transfer_request_attributes",com.inq.flash.client.data.MessageFields.KEY_BUSINESS_UNIT_ID="business_unit.id",com.inq.flash.client.data.MessageFields.KEY_AGENT_GROUP_ID="agentGroupID",com.inq.flash.client.data.MessageFields.KEY_OPENING_SCRIPT="chat.open_script",com.inq.flash.client.data.MessageFields.KEY_PERSISTENT_FLAG="chat.persistent",com.inq.flash.client.data.MessageFields.KEY_INITIAL_CLICKSTREAM_PREFIX="initial_data.",com.inq.flash.client.data.MessageFields.KEY_LINE_NR="sequenceNumber",com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT="cob_test_result",com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT_SUCCESS="success",com.inq.flash.client.data.MessageFields.KEY_COB_TEST_RESULT_FAILURE="failure",com.inq.flash.client.data.MessageFields.KEY_CALL_ENABLED="call.enabled",com.inq.flash.client.data.MessageFields.TYPE_CLICK_2_CALL="call.event",com.inq.flash.client.data.MessageFields.KEY_CALL_STATUS="call.status",com.inq.flash.client.data.MessageFields.KEY_CALL_RESULT="call.result",com.inq.flash.client.data.MessageFields.KEY_CALL_TERMINATED="call.terminated_by_customer",com.inq.flash.client.data.MessageFields.TYPE_CHATLINE="chatLine",com.inq.flash.client.data.MessageFields.TYPE_AGENT_DATA_PASS="agentDataPass",com.inq.flash.client.data.MessageFields.TYPE_VA_DATA_PASS="vaDataPass",com.inq.flash.client.data.MessageFields.TYPE_COMMAND="command",com.inq.flash.client.data.MessageFields.TYPE_STATE_CHANGE="stateChange",com.inq.flash.client.data.MessageFields.KEY_STATE="state",com.inq.flash.client.data.MessageFields.DATA_STATE_QUEUED="queued",com.inq.flash.client.data.MessageFields.DATA_STATE_ASSIGNED="assigned",com.inq.flash.client.data.MessageFields.DATA_STATE_CLOSED="closed",com.inq.flash.client.data.MessageFields.DATA_STATE_TRANSFER="transfer",com.inq.flash.client.data.MessageFields.DATA_STATE_CONFERENCE="conference",com.inq.flash.client.data.MessageFields.DATA_STATE_AGENT_IS_TYPING="agentIsTyping",com.inq.flash.client.data.MessageFields.DATA_STATE_MOVED_TO_ASYNC="movedToAsync",com.inq.flash.client.data.MessageFields.DATA_CHATROOM_MEMBER_AGENT="agent",com.inq.flash.client.data.MessageFields.DATA_CHATROOM_MEMBER_VIRTUAL_AGENT="virtual_agent",com.inq.flash.client.data.MessageFields.KEY_TRANSFER_TO_TC_LIVE_AGENT_DISABLED="transfer_to_tc_live_agent.disabled",com.inq.flash.client.data.MessageFields.KEY_TYPE="type",com.inq.flash.client.data.MessageFields.ACTIVITY_AGENT_TYPING="2",com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_TYPING="3",com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_STOPS_TYPING="4",com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_MINIMIZED="11",com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_RESTORED="12",com.inq.flash.client.data.MessageFields.ACTIVITY_FILE_UPLOAD_PATH="15",com.inq.flash.client.data.MessageFields.ACTIVITY_AGENT_STOPPED_TYPING="16",com.inq.flash.client.data.MessageFields.KEY_TC_MODE="tc.mode",com.inq.flash.client.data.MessageFields.KEY_OWNER="owner",com.inq.flash.client.data.MessageFields.KEY_OWNER_ID="owner.id",com.inq.flash.client.data.MessageFields.KEY_SCREENING="screening",com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_ID="chatroom.member.id",com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_TYPE="chatroom.member.type",com.inq.flash.client.data.MessageFields.KEY_CLIENT_DISPLAY_TEXT="client.display.text",com.inq.flash.client.data.MessageFields.KEY_DISPLAY_TEXT="display.text",com.inq.flash.client.data.MessageFields.KEY_IS_REASSIGNMENT_MODE="is_reassignment_mode",com.inq.flash.client.data.MessageFields.DATA_TRANSFER="transfer",com.inq.flash.client.data.MessageFields.DATA_CONFERENCE="conference",com.inq.flash.client.data.MessageFields.DATA_TRUE="true",com.inq.flash.client.data.MessageFields.DATA_FALSE="false",com.inq.flash.client.data.MessageFields.FORM_DATA="form.data",com.inq.flash.client.data.MessageFields.FORM_NAME="form.name",com.inq.flash.client.data.MessageFields.FORM_ID="form.id",com.inq.flash.client.data.MessageFields.DATA_DTID="dtid",com.inq.flash.client.data.MessageFields.DATA_CACHE_ID="cacheId",com.inq.flash.client.data.MessageFields.DATA_LAYER_ID="layerId",com.inq.flash.client.data.MessageFields.CUSTOMER_NAME_INPUT_FIELD="customerNameInputField",com.inq.flash.client.data.MessageFields.KEY_WEBCALL_ACTION="chat.webCall.action",com.inq.flash.client.data.MessageFields.KEY_FILE_DELETE_SETTING="fileDeleteSetting",com.inq.flash.client.data.MessageFields.KEY_CHAT_INFO="/chatinfo",com.inq.flash.client.data.MessageFields.KEY_SWITCH_DEBUG="/debug",com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM="windowId",com.inq.flash.client.data.MessageFields.MASTER_WINDOW_ID="masterWindowId",com.inq.flash.client.data.MessageFields.KEY_CSS_CLASS_NAME="css.class_name",com.inq.flash.client.data.MessageFields.KEY_EXTERNAL_APP="external.app",com.inq.flash.client.data.MessageFields.KEY_CONTEXT="context",com.inq.flash.client.data.MessageFields.KEY_INITIAL_CLIENT_ID_STRING="config.initial_customer.id",com.inq.flash.client.data.MessageFields.KEY_PUSH_NOTIFICATION_DEVICE_ID="push_notification_device.id",com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_RESOLVED="conversation_resolved",com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_ID="conversationId",com.inq.flash.client.data.MessageFields.KEY_CONFIG_TOPIC_ID="config.topic_id",com.inq.flash.client.data.MessageFields.KEY_CONFIG_TOPIC_NAME="config.topic_name",com.inq.flash.client.data.MessageFields.KEY_TOPICS_ENABLED="topics_enabled",com.inq.flash.client.data.MessageFields.KEY_USER_TYPE="user.type",com.inq.flash.client.data.MessageFields.KEY_CONFIG_QUEUE_MESSAGING_SPEC_ID="config.queue_messaging_spec_id",com.inq.flash.client.data.MessageFields.KEY_ASYNC_SURVEY_SPEC_ID="async.survey.spec.id",com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA_HIDDEN_FOR_CUSTOMER="chat.data.hidden.from.customer",com.inq.flash.client.data.MessageFields.KEY_SECURE_WITH_CUST_TOKEN="secureWithCustToken",com.inq.flash.client.data.MessageFields.KEY_SECURE_CUST_TOKEN="secureCustToken",com.inq.flash.client.data.MessageFields.KEY_USER_OBJECT="user_object",com.inq.flash.client.data.MessageFields.KEY_FOR_RECONNECT="for_reconnect",com.inq.flash.client.data.MessageFields.KEY_CREATE_NEW_CONVERSATION="create_new_conversation",com.inq.flash.client.data.MessageFields.KEY_FORCED_CLOSE="forced_close",com.inq.flash.client.data.MessageFields.KEY_CONV_OBJECT_ID="conversation.objectID",com.inq.flash.client.data.MessageFields.KEY_CONV_TOKEN_ID="conversation.tokenID",com.inq.flash.client.data.MessageFields.KEY_LAST_AGENT_ASSIGNED_MESSAGE="last_agent_assigned_message",com.inq.flash.client.data.MessageFields.KEY_TOKEN_ID="tokenId",com.inq.flash.client.data.MessageFields.KEY_CHAT_REINITIED="ChatReInited",com.inq.flash.messagingframework.FlashMessagingFramework=function(e){haxe.Log.trace("entered",{fileName:"FlashMessagingFramework.hx",lineNumber:60,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"new"}),this.params=[],this.maxConnectionRetries=100,this.connectionHandlerAttemptIndex=-1,haxe.Log.trace("request for new MessageRouter()",{fileName:"FlashMessagingFramework.hx",lineNumber:64,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"new"}),this.messageRouter=new com.inq.flash.messagingframework.MessageRouter,haxe.Log.trace("requested  new MessageRouter()",{fileName:"FlashMessagingFramework.hx",lineNumber:66,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"new"}),this.applicationConnectionEventHandler=new com.inq.flash.client.control.ClientConnectionEventHandler(e),this.connectionHandlers=[];var t=com.inq.flash.client.control.FlashVars.getValue("submitURL"),n=new com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler(t,com.inq.flash.client.control.FlashVars.getValue("chatID"),this.params,e);this.setupConnection(n,0),haxe.Log.trace("exit",{fileName:"FlashMessagingFramework.hx",lineNumber:112,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"new"})},$hxClasses["com.inq.flash.messagingframework.FlashMessagingFramework"]=com.inq.flash.messagingframework.FlashMessagingFramework,com.inq.flash.messagingframework.FlashMessagingFramework.__name__=["com","inq","flash","messagingframework","FlashMessagingFramework"],com.inq.flash.messagingframework.FlashMessagingFramework.prototype.sendMessage=function(e,t,n){if(haxe.Log.trace("in FMF.sendMessage: "+e.toString(),{fileName:"FlashMessagingFramework.js",lineNumber:86,methodName:"sendMessage",className:"com.inq.flash.messagingframework.FlashMessagingFramework"}),null!=this.selectedConnectionHandler)this.selectedConnectionHandler.sendMessage(e,t,n);else{var s="Message was not sent, selectedConnectionHandler === null. Message: "+e.toString(),i=new Error("FlashMessagingFramework.prototype.sendMessage: no connection handler");com.inq.flash.client.control.FlashPeer.logError(s,i)}},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.startListenForMessages=function(){this.getConnection().listenForMessages()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.getMessages=function(){this.getConnection().getMessages()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.sendCommunicationMessagesFromQueue=function(){this.getConnection().sendCommunicationMessagesFromQueue()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.sendReconnectGetMessage=function(){this.getConnection().sendReconnectGetMessage()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.isConnected=function(){return null!=this.selectedConnectionHandler&&this.selectedConnectionHandler.isConnected()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.isSendMessageFail=function(){if(this.selectedConnectionHandler)return this.selectedConnectionHandler.isSendMessageFail()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype._getResponseTimestamp=function(){if(this.selectedConnectionHandler)return this.selectedConnectionHandler._getResponseTimestamp()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.disconnect=function(e){null!=this.selectedConnectionHandler&&this.selectedConnectionHandler.disconnect(e)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.abortingConnectionAttempt=function(){this.applicationConnectionEventHandler.allConnectionAttemptsFailed()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.connectionFailed=function(){return null!=this.selectedConnectionHandler?(this.connectionRetryAttempts++,this.connectionRetryAttempts<this.maxConnectionRetries?this.applicationConnectionEventHandler.connectionFailedNeedRetryRequest(this.connectionRetryAttempts,this.maxConnectionRetries):(this.abortingConnectionAttempt(),!1)):!!this.applicationConnectionEventHandler.connectionFailedNeedRetryRequest(this.connectionRetryAttempts,this.maxConnectionRetries)&&(this.selectNextConnectionHandler(),!1)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.connectionSuccesful=function(e){this.selectedConnectionHandler=e,this.connectionRetryAttempts=0},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.getConnection=function(){return this.selectedConnectionHandler||null},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.getConnectionType=function(){return null==this.selectedConnectionHandler?null:this.selectedConnectionHandler.getConnectionType()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.selectNextConnectionHandler=function(){if(this.connectionHandlerAttemptIndex++,this.connectionHandlerAttemptIndex>=this.connectionHandlers.length&&(this.connectionHandlerAttemptIndex=0),this.connectionRetryAttempts++,this.connectionRetryAttempts<this.maxConnectionRetries){var e=js.Boot.__cast(this.connectionHandlers[this.connectionHandlerAttemptIndex],com.inq.flash.messagingframework.connectionhandling.ConnectionHandler);null!=this.newHost&&""!=this.newHost&&e.setHost(this.newHost),e.connect()}else this.abortingConnectionAttempt()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.acknowledgePersistentActive=function(e,t,n,s){null!=this.selectedConnectionHandler&&"true"!==com.inq.flash.client.control.FlashVars.getValue("isCachePersistentUsed")&&this.selectedConnectionHandler.acknowledgePersistentActive(e,t,n,s)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.acknowledgeChatActive=function(e){null!=this.selectedConnectionHandler&&this.selectedConnectionHandler.acknowledgeChatActive(e)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.handleChatLost=function(){null!==this.selectedConnectionHandler&&this.selectedConnectionHandler.handleChatLost()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.enable=function(){null!=this.selectedConnectionHandler&&this.selectedConnectionHandler.enable()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.enableForReEngaging=function(){null!=this.selectedConnectionHandler&&this.selectedConnectionHandler.enableForReEngaging()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.disable=function(){null!=this.selectedConnectionHandler&&this.selectedConnectionHandler.disable()},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.connect=function(){haxe.Log.trace("enter connect",{fileName:"FlashMessagingFramework.hx",lineNumber:146,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"connect"}),this.connectionHandlerAttemptIndex=-1,haxe.Log.trace("in FMF connect()",{fileName:"FlashMessagingFramework.hx",lineNumber:148,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"connect"}),null==this.selectedConnectionHandler&&(this.selectedConnectionHandler=this.connectionHandlers[0]),null!=this.selectedConnectionHandler?(haxe.Log.trace("selectedConnectionHandler.connect()",{fileName:"FlashMessagingFramework.hx",lineNumber:153,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"connect"}),this.selectedConnectionHandler.connect()):(haxe.Log.trace("selectNextConnectionHandler()",{fileName:"FlashMessagingFramework.hx",lineNumber:158,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"connect"}),this.selectNextConnectionHandler()),haxe.Log.trace("exit",{fileName:"FlashMessagingFramework.hx",lineNumber:161,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"connect"})},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.registerMessageHandler=function(e){this.messageRouter.registerMessageHandler(e),e.setMessagingFramework(this)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.processMessage=function(e){this.messageRouter.processMessage(e)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.setupConnection=function(e,t){haxe.Log.trace("enter",{fileName:"FlashMessagingFramework.hx",lineNumber:130,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"setupConnection"}),e.setApplicationConnectionEventHandler(this.applicationConnectionEventHandler),e.setMessageRouter(this.messageRouter),e.setMessagingFramework(this),this.connectionHandlers[t]=e,haxe.Log.trace("exit: "+this.connectionHandlers.length,{fileName:"FlashMessagingFramework.hx",lineNumber:136,className:"com.inq.flash.messagingframework.FlashMessagingFramework",methodName:"setupConnection"})},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.setParam=function(e,t){null!=this.selectedConnectionHandler?this.selectedConnectionHandler.setParam(e,t):this.params[e]=t},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.getMessageHandlerByPrefix=function(e){return this.messageRouter.getHandlerByPrefix(e)},com.inq.flash.messagingframework.FlashMessagingFramework.prototype.selectedConnectionHandler=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.connectionHandlerAttemptIndex=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.connectionHandlers=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.newHost=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.params=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.maxConnectionRetries=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.connectionRetryAttempts=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.messageRouter=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.applicationConnectionEventHandler=null,com.inq.flash.messagingframework.FlashMessagingFramework.prototype.__class__=com.inq.flash.messagingframework.FlashMessagingFramework,com.inq.flash.messagingframework.FlashMessagingFramework.CONNECTION_TYPE_HTTP="http",com.inq.flash.messagingframework.MessageRouter=function(){this.handlers=new com.inq.utils.Dictionary},$hxClasses["com.inq.flash.messagingframework.MessageRouter"]=com.inq.flash.messagingframework.MessageRouter,com.inq.flash.messagingframework.MessageRouter.__name__=["com","inq","flash","messagingframework","MessageRouter"],com.inq.flash.messagingframework.MessageRouter.prototype.processMessage=function(e){try{try{if(e.getProperty("engagementID")&&com.inq.flash.client.control.FlashVars.getChatID()!==e.getProperty("engagementID"))return void com.inq.flash.client.control.FlashPeer.logErrorToServer("MessageRouter#processMessage rejects a message. Message info: [chatID: '"+e.getProperty("engagementID")+"', messageType: '"+e.getMessageType()+"' ]. Chat id from FlashVars: "+com.inq.flash.client.control.FlashVars.getChatID())}catch(e){}var t=this.getHandlerByPrefix(e.getMessageType());if(t)try{t.processMessage(e),haxe.Log.trace("handler processed "+e.getMessageType(),{fileName:"MessageRouter.hx",lineNumber:34,className:"com.inq.flash.messagingframework.MessageRouter",methodName:"processMessage"})}catch(e){haxe.Log.trace("handler.processMessage(message) throws "+Std.string(e),{fileName:"MessageRouter.hx",lineNumber:37,className:"com.inq.flash.messagingframework.MessageRouter",methodName:"processMessage",customParams:["error"]})}else haxe.Log.trace("message has no handler;\nmessageType: "+e.getMessageType(),{fileName:"MessageRouter.hx",lineNumber:42,className:"com.inq.flash.messagingframework.MessageRouter",methodName:"processMessage",customParams:["warn"]})}catch(e){haxe.Log.trace("Error: "+Std.string(e),{fileName:"MessageRouter.hx",lineNumber:44,className:"com.inq.flash.messagingframework.MessageRouter",methodName:"processMessage",customParams:["error"]})}},com.inq.flash.messagingframework.MessageRouter.prototype.getHandlerByPrefix=function(e){for(var t=com.inq.utils.Util.fields(this.handlers),n=0;n<t.length;n++){var s=this.handlers[t[n]],i=s.getMessageType();if(0==e.indexOf(i))return s}},com.inq.flash.messagingframework.MessageRouter.prototype.registerMessageHandler=function(e){this.handlers[e.getMessageType()]=e},com.inq.flash.messagingframework.MessageRouter.prototype.handlers=null,com.inq.flash.messagingframework.MessageRouter.prototype.__class__=com.inq.flash.messagingframework.MessageRouter,com.inq.flash.messagingframework.StringUtils={},com.inq.flash.messagingframework.StringUtils.__name__=["com","inq","flash","messagingframework","StringUtils"],com.inq.flash.messagingframework.StringUtils.htmlEncode=function(e){return null==e||0==e.length?e:e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},com.inq.flash.messagingframework.StringUtils.htmlDecode=function(e){return null==e||0==e.length?e:e.split("&eq;").join("=").split("&lt;").join("<").split("&gt;").join(">").split("&amp;").join("&").split("&quot;").join('"').split("&nl;").join("<br/>")},com.inq.flash.messagingframework.StringUtils.parseQueryString=function(e){var t=new com.inq.utils.Dictionary;try{if(null!=e&&""!=e)for(var n=e.split("&"),s=n.length,i=0,a=-1;i<s;){var o=n[i];if(i++,(a=o.indexOf("="))>0){var l=HxOverrides.substr(o,0,a),r=HxOverrides.substr(o,a+1,null);t[l]=r}}}catch(e){if(!js.Boot.__instanceof(e,Error))throw e}return t},com.inq.flash.messagingframework.StringUtils.getBooleanValue=function(e){var t=!1,n="";if(null!=e)try{"true"==(n=StringTools.trim(Std.string(e)).toLowerCase())||"false"==n?"true"==n&&(t=!0):0!=Std.parseInt(n)&&(t=!0)}catch(e){t=!1}return t},com.inq.flash.messagingframework.TranscriptEntry=function(){this.timestamp=Math.floor((new Date).getTime()%1e3)},$hxClasses["com.inq.flash.messagingframework.TranscriptEntry"]=com.inq.flash.messagingframework.TranscriptEntry,com.inq.flash.messagingframework.TranscriptEntry.__name__=["com","inq","flash","messagingframework","TranscriptEntry"],com.inq.flash.messagingframework.TranscriptEntry.prototype.getData=function(){return this.data},com.inq.flash.messagingframework.TranscriptEntry.prototype.getType=function(){return this.type},com.inq.flash.messagingframework.TranscriptEntry.prototype.getSender=function(){return this.sender},com.inq.flash.messagingframework.TranscriptEntry.prototype.getTimestamp=function(){return this.timestamp},com.inq.flash.messagingframework.TranscriptEntry.prototype.setData=function(e){this.data=e},com.inq.flash.messagingframework.TranscriptEntry.prototype.setType=function(e){this.type=e},com.inq.flash.messagingframework.TranscriptEntry.prototype.setSender=function(e){this.sender=e},com.inq.flash.messagingframework.TranscriptEntry.prototype.data=null,com.inq.flash.messagingframework.TranscriptEntry.prototype.type=null,com.inq.flash.messagingframework.TranscriptEntry.prototype.sender=null,com.inq.flash.messagingframework.TranscriptEntry.prototype.timestamp=null,com.inq.flash.messagingframework.TranscriptEntry.prototype.__class__=com.inq.flash.messagingframework.TranscriptEntry,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler=function(){},$hxClasses["com.inq.flash.messagingframework.connectionhandling.ConnectionHandler"]=com.inq.flash.messagingframework.connectionhandling.ConnectionHandler,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.__name__=["com","inq","flash","messagingframework","connectionhandling","ConnectionHandler"],com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.acknowledgePersistentActive=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.acknowledgeChatActive=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.enable=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.disable=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.getConnectionType=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.sendMessage=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.isConnected=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.disconnect=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.connect=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.setParam=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.setHost=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.setApplicationConnectionEventHandler=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.setMessagingFramework=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.setMessageRouter=null,com.inq.flash.messagingframework.connectionhandling.ConnectionHandler.prototype.__class__=com.inq.flash.messagingframework.connectionhandling.ConnectionHandler,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler=function(e,t,n,s){this.msgCount=0,this.reconnectAttemptsCount=0,this.putSuccessfulResponseCalledCount=0,this.queueMessagesNumber=0,this.params=n,this.connected=!1,this.sendMessageFail=!1,this.chatLost=!1,this._responseTimestamp=0,this._timerSuccessfulPendingConnection=null,this.chatRouterHosts=new Array,this.chatRouterHost=e,this.processMessageQueue=new Array,this.messageQueue=[],this.messagesInProgress={},this.queueKey=0,this.customerID=com.inq.flash.client.control.FlashVars.getValue("customerID"),this.conversationID=com.inq.flash.client.control.FlashVars.getValue("conversationID"),this.forceDisconnected=!1,this.applicationController=s,this.isIE=com.inq.utils.Util.isIE,this.invalidMessageIsLogged=!1,this.setChatID(t);for(var i=e.split(","),a=0;a<i.length;)this.chatRouterHosts[this.chatRouterHosts.length]=i[a],a++;this.getMsgLoader=new com.inq.net.URLLoader(this.customerID,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.GET_MSG_LOADER_TIMEOUT),this.getMsgLoader.addEventListener(com.inq.events.Event.NETWORK_ERROR,$bind(this,this.getNetworkErrorHandler)),this.getMsgLoader.addEventListener(com.inq.events.SecurityErrorEvent.SECURITY_ERROR,$bind(this,this.getRequestSecurityError)),this.getMsgLoader.addEventListener(com.inq.events.HTTPStatusEvent.HTTP_STATUS,$bind(this,this.getMessageHTTPStatus)),this.getMsgLoader.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.getMsgComplete)),this.getMsgLoader.addEventListener(com.inq.events.Event.UNAUTHORIZED,$bind(this,this.handleChatLost)),this.getMsgLoader.addEventListener(com.inq.events.Event.BAD_GATEAWAY,$bind(this,this.handleChatLost)),this.getMsgLoader.addEventListener(com.inq.events.Event.SERVICE_UNAVAILABLE,$bind(this,this.handleChatLost)),this.getMsgLoader.addEventListener(com.inq.events.Event.BAD_REQUEST,$bind(this,this.handleUnauthorizedMessage)),this.getMsgLoader.addWatchDog(this.listenForMessages.bind(this),com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.GET_MSG_WATCH_DOG_TIMEOUT_MS,"listenForMessages"),this.getMsgPreLoader=new com.inq.net.URLLoader(this.customerID,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.GET_MSG_LOADER_TIMEOUT),this.getMsgPreLoader.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.getMsgCompletePreload)),this.getMsgPreLoader.addEventListener(com.inq.events.Event.UNAUTHORIZED,$bind(this,this.handleChatLost)),this.getMsgPreLoader.addEventListener(com.inq.events.Event.BAD_GATEAWAY,$bind(this,this.handleChatLost)),this.getMsgPreLoader.addEventListener(com.inq.events.Event.SERVICE_UNAVAILABLE,$bind(this,this.handleChatLost)),this.getMsgPreLoader.addEventListener(com.inq.events.Event.NETWORK_ERROR,$bind(this,this.getPreloadNetworkErrorHandler)),this.getMsgPreLoader.addEventListener(com.inq.events.Event.BAD_REQUEST,$bind(this,this.handleUnauthorizedMessage)),this.reconnectGetMessageLoader=new com.inq.net.URLLoader(this.customerID,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.GET_MSG_LOADER_TIMEOUT),this.reconnectGetMessageLoader.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.reconnectGetMessageComplete)),this.reconnectGetMessageLoader.addEventListener(com.inq.events.Event.NETWORK_ERROR,$bind(this,this.handleUnauthorizedMessage)),this.reconnectGetMessageLoader.addEventListener(com.inq.events.Event.UNAUTHORIZED,$bind(this,this.handleUnauthorizedMessage)),this.reconnectGetMessageLoader.addEventListener(com.inq.events.Event.BAD_GATEAWAY,$bind(this,this.handleUnauthorizedMessage)),this.reconnectGetMessageLoader.addEventListener(com.inq.events.Event.SERVICE_UNAVAILABLE,$bind(this,this.handleUnauthorizedMessage)),this.reconnectGetMessageLoader.addEventListener(com.inq.events.Event.BAD_REQUEST,$bind(this,this.handleUnauthorizedMessage)),this.useClientProtocol=com.inq.utils.Util.getConfig("useClientProtocol",!1),this.setSelectedHost()},$hxClasses["com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler"]=com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.__name__=["com","inq","flash","messagingframework","connectionhandling","HTTPConnectionHandler"],com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getQueueSize=function(){return this.messageQueue.length},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getQueueFirstItem=function(){return this.messageQueue[0]},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.deleteInProgressMsg=function(e){var t=this.messagesInProgress[e];return delete this.messagesInProgress[e],t&&delete t.key,t},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putMessageHTTPStatus=function(e){},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMessageHTTPStatus=function(e){},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putMsgComplete=function(e){this.successfulResponseHandler(),this.putSuccessfulResponseCalledCount++;var t=this.deleteInProgressMsg(e.currentTarget.key);t&&(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION!==t.msg.getMessageType()&&com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST!==t.msg.getMessageType()||(this.putSuccessfulResponseCalledCount=0,this.sendCommunicationMessagesFromQueue())),this.repeatSendCommunicationMessagesFromQueue(e);var n=e.target.responseStatus;t&&(n>=200&&n<300||304===n?t.onSuccess(e):t.onError(e))},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.sendCommunicationMessagesFromQueue=function(){this.messageQueue.shift();var e=this.getQueueFirstItem();e&&this.putMessage(e)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.repeatSendCommunicationMessagesFromQueue=function(e){if(0===this.getQueueSize())return this.putSuccessfulResponseCalledCount=0,void(this.queueMessagesNumber=0);if(this.getQueueSize()>this.queueMessagesNumber&&this.putSuccessfulResponseCalledCount>com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MAX_NUMBER_OF_PUT_SUCCESSFUL_RESPONSE){var t=this.getQueueFirstItem();if(t.key){var n=t.key,s=this.deleteInProgressMsg(t.key);com.inq.flash.client.control.FlashPeer.logWarningToServer("putMsgComplete was called few times, but queue of customer messages size is not decreased. Queue size: "+this.getQueueSize()+", Event object: "+JSON.stringify(e)+", context key from message queue: "+n+", message from queue: "+t.msg.toString()+", message from progress: "+s.msg.toString()+" will be sent again.")}else com.inq.flash.client.control.FlashPeer.logErrorToServer("First message from queue isn't in progress, so it will be sent one more time. Queue size: "+this.getQueueSize()+", Event object: "+JSON.stringify(e)+", message "+t.msg.toString());com.inq.flash.client.control.FlashPeer.sendNetworkBackup(),this.putSuccessfulResponseCalledCount=0,setTimeout($bind(this,this.putMessage),com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.RETRY_DELAY)}this.queueMessagesNumber=this.getQueueSize()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMsgCompletePreload=function(e){if(this.isUnknownMessage(this.getMsgPreLoader))this.getMessageFailed(e,this.RETRY_DELAY_FOR_INVALID_MESSAGE);else{this.successfulResponseHandler();try{var t=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)>0;this.msgCount=this.getMsgCompleteProcessing(this.getMsgPreLoader,t),this.applicationController.updateDataInStorage(this.msgCount),this.routeQueuedRequests(t)}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("ERROR: "+Std.string(e),{fileName:"HTTPConnectionHandler.hx",lineNumber:907,className:"com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler",methodName:"getMsgCompletePreload",customParams:["error"]})}this.forceDisconnected||(this.listenForMessages(),this.applicationController.showIntroductionAfterPreloadMessages())}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.reconnectGetMessageComplete=function(){if(this.isUnknownMessage(this.reconnectGetMessageLoader))this.handleUnauthorizedMessage();else{this.successfulResponseHandler();try{this.validateReconnectStatus(this.reconnectGetMessageLoader)?(this.reconnectAttemptsCount=0,this.chatLost=!1,this.getMsgCompleteProcessing(this.reconnectGetMessageLoader,!1),this.routeQueuedRequests(!1)):this.reconnectAttemptsCount<com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MAX_NUMBER_OF_RECONNECT?(this.reconnectAttemptsCount++,this.putMessage()):this.handleUnauthorizedMessage(),this.applicationController.updateDataInStorage(this.msgCount)}catch(e){haxe.Log.trace("ERROR: "+Std.string(e),{className:"com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler",methodName:"getMsgCompleteRestore",customParams:["error"]})}}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.validateReconnectStatus=function(e){var t=e.data;if(null!=t&&"object"==typeof t){var n=new com.inq.flash.messagingframework.Message;return n.setData(t.messages[0]),n.getMessageType()===com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED_RECONNECT||n.isChatAccepted()}return!1},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getPreloadNetworkErrorHandler=function(){this.forceDisconnected||this.chatLost||setTimeout(function(){this.getMessages()}.bind(this),com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.RETRY_DELAY)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.isEmptyResponseStatusCode=function(e){return e.responseStatus==com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.STATUS_CODE_NO_CONTENT||e.responseStatus==com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.STATUS_CODE_NO_CONTENT_IE9},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.isUnknownMessage=function(e){if(!this.isEmptyResponseStatusCode(e)&&401!=e.responseStatus){var t=null==e.data?e.data:typeof e.data,n="object"!=t;return n&&!this.invalidMessageIsLogged&&(com.inq.flash.client.control.FlashPeer.logWarningToServer("Chat received an invalid message format from the server, type of data: "+t),this.invalidMessageIsLogged=!0),n}return!1},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMsgComplete=function(e){if(this.isUnknownMessage(this.getMsgLoader))this.getNetworkErrorHandler(e,this.RETRY_DELAY_FOR_INVALID_MESSAGE);else{this.successfulResponseHandler();try{var t=this.isEmptyResponseStatusCode(this.getMsgLoader),n=this.getMsgCompleteProcessing(this.getMsgLoader,!1);if(n!==this.msgCount&&n!==this.msgCount+1)return this.applicationController.updateDataInStorage(this.msgCount),void this.applicationController.restoreTranscript();t||(this.msgCount=n),this.applicationController.updateDataInStorage(this.msgCount),this.routeQueuedRequests(!1)}catch(e){haxe.Log.trace("ERROR: "+Std.string(e),{fileName:"HTTPConnectionHandler.js",methodName:"getMsgComplete",customParams:["error"]})}this.forceDisconnected?haxe.Log.trace("forceDisconnect",{fileName:"HTTPConnectionHandler.js",methodName:"getMsgComplete"}):(haxe.Log.trace("msgCount = "+this.msgCount,{fileName:"HTTPConnectionHandler.js",methodName:"getMsgComplete"}),this.listenForMessages())}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMsgCompleteProcessing=function(e,t){var n=this.msgCount;try{var s=e.data;if(null!=s&&"object"==typeof s){var i=s.messages;com.inq.utils.Util.isNullOrUndefined(s.count)?com.inq.flash.client.control.FlashPeer.logErrorToServer('No "count" field in message data: '+JSON.stringify(s)):n=s.count;for(var a=0;a<i.length;a++)if(i[a]){var o=new com.inq.flash.messagingframework.Message;o.setData(i[a]);try{t&&!this.isMsgReplayable(o)||this.processMessageQueue.push(o)}catch(e){haxe.Log.trace("FAILED messageRouter.processMessage: "+o.toString(),{fileName:"HTTPConnectionHandler.js",methodName:"getMsgCompleteProcessing",customParams:["error"]})}}}}catch(e){haxe.Log.trace("Error: "+Std.string(e),{fileName:"HTTPConnectionHandler.js",lineNumber:322,className:"com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler",methodName:"getMsgCompleteProcessing",customParams:["error"]})}return n},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.isMsgReplayable=function(e){var t=e.getMessageType(),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_ID),s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_STATE),i=n==this.chatIDForGetMsg&&(t==com.inq.flash.client.data.MessageFields.TYPE_CHATLINE||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_QUEUE||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_SYSTEM||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER),a=t===com.inq.flash.client.data.MessageFields.TYPE_STATE_CHANGE&&(s===com.inq.flash.client.data.MessageFields.DATA_CONFERENCE||s===com.inq.flash.client.data.MessageFields.DATA_TRANSFER||s===com.inq.flash.client.data.MessageFields.DATA_STATE_CLOSED||s===com.inq.flash.client.data.MessageFields.DATA_STATE_ASSIGNED||s===com.inq.flash.client.data.MessageFields.DATA_STATE_MOVED_TO_ASYNC);return i||a||t==com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_CONNECTED||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COBROWSE||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_SETTING||t==com.inq.flash.client.data.MessageFields.TYPE_CLIENT_COMMAND||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_REQUEST||t==com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_LOST||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_SYSTEM||t==com.inq.flash.client.data.MessageFields.TYPE_COMMAND||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_DATA||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED||t==com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED_RECONNECT||t==com.inq.flash.client.data.MessageFields.TYPE_NINA_COACH_CHAT_TAKE_OVER},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.markLastAssignedMessage=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if((s=n).isChatAccepted()||s.isChatTransfer()||s.isChatConference()||s.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHATROOM_MEMBER_CONNECTED)||s.isMessageType(com.inq.flash.client.data.MessageFields.TYPE_NINA_COACH_CHAT_TAKE_OVER))return void n.addProperty(com.inq.flash.client.data.MessageFields.KEY_LAST_AGENT_ASSIGNED_MESSAGE,"true")}var s},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.routeQueuedRequests=function(e){var t;for(e&&this.markLastAssignedMessage(this.processMessageQueue);this.processMessageQueue.length>0;)t=this.processMessageQueue.shift(),e&&t.addProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY,"1"),this.messageRouter.processMessage(t);var n=this.messageRouter.getHandlerByPrefix(com.inq.flash.client.data.MessageFields.TYPE_CLIENT_COMMAND);n&&n.runCommands()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putRequestSecurityError=function(e){this.putNetworkErrorHandler(e)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getRequestSecurityError=function(e){this.putNetworkErrorHandler(e),this.sendMessageFail=!0},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putMessageFailed=function(e){var t=this.deleteInProgressMsg(e.currentTarget.key);t&&(com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION!==t.msg.getMessageType()&&com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST_RECONNECT!==t.msg.getMessageType()&&com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST!==t.msg.getMessageType()||setTimeout($bind(this,this.putMessage),com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.RETRY_DELAY),t.onError(e))},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putNetworkErrorHandler=function(e){this.failedResponseHandler(),this.putMessageFailed(e)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getNetworkErrorHandler=function(e,t){this.forceDisconnected||(this.failedResponseHandler(),this.getMessageFailed(e,t))},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMessageFailed=function(e,t){this.forceDisconnected||this.chatLost||(t=t||com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.RETRY_DELAY,window.setTimeout($bind(this,this.listenForMessages),t))},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getConnectionType=function(){return com.inq.flash.messagingframework.FlashMessagingFramework.CONNECTION_TYPE_HTTP},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.abortGetMessage=function(){this.getMsgLoader.cancelLoad()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putMessage=function(e){if(this.forceDisconnected){if(e){var t="HTTPConnectionHandler.prototype.putMessage: Failed to send message, forceDisconnected. "+e.msg.toString(),n=new Error(t);com.inq.flash.client.control.FlashPeer.logError(t,n)}}else{e||(e=this.getQueueFirstItem());var s=this.getSelectedHost()+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MESSAGE_BASE_URL+"?"+e.msg.serializeToURL(),i=new com.inq.net.URLRequest(s);try{var a=new com.inq.net.URLLoader(this.customerID);a.addEventListener(com.inq.events.HTTPStatusEvent.HTTP_STATUS,$bind(this,this.putMessageHTTPStatus)),a.addEventListener(com.inq.events.SecurityErrorEvent.SECURITY_ERROR,$bind(this,this.putRequestSecurityError)),a.addEventListener(com.inq.events.Event.NETWORK_ERROR,$bind(this,this.putNetworkErrorHandler)),a.addEventListener(com.inq.events.Event.BAD_REQUEST,$bind(this,this.handleUnauthorizedMessage)),a.addEventListener(com.inq.events.Event.UNAUTHORIZED,$bind(this,this.putMessageFailed)),a.addEventListener(com.inq.events.Event.BAD_GATEAWAY,$bind(this,this.putMessageFailed)),a.addEventListener(com.inq.events.Event.SERVICE_UNAVAILABLE,$bind(this,this.putMessageFailed)),a.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.putMsgComplete));var o="send"+ ++this.queueKey;e.key=o,this.messagesInProgress[o]=e,a.load(i,o,!0,com.inq.flash.client.control.FlashPeer.getFPSessionID())}catch(t){var l="HTTPConnectionHandler.prototype.putMessage: Failed to send message. "+e.msg.toString();com.inq.flash.client.control.FlashPeer.logError(l,t)}}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.sendMessage=function(e,t,n){var s={msg:e,onSuccess:"function"==typeof t?t:$noop,onError:"function"==typeof n?n:$noop},i=!1;switch(e.getMessageType()){case com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION:this.messageQueue.push(s),i=this.getQueueSize()>1;break;case com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST:case com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST_RECONNECT:this.messageQueue.unshift(s),i=this.getQueueSize()>1;break;case com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT:this.abortGetMessage()}i?e.getMessageType()===com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST&&com.inq.flash.client.control.FlashPeer.logErrorToServer("HTTPConnectionHandler messages queue isn't empty, but chat.request still wasn't sent! This behavior is unexpected and should be additionally investigated, because in this case, the chat probably was not started."):this.putMessage(s)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.handleUnauthorizedMessage=function(){haxe.Log.trace("status response 401",{fileName:"HTTPConnectionHandler.js",methodName:"handleUnauthorizedMessage"}),com.inq.flash.client.control.FlashVars.isSecureWithCustToken()?com.inq.flash.client.chatskins.SkinControl.closeChat():this.applicationController.onLostConnection()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putChatExitMsgComplete=function(e){this.disable();var t=new com.inq.flash.client.data.ChatExitMessage("");this.messageRouter.processMessage(t)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.handleChatLost=function(){this.forceDisconnected||(com.inq.flash.client.control.FlashVars.isSecureWithCustToken()?com.inq.flash.client.chatskins.SkinControl.closeChat():this.chatLost||(this.chatLost=!0,this.abortGetMessage(),this.applicationController.sendChatRequestMessage(!0)))},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.listenForMessages=function(){if(!this.forceDisconnected){this.abortGetMessage();var e=this.generateMessageURL(this.msgCount);this.getMsgLoader.load(new com.inq.net.URLRequest(e),null,!1,com.inq.flash.client.control.FlashPeer.getFPSessionID()),this.pendingConnectionEstablished()}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.isAutomaton=function(){return null!=com.inq.flash.client.control.FlashVars.getValue("automatonId")},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setChatID=function(e){this.chatIDForGetMsg=e},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.connectionComplete=function(e){null==e&&(this.isConnected()||this.forceDisconnected||(this.connected=!0,this.framework.connectionSuccesful(this),this.applicationConnectionEventHandler.connectionSuccessful()))},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.establishConnectionRequest=function(){this.isConnected()||this.forceDisconnected||(this.connected=!0,this.framework.connectionSuccesful(this),this.applicationConnectionEventHandler.connectionSuccessful())},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.connect=function(){this.connectionRequestedByDemand=!0,this.establishConnection()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.establishConnection=function(){if(this.connectionRequestedByDemand&&!com.inq.flash.client.chatskins.SkinControl.asyncTranscriptLoading){var e=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);this.applicationController.getChat().isAsyncChat()&&0===e?com.inq.flash.client.control.FlashPeer.getActiveChatroomId(function(e,t,n){this.applicationController.getChat().setAsyncReconnect(n),this.applicationController.setChatID(e),this.applicationController.setCustomerID(t),this.setChatID(e),this.setCustomerID(t),this.establishConnectionRequest()}.bind(this),this.establishConnectionRequest.bind(this)):(this.establishConnectionRequest(),com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&e<this.applicationController.msgcntAtEntry&&(e=this.applicationController.msgcntAtEntry),e>0&&this.getMessages())}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setSelectedHost=function(){var e=this.useClientProtocol?window.location.protocol:"https:";0!=this.chatRouterHost.toLowerCase().indexOf("http")?this.selectedHost=e+"//"+this.chatRouterHost:this.selectedHost=this.chatRouterHost.replace("http:",e)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getSelectedHost=function(){return this.selectedHost},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.disconnect=function(e){if(!this.forceDisconnected&&!this.applicationController.clientDisconnect){void 0===e&&(e=com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_UNKNOWN),this.connected=!1,this.forceDisconnected=!0;var t=new com.inq.net.URLLoader(this.customerID);t.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.putMsgComplete)),t.addEventListener(com.inq.events.Event.UNAUTHORIZED,$bind(this,this.handleUnauthorizedMessage)),t.addEventListener(com.inq.events.Event.BAD_GATEAWAY,$bind(this,this.handleUnauthorizedMessage)),t.addEventListener(com.inq.events.Event.SERVICE_UNAVAILABLE,$bind(this,this.handleUnauthorizedMessage));var n=this.getSelectedHost()+"/chatrouter/chat/closeChat?rand="+Math.random()+"&"+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.CLOSE_REASON+e;null!=this.chatIDForGetMsg&&""!=this.chatIDForGetMsg&&(n+="&"+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.ENGAGEMENT_ID_PARAM+this.chatIDForGetMsg);var s=new com.inq.net.URLRequest(n);t.load(s)}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMessagingFramework=function(){return this.framework},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setMessagingFramework=function(e){this.framework=e},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setMessageRouter=function(e){this.messageRouter=e},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.isConnected=function(){return this.connected},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setApplicationConnectionEventHandler=function(e){this.applicationConnectionEventHandler=e},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setHost=function(e){},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setParam=function(e,t){this[e]=t},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMessages=function(){if(!this.forceDisconnected){var e=this.generateMessageURL(null,!0);this.getMsgPreLoader.load(new com.inq.net.URLRequest(e),null,!1,com.inq.flash.client.control.FlashPeer.getFPSessionID())}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.sendReconnectGetMessage=function(){if(!this.forceDisconnected){var e=this.generateMessageURL();this.reconnectGetMessageLoader.load(new com.inq.net.URLRequest(e),null,!1,com.inq.flash.client.control.FlashPeer.getFPSessionID())}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getParams=function(e){return this.params[e]},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.acknowledgePersistentActive=function(e,t,n,s){var i="",a=this.getSelectedHost()+"/chatrouter/chat/ackPersistentActive.js?engagementID="+this.chatIDForGetMsg+"&op="+Std.string(s)+"&pd="+t+"&r="+Math.round(123456789*Math.random());t!=n&&(this.applicationController.noUnload(),i=(i=(i=window.parent.location.href).split(t).join(n)).split("#")[0],a+="&xfr="+StringTools.urlEncode(i));var o=new com.inq.net.URLRequest(a);try{this.ackPersistentLoader=new com.inq.net.URLLoader(this.customerID),this.ackPersistentLoader.addEventListener(com.inq.events.Event.COMPLETE,(function(e){})),this.ackPersistentLoader.load(o)}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace(""+Std.string(e),{fileName:"HTTPConnectionHandler.hx",lineNumber:205,className:"com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler",methodName:"acknowledgePersistentActive",customParams:["error"]})}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.sendChatHTML=function(){var e=StringTools.urlEncode(document.getElementById("me").innerHTML),t=this.getSelectedHost()+"/chatrouter/chat/sendHTML.js?engagementID="+this.chatIDForGetMsg+"&r="+this.rand()+"&h=",n=2e3-t.length;for(n>e.length&&(n=e.length);e.length>0;){var s,i=t+HxOverrides.substr(e,0,n),a=new com.inq.net.URLRequest(i);(s=new com.inq.net.URLLoader(this.customerID)).addEventListener(com.inq.events.Event.COMPLETE,(function(e){})),s.load(a),e=HxOverrides.substr(e,n+1,null)}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.rand=function(){return Math.round(123456789*Math.random())},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.acknowledgeChatActive=function(e){var t=this.getSelectedHost()+"/chatrouter/chat/ackChatActive?engagementID="+this.chatIDForGetMsg+"&rand="+Math.random(),n=new com.inq.net.URLRequest(t);try{new com.inq.net.URLLoader(this.customerID).load(n)}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace(""+Std.string(e),{fileName:"HTTPConnectionHandler.hx",lineNumber:145,className:"com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler",methodName:"acknowledgeChatActive",customParams:["error"]})}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.enable=function(){this.forceDisconnected=!1,this.listenForMessages()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.enableForReEngaging=function(){this.forceDisconnected=!1,this.sendMessageFail=!1},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.disable=function(){this.abortGetMessage(),this.clearSuccessfulPendingConnectionTimer(),this.connected=!1,this.forceDisconnected=!0},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.isSendMessageFail=function(){return this.sendMessageFail},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.generateMessageURL=function(e,t){var n=this.getSelectedHost()+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MESSAGE_BASE_URL;if(null!=e&&(n+="/"+e),n+="?"+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.ENGAGEMENT_ID_PARAM+this.chatIDForGetMsg+"&"+com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM+"="+com.inq.flash.client.control.FlashVars.getWindowId(),t&&(n+="&"+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.ENTIRE_TRANSCRIPT_PARAM+"true"),com.inq.flash.client.control.FlashVars.isSecureWithCustToken()){var s=com.inq.flash.client.control.FlashVars.getPersistentCustomerID();n+="&"+com.inq.flash.client.data.MessageFields.KEY_SECURE_CUST_TOKEN+"="+s}return n},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.ciPrepareUrlForBeacon=function(){var e=Application.application.applicationController.getMessagingFramework().getConnection();return e?e.prepareUrlForBeacon.call(e):""},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.prepareUrlForBeacon=function(){if(this.isConnected()&&!this.forceDisconnected){this.isIE||this.disable();var e=this.getSelectedHost()+this.MESSAGE_PAGE_UNLOAD;return e+="?"+this.ENGAGEMENT_ID_PARAM+this.chatIDForGetMsg,(e+="&"+this.CUSTOMER_ID_PARAM+com.inq.flash.client.control.FlashVars.getValue("customerID"))+"&"+com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM+"="+com.inq.flash.client.control.FlashVars.getWindowId()}},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype._getResponseTimestamp=function(){return this._responseTimestamp},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.successfulResponseHandler=function(){this.sendMessageFail&&(this.sendMessageFail=!1,Application.application.notificationController.showConnectionRestoredMessage()),this._responseTimestamp=Date.now(),this.clearSuccessfulPendingConnectionTimer()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.failedResponseHandler=function(){this.sendMessageFail=!0,Application.application.notificationController.showConnectionIssuesMessage()},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.pendingConnectionEstablished=function(){this.clearSuccessfulPendingConnectionTimer();var e=2*com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.RETRY_DELAY;this._timerSuccessfulPendingConnection=setTimeout(this.successfulResponseHandler.bind(this),e)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.clearSuccessfulPendingConnectionTimer=function(){this._timerSuccessfulPendingConnection&&(clearTimeout(this._timerSuccessfulPendingConnection),this._timerSuccessfulPendingConnection=null)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.setCustomerID=function(e){this.customerID=e,this.getMsgLoader.setCustomerID(e),this.getMsgPreLoader.setCustomerID(e),this.reconnectGetMessageLoader.setCustomerID(e)},com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.chatIDForGetMsg=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.ackPersistentLoader=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.putMsgLoader=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.forceDisconnected=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.messageQueue=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.queueKey=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMsgCntLoader=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMsgPreLoader=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.getMsgLoader=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.msgCount=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.params=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.framework=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.messageRouter=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.applicationConnectionEventHandler=null,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.__class__=com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.__interfaces__=[com.inq.flash.messagingframework.connectionhandling.ConnectionHandler],com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.ENGAGEMENT_ID_PARAM="engagementID=",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.ENTIRE_TRANSCRIPT_PARAM="requestEntireTranscript=",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.ENGAGEMENT_ID_PARAM="engagementID=",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MESSAGE_BASE_URL="/chatrouter/chat/message",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.MESSAGE_PAGE_UNLOAD="/chatrouter/chat/pageUnload",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.RETRY_DELAY=1e3,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.RETRY_DELAY_FOR_INVALID_MESSAGE=5e3,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.STATUS_CODE_NO_CONTENT=204,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.STATUS_CODE_NO_CONTENT_IE9=1223,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.STATUS_CODE_AJAX_ABORTED=0,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.CUSTOMER_ID_PARAM="customerID=",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.CLOSE_REASON="reason=",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.prototype.CUSTOMER_ID_PARAM="customerID=",com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.GET_MSG_LOADER_TIMEOUT=35e3,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.GET_MSG_WATCH_DOG_TIMEOUT_MS=6e4,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MAX_NUMBER_OF_RECONNECT=5,com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MAX_NUMBER_OF_PUT_SUCCESSFUL_RESPONSE=4,com.inq.utils.EventDataUtils=function(){},$hxClasses["com.inq.utils.EventDataUtils"]=com.inq.utils.EventDataUtils,com.inq.utils.EventDataUtils.__name__=["com","inq","utils","EventDataUtils"],com.inq.utils.EventDataUtils.fromMessage=function(e){var t=new com.inq.utils.Dictionary;t.agtFirstName=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_EVENT_AGENT_FIRST_NAME),t.agtLastName=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_EVENT_AGENT_LAST_NAME),t.agtAttrs=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_SITE_ATTRS),t.agtCId=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USER_CID),haxe.Log.trace("DEBUG: agtAttrs has been populated as ("+t.agtAttrs+")",{fileName:"EventDataUtils.hx",lineNumber:27,className:"EventDataUtils",methodName:"fromMessage"});var n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_AGENT_ALIAS);null!=n&&(t.agentAlias=n);var s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_EVENT_INITIAL_REQUEST_ATTRIBUTES);null!=s&&(t.firstRequestedAttr=s.split(",").join("="));var i=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_EVENT_TRANSFER_REQUEST_ATTRIBUTES);return null!=i&&(t.newRequestedAttr=i),t},com.inq.utils.EventDataUtils.prototype.__class__=com.inq.utils.EventDataUtils,com.inq.utils.Util=function(){},$hxClasses["com.inq.utils.Util"]=com.inq.utils.Util,com.inq.utils.Util.__name__=["com","inq","utils","Util"],com.inq.utils.Util.publish=function(e,t){for(var n=e.split("."),s=window,i=n.length-1,a=0,o=n.length;a<o;){var l=a++,r=n[l];null==s[r]&&(s[r]=l==i?t:{}),s=s[r]}},com.inq.utils.Util.isDefaultAgentAlias=function(){return 1==com.inq.utils.Util.getConfig("useAgentAlias",!1)&&"true"!=com.inq.flash.client.control.FlashVars.getValue("overrideAgentAlias")&&"true"!=com.inq.flash.client.control.FlashVars.getValue("overrideChatTheme")},com.inq.utils.Util.getConfig=function(e,t){var n=null;try{if(Application.application&&(n=Application.application[com.inq.utils.Util.configArea]),null!=n)return null!=n[e]?n[e]:t}catch(t){haxe.Log.trace("error accessing configuration attribute: "+e+"\n"+Std.string(t),{fileName:"Util.hx",lineNumber:61,className:"com.inq.utils.Util",methodName:"getConfig"})}return t},com.inq.utils.Util.getConfigAsBoolean=function(e){return!!com.inq.utils.Util.getConfig(e)},com.inq.utils.Util.getIEMajorVer=function(e){return com.inq.flash.client.control.FlashPeer.getBrowserMajorVer(e)},com.inq.utils.Util.getHostFromUrl=function(e){return e.indexOf("/")>-1?e.split("/",3)[2]:e},com.inq.utils.Util.getTopWindow=function(){return window.top},com.inq.utils.Util.getParentReferrer=function(){return window.parent.document.referrer},com.inq.utils.Util.getNavigationType=function(){return window.parent.performance.navigation.type},com.inq.utils.Util.getParentLocation=function(){return window.parent.location},com.inq.utils.Util.getTopWindowURL=function(){try{return window.top.location.href}catch(e){haxe.Log.trace("error accessing window.top.location.\n"+Std.string(e),{fileName:"Util.js",className:"com.inq.utils.Util",methodName:"getTopWindowURL"})}return null},com.inq.utils.Util.getVisualViewport=function(){return this.getTopWindow().visualViewport},com.inq.utils.Util.isFocusAndScrollMonitorsDisabled=function(){try{return!!(com.inq.flash.client.control.FlashPeer.isEmbeddedThemeValid()||com.inq.flash.client.control.FlashPeer.isCEAPIPostChatSurveyMode()&&com.inq.utils.Capabilities.isIOSWebView())}catch(e){haxe.Log.trace("Error when determining isFocusAndScrollMonitorsDisabled"+Std.string(e),{fileName:"Util.js",className:"com.inq.utils.Util",methodName:"isFocusAndScrollMonitorsDisabled"})}return!1},com.inq.utils.Util.getScrollableContainer=function(e){return e.parentNode?"tcChat_Skin"==e.parentNode.id?null:e.parentNode.scrollHeight>e.parentNode.clientHeight?e.parentNode:com.inq.utils.Util.getScrollableContainer(e.parentNode):null},com.inq.utils.Util.isDivChat=function(){return!com.inq.flash.client.chatskins.SkinControl.getIsPersistentChat()&&(com.inq.utils.Util.getConfig("divSkin",!1)||com.inq.ui.SkinLoader.skinInClient)},com.inq.utils.Util.isBorderBoxEnabled=function(e){var t=(com.inq.utils.Util.isDivChat()?window.parent:window).getComputedStyle(e);return t&&"border-box"===t.boxSizing},com.inq.utils.Util.debounce=function(e,t,n){var s;return function(){var i=this,a=arguments,o=function(){s=null,n||e.apply(i,a)},l=n&&!s;clearTimeout(s),s=setTimeout(o,t),l&&e.apply(i,a)}},com.inq.utils.Util.fields=function(e){var t=[];if(null!=e)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},com.inq.utils.Util.evalExpression=function(e){for(var t,n,s,i,a=[],o=[],l={"^":{prior:4,assoc:"right"},"*":{prior:3,assoc:"left"},"/":{prior:3,assoc:"left"},"+":{prior:2,assoc:"left"},"-":{prior:2,assoc:"left"},"(":{prior:1,assoc:"left"},")":{prior:1,assoc:"left"}},r=!1,c=function(e){var t=e.replace(/ +?/g,"");for((t=t.replace(/,/g,"."))[0].match(/[+\-*/^]/)&&(t="0"+t);t.indexOf("(-")>-1;)t=t.replace("(-","(0-");return t}(e),h=!0,m=0;m<c.length;m++)c[m].match(/[+\-*/^]/)?(r=!1,f(m),h=!1):c[m].match(/[0-9.]/)?u(m):"("!==c[m]&&")"!==c[m]||C(m);for(var d=a,g=o,p=d.pop();p;)g.push(p),p=d.pop();return function(e){for(var t={"+":function(e,t){return e+t},"-":function(e,t){return t-e},"*":function(e,t){return e*t},"/":function(e,t){return t/e}},n=[],s=e.split(","),i=0;i<s.length;i++)if(s[i]in t){var a=n.pop(),o=n.pop();n.push(t[s[i]](a,o))}else n.push(parseFloat(s[i]));return n.pop()}(g.join());function f(e){for(;!r;)if(i=a.pop())switch(t=l[c[e]].prior,n=l[c[e]].assoc,s=l[i].prior,n){case"left":t>s?(a.push(i),a.push(c[e]),r=!0):o.push(i);break;case"right":t>=s?(a.push(i),a.push(c[e]),r=!0):o.push(i)}else a.push(c[e]),r=!0}function u(e){if(h){var t=o.pop();t?o.push(t+c[e]):o.push(c[e])}else o.push(c[e]),h=!0}function C(e){if("("===c[e])a.push(c[e]),h=!1;else if(")"===c[e]){for(var t=!1;!t;){var n=a.pop();"("===n?t=!0:o.push(n)}h=!1}}},com.inq.utils.Util.isNullOrUndefined=function(e){return null==e},com.inq.utils.Util.prototype.__class__=com.inq.utils.Util,com.inq.utils.Util.isIE="Microsoft Internet Explorer"==window.navigator.appName||-1!=window.navigator.userAgent.indexOf("Trident"),com.inq.utils.Util.configArea="skinConfig",com.inq.utils.Util.xformsCloseEventFlag="sendEventChatCloseToAutomatons",com.inq.utils.Util.SKIN_CONFIG_KEY_AGENT_IMAGE_CONFIG="agentImageConfig",com.inq.utils.Util.SKIN_CONFIG_KEY_AGENT_IMAGE_ENABLED="agentTypeImageEnabled",com.inq.utils.Util.URL_REGEX=/(https?:\/\/[^"<\s]+)(?![^<>]*>|[^"]*?<\/a)/g,com.inq.net.URLLoader=function(e,t){com.inq.events.EventDispatcher.call(this),this.index=0,this.storageKey="",this.data="",this.responseStatus=0,this.responseHeaderCacheControl="",this.bytesLoaded=0,this.timeout=t||0,this.setCustomerID(e)},$hxClasses.extend(com.inq.events.EventDispatcher,com.inq.net.URLLoader,"com.inq.net.URLLoader"),com.inq.net.URLLoader.prototype.setCustomerID=function(e){this.customerIDAsFirstParamExpression=e?"?"+com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.CUSTOMER_ID_PARAM+e:""},com.inq.net.URLLoader.prototype.addWatchDog=function(e,t,n){this.watchDog=new com.inq.net.WatchDog(e,t,n)},com.inq.net.URLLoader.getContext=function(e){var t=com.inq.net.URLLoader.indexOfContext(e);return-1!=t?com.inq.net.URLLoader.loadingArray.splice(t,1)[0].Context:null},com.inq.net.URLLoader._httpRequestHandler=function(e,t,n,s,i){var a=com.inq.net.URLLoader.getContext(e);null!==a?(a.responseStatus=n,a.responseHeaderCacheControl=s,a.data=t,a.bytesLoaded=t&&t.length?t.length:0,0==n||com.inq.net.URLLoader.isIE7&&12029==n?a.fireEvent(com.inq.events.Event.NETWORK_ERROR):400==n?a.fireEvent(com.inq.events.Event.BAD_REQUEST):401==n?a.fireEvent(com.inq.events.Event.UNAUTHORIZED):502==n?a.fireEvent(com.inq.events.Event.BAD_GATEAWAY):503==n?a.fireEvent(com.inq.events.Event.SERVICE_UNAVAILABLE):a.fireEvent(com.inq.events.Event.COMPLETE)):com.inq.flash.client.control.FlashPeer.logWarningToServer("Instance is null. Arguments are "+JSON.stringify(arguments))},com.inq.net.URLLoader.prototype.errorHandler=function(e){e?(this.fireEvent(com.inq.events.Event.NETWORK_ERROR),com.inq.flash.client.control.FlashPeer.logErrorToServer("URLLoader.errorHandler. "+e.name+": "+e.message)):com.inq.flash.client.control.FlashPeer.logWarningToServer("URLLoader.errorHandler. Context is absent for "+this.storageKey)},com.inq.net.URLLoader.prototype.loadComplete=function(e){e?com.inq.net.URLLoader._httpRequestHandler(e.id,e.data,e.responseStatus,e.responseHeaderCacheControl,e):com.inq.flash.client.control.FlashPeer.logWarningToServer("URLLoader.loadComplete. Context is absent for "+this.storageKey)},com.inq.net.URLLoader.prototype.cancelLoad=function(){if(com.inq.net.URLLoader.lastGetMsg){var e=com.inq.net.URLLoader.lastGetMsg.url,t=com.inq.net.URLLoader.lastGetMsg.id;this.send(e,["ABORT",t],t),this.watchDog.stop()}},com.inq.net.URLLoader.prototype.send=function(e,t,n,s,i){var a=com.inq.flash.client.control.FlashVars.getSubmitURL();e.startsWith(a)||i?com.inq.flash.client.control.FlashPeer.sendRequestToServer(e,t,n,s):com.inq.flash.client.control.FlashPeer.postRequestToIframeProxy(e,t,n,s)},com.inq.net.URLLoader.prototype.loadByPosting=function(e,t,n,s){com.inq.net.URLLoader._hostedFile=window.location.protocol+"//"+(window.location.host+window.location.pathname);var i,a,o=e.split("?"),l=o[0];n||e.length>com.inq.net.URLLoader.MAXIMUM_IE_URL_LENGTH?(i=l+this.customerIDAsFirstParamExpression,a=encodeURIComponent(o[1])):(this.customerIDAsFirstParamExpression?(i=l+this.customerIDAsFirstParamExpression,o[1]&&(i+="&"+o[1])):i=e,a="",i.indexOf(com.inq.flash.messagingframework.connectionhandling.HTTPConnectionHandler.MESSAGE_BASE_URL)>-1&&(com.inq.net.URLLoader.lastGetMsg={id:t,url:i})),this.storageKey=i;var r={};r.callbackFun=this.loadComplete.bind(this),r.callbackFunErr=this.errorHandler.bind(this);var c=com.inq.flash.client.control.FlashVars.getValue("tagServerBaseURL"),h=com.inq.flash.client.control.FlashPeer.getFlagSendDataToTSWithoutIframe()&&e.startsWith(c),m="POSTCHAT";h&&(m="POSTASYNC");var d=[m,t,"",com.inq.net.URLLoader._hostedFile,i,a,this.timeout,s];this.send(i,d,t,r,h)},com.inq.net.URLLoader.prototype.load=function(e,t,n,s){this.watchDog&&this.watchDog.restart(),this.data="",this.index=++com.inq.net.URLLoader.seq,this.key=(t||this.index)+"",this.registerContext(this.key),this.loadByPosting(e.url,this.key,n,s)},com.inq.net.URLLoader.prototype.fireEvent=function(e){var t=new com.inq.events.Event(e);t.currentTarget=this,t.target=this,this.hasEventListener(e)||haxe.Log.trace("function is not defined for Event.COMPLETE",{fileName:"URLLoader.hx",lineNumber:309,className:"com.inq.net.URLLoader",methodName:"fireEvent"});try{this.dispatchEvent(t)}catch(t){var n="",s="";js.Boot.__instanceof(t,Error)||t.stack?(s=t.stack,n=t.message):(s=(new Error).stack,"string"==typeof t&&(n=t)),n||(n="unavailable");var i=js.Boot.__instanceof(this.constructor.__name__,Array)?this.constructor.__name__.join("."):this.constructor.name;haxe.Log.trace("Could not fire event in "+i+", reason: "+n+"\nStackTrace:"+s,{fileName:"URLLoader.hx",lineNumber:345,className:"com.inq.net.URLLoader",methodName:"fireEvent",customParams:[t]}),com.inq.flash.client.control.FlashPeer.logError("URLLoader.fireEvent could not fire "+e+" event in "+i+", reason: ",t)}return!1},com.inq.net.URLLoader.prototype.registerContext=function(e){-1==com.inq.net.URLLoader.indexOfContext(e)&&com.inq.net.URLLoader.loadingArray.push({UrlIndex:e,Context:this})},com.inq.net.URLLoader.indexOfContext=function(e){for(var t=0;t<com.inq.net.URLLoader.loadingArray.length;t++)if(e==com.inq.net.URLLoader.loadingArray[t].UrlIndex)return t;return-1},com.inq.net.URLLoader.prototype.key=null,com.inq.net.URLLoader.prototype.__class__=com.inq.net.URLLoader,com.inq.net.URLLoader.MAXIMUM_IE_URL_LENGTH=2083,com.inq.net.URLLoader.loadingArray=new Array,com.inq.net.URLLoader.seq=0,com.inq.net.URLLoader.lastGetMsg=null,com.inq.net.URLLoader._hostedFile="",com.inq.net.URLLoader.isIE7=-1!=window.navigator.appVersion.indexOf("MSIE 7."),com.inq.net.URLRequest=function(e){this.url=e},$hxClasses["com.inq.net.URLRequest"]=com.inq.net.URLRequest,com.inq.net.URLRequest.__name__=["com","inq","net","URLRequest"],com.inq.net.URLRequest.prototype.url=null,com.inq.net.URLRequest.prototype.method=null,com.inq.net.URLRequest.prototype.data=null,com.inq.net.URLRequest.prototype.contentType=null,com.inq.net.URLRequest.prototype.__class__=com.inq.net.URLRequest,com.inq.net.WatchDog=function(e,t,n){if(!e||!t)throw Error("handler and timeout are required parameters for using WatchDog.");this.timeoutId=null,this.timeoutMS=t,this.handler=e,this.handlerName=n},com.inq.net.WatchDog.prototype.restart=function(){this.stop(),this.timeoutId=setTimeout(this.handleTimeout.bind(this),this.timeoutMS)},com.inq.net.WatchDog.prototype.stop=function(){clearTimeout(this.timeoutId)},com.inq.net.WatchDog.prototype.handleTimeout=function(){com.inq.flash.client.control.FlashPeer.logWarningToServer("WatchDog timeout worked. "+this.handlerName+" called."),com.inq.flash.client.control.FlashPeer.sendNetworkBackup(),this.handler()},haxe.xml||(haxe.xml={}),haxe.xml._Fast||(haxe.xml._Fast={}),haxe.xml.Parser=function(){},$hxClasses["haxe.xml.Parser"]=haxe.xml.Parser,haxe.xml.Parser.__name__=["haxe","xml","Parser"],haxe.xml.Parser.parse=function(e){var t=Xml.createDocument();return haxe.xml.Parser.doParse(e,0,t),t},haxe.xml.Parser.doParse=function(e,t,n){null==t&&(t=0);for(var s,i=null,a=1,o=1,l=null,r=0,c=0,h=0,m=e.charCodeAt(t);m==m;){switch(a){case 0:switch(m){case 10:case 13:case 9:case 32:break;default:a=o;continue}break;case 1:if(60!==m){r=t,a=13;continue}a=0,o=2;break;case 13:60==m&&(s=Xml.createPCData(HxOverrides.substr(e,r,t-r)),n.addChild(s),c++,a=0,o=2);break;case 17:93==m&&93==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(s=Xml.createCData(HxOverrides.substr(e,r,t-r)),n.addChild(s),c++,t+=2,a=1);break;case 2:switch(m){case 33:if(91==e.charCodeAt(t+1)){if(t+=2,"CDATA["!=HxOverrides.substr(e,t,6).toUpperCase())throw"Expected <![CDATA[";a=17,r=(t+=5)+1}else if(68==e.charCodeAt(t+1)||100==e.charCodeAt(t+1)){if("OCTYPE"!=HxOverrides.substr(e,t+2,6).toUpperCase())throw"Expected <!DOCTYPE";a=16,r=(t+=8)+1}else{if(45!=e.charCodeAt(t+1)||45!=e.charCodeAt(t+2))throw"Expected \x3c!--";a=15,r=(t+=2)+1}break;case 63:a=14,r=t;break;case 47:if(null==n)throw"Expected node name";r=t+1,a=0,o=10;break;default:a=3,r=t;continue}break;case 3:if(!(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||58==m||46==m||95==m||45==m)){if(t==r)throw"Expected node name";i=Xml.createElement(HxOverrides.substr(e,r,t-r)),n.addChild(i),a=0,o=4;continue}break;case 4:switch(m){case 47:a=11,c++;break;case 62:a=9,c++;break;default:a=5,r=t;continue}break;case 5:if(!(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||58==m||46==m||95==m||45==m)){if(r==t)throw"Expected attribute name";if(l=HxOverrides.substr(e,r,t-r),i.exists(l))throw"Duplicate attribute";a=0,o=6;continue}break;case 6:if(61!==m)throw"Expected =";a=0,o=7;break;case 7:switch(m){case 34:case 39:a=8,r=t;break;default:throw'Expected "'}break;case 8:if(m==e.charCodeAt(r)){var d=HxOverrides.substr(e,r+1,t-r-1);i.set(l,d),a=0,o=4}break;case 9:r=t=haxe.xml.Parser.doParse(e,t,i),a=1;break;case 11:if(62!==m)throw"Expected >";a=1;break;case 12:if(62===m)return 0==c&&n.addChild(Xml.createPCData("")),t;throw"Expected >";case 10:if(!(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||58==m||46==m||95==m||45==m)){if(r==t)throw"Expected node name";if(HxOverrides.substr(e,r,t-r)!=n.getNodeName())throw"Expected </"+n.getNodeName()+">";a=0,o=12;continue}break;case 15:45==m&&45==e.charCodeAt(t+1)&&62==e.charCodeAt(t+2)&&(n.addChild(Xml.createComment(HxOverrides.substr(e,r,t-r))),t+=2,a=1);break;case 16:91==m?h++:93==m?h--:62==m&&0==h&&(n.addChild(Xml.createDocType(HxOverrides.substr(e,r,t-r))),a=1);break;case 14:if(63==m&&62==e.charCodeAt(t+1)){t++;var g=HxOverrides.substr(e,r+1,t-r-2);n.addChild(Xml.createProlog(g)),a=1}}m=e.charCodeAt(++t)}if(1==a&&(r=t,a=13),13==a)return t==r&&0!=c||n.addChild(Xml.createPCData(HxOverrides.substr(e,r,t-r))),t;throw"Unexpected end"},haxe.xml.Parser.isValidChar=function(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||58==e||46==e||95==e||45==e},haxe.xml.Parser.prototype.__class__=haxe.xml.Parser,js.Lib=function(){},$hxClasses["js.Lib"]=js.Lib,js.Lib.__name__=["js","Lib"],js.Lib.document=null,js.Lib.window=null,js.Lib.debug=function(){},js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,""))},js.Lib.setErrorHandler=function(e){js.Lib.onerror=e},js.Lib.prototype.__class__=js.Lib,js.Lib.onerror=null,com.inq.flash.client.control.FileUploadHandler={},com.inq.flash.client.control.FileUploadHandler.actionUpload=function(e,t){if("function"!=typeof t)throw new Error("Expecting a Function");var n=1e3*parseInt(com.inq.flash.client.control.FlashPeer.getFileTransferSize()||"5",10)*1e3,s=com.inq.flash.client.control.FlashVars.getValue("agID"),i=com.inq.flash.client.control.FlashPeer.getFileTransferUrl()+"/filetransfer/rest/cont/uploadFile",a=com.inq.flash.client.control.FlashVars.getValue("siteID");if(e){var o,l=new FormData,r=e.name;if(!com.inq.flash.client.control.FileUploadHandler.fileExtensionAllowed(r))return void t({status:"error",type:"uploadTypeError"});if(e.size>n)return void t({status:"error",type:"uploadSizeError"});l.append("file",e),l.append("siteId",a),(o=new XMLHttpRequest).open("POST",i),o.send(l),o.onreadystatechange=function(){if(200===o.status&&o.readyState===XMLHttpRequest.DONE){var e=JSON.parse(o.response);e&&200===e.responseStatus?(com.inq.flash.client.control.FileUploadHandler.sendFileURLToAgent(e,a,s),t({status:"success",type:"uploadSuccessText"})):t({status:"error",type:"unexpectedError"})}else 400===o.status&&o.readyState===XMLHttpRequest.DONE?t({status:"error",type:"uploadBadFile"}):o.readyState===XMLHttpRequest.DONE&&t({status:"error",type:"uploadServerError"})}}},com.inq.flash.client.control.FileUploadHandler.sendFileURLToAgent=function(e,t,n){var s=com.inq.flash.client.control.FlashPeer.getFileDeleteSetting()||"ON_CHAT_END",i=com.inq.flash.client.control.FlashPeer.getFileTransferApiUrl(),a=e.fileName,o=com.inq.flash.client.control.FileUploadHandler.buildFileURLString(i,t,a,n);com.inq.flash.client.control.ApplicationController.applicationController.sendFileUploadMessage(o,s)},com.inq.flash.client.control.FileUploadHandler.buildFileURLString=function(e,t,n,s){return e+"/chatfiles/"+t+"/"+encodeURI(n)+"?site="+t+"&agentGroup="+s},com.inq.flash.client.control.FileUploadHandler.fileExtensionAllowed=function(e){var t=com.inq.flash.client.control.FlashPeer.getfileTransferExtensions(),n=e.split(".").reverse()[0],s=[];return"string"==typeof t&&(s=t.split(",")),-1!==s.indexOf(n)},com.inq.flash.client.control.messagehandlers.CMSDKAuthorizedMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatAuthorizedMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKAuthorizedMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKAuthorizedMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKAuthorizedMessageHandler.prototype.processMessage=function(e){this.constructor.__super__.prototype.processMessage.call(this,e),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKAcceptedMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatAcceptedMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKAcceptedMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKAcceptedMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKAcceptedMessageHandler.prototype.processMessage=function(e){this.constructor.__super__.prototype.processMessage.call(this,e),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKUserResponseMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_AUTHENTICATED_USER_RESPONSE)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKUserResponseMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKUserResponseMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKUserResponseMessageHandler.prototype.processMessage=function(e){if(!this.getController().getChat().isAsyncChat()){var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_ID),n=e.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_CONFIG_IS_ASYNC_ENGAGEMENT);n&&(this.getController().getChat().setAsyncChat(n),com.inq.flash.client.control.FlashPeer.setAsyncChat(n),com.inq.flash.client.control.PersistenceManager.SetValue(CONVERSATION_ID,t),com.inq.flash.client.control.FlashPeer.fireCustomerAuthenticatedEvent(),this.getController().onNewChatRouterMessage(e))}},com.inq.flash.client.control.messagehandlers.CMSDKAutomatonDataMessageHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_DATA)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKAutomatonDataMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKAutomatonDataMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKAutomatonDataMessageHandler.prototype.processMessage=function(e){e.setMessageType(com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_DATA),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKDeniedMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatDeniedMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKDeniedMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKDeniedMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKDeniedMessageHandler.prototype.processMessage=function(e){e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DENIED_REASON)!==com.inq.flash.client.data.MessageFields.DATA_CHAT_DENIED_WRONG_REQUEST_FOR_RECONNECT_REASON?(this.getController().shutdown(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_CMSDKDMH),this.getController().onNewChatRouterMessage(e)):this.getController().handleChatLost()},com.inq.flash.client.control.messagehandlers.CMSDKExitMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatExitMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKExitMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKExitMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKExitMessageHandler.prototype.processMessage=function(e){var t="true"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CONVERSATION_RESOLVED),n={conversationResolved:t};com.inq.flash.client.control.FlashPeer.setEventDataForSurvey(n);var s=e.getPropertyAsBoolean(com.inq.flash.client.data.MessageFields.KEY_FORCED_CLOSE);t&&(s||com.inq.flash.client.control.FlashPeer.fireConversationResolvedEvent(),com.inq.flash.client.control.FlashPeer.resetConversationManager(),com.inq.flash.client.chatskins.SkinControl.conversationActive=!1);var i=!1;if(com.inq.flash.client.data.MessageFields.TYPE_CHAT_EXIT===e.getMessageType()&&"client"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USER_TYPE)?i=!0:com.inq.flash.client.control.FlashPeer.setAgentClosedChat(!0),this.getController().msgcntAtEntry=0,this.getController().clientDisconnect=i||!!s,!this.getController().getChat().isAsyncChat()||!this.getController().getChat().isCiEnabledOnResolve()&&t||s)this.getController().shutdown(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_CMSDK_EXIT);else{var a=this.getController().getChat().getChatID();this.getController().shutdownQuietly(com.inq.flash.client.chatskins.SkinControl.CLOSE_CHAT_REASON_CMSDK_EXIT),com.inq.flash.client.control.FlashPeer.endChatSession(a),com.inq.flash.client.control.PersistenceManager.ClearValues(),com.inq.flash.client.control.PersistenceManager.Close(),com.inq.flash.client.control.PersistenceManager.reopen()}this.getController().disable(),!this.getController().getChat().isAsyncChat()||!this.getController().getChat().isCiEnabledOnResolve()&&t||s||(com.inq.flash.client.control.FlashPeer.reinitializeChatWithNewId(),e.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_REINITIED,!0)),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKNeedWaitHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_NEED_WAIT)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKNeedWaitHandler,"com.inq.flash.client.control.messagehandlers.CMSDKNeedWaitHandler"),com.inq.flash.client.control.messagehandlers.CMSDKNeedWaitHandler.prototype.processMessage=function(e){this.controller.setFlagChatInQueue(!0),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKTypingActivityHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.TypingActivityHandler,com.inq.flash.client.control.messagehandlers.CMSDKTypingActivityHandler,"com.inq.flash.client.control.messagehandlers.CMSDKTypingActivityHandler"),com.inq.flash.client.control.messagehandlers.CMSDKTypingActivityHandler.prototype.processMessage=function(e){this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatCommunicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.prototype.processMessage=function(e){var t,n,s,i=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY);(s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS)?e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS):e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_AGENT_ALIAS))||(s=com.inq.flash.client.control.FlashVars.getFlashVars().agentName);var a=com.inq.flash.client.control.FlashVars.getCustomerName();e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_QUEUE?(this.getController().setFlagChatInQueue(!0),com.inq.flash.client.control.FlashPeer.onQueueWaitMsg(),t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ALIAS)):t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID);var o=e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME?com.inq.flash.client.data.MessageFields.KEY_CLIENT_OUTCOME_DATA:com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA,l=e.getProperty(o),r=!!t;r&&com.inq.utils.Util.URL_REGEX.test(l)&&(l=l.replace(com.inq.utils.Util.URL_REGEX,'<a href="$&" target="_blank">$&</a>')),n=null==e.getProperty(com.inq.flash.client.data.MessageFields.FORM_DATA)?e.getMessageType()===com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OUTCOME||e.getMessageType()===com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER||r?s:a:"",e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_OPENER||i||(e.getMessageType()==com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION&&(r&&"true"!==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_AUTO_OPENER)?(com.inq.flash.client.control.Incrementality.onInteracted(),com.inq.flash.client.control.Incrementality.onAgentMsg(l)):com.inq.flash.client.control.FlashVars.getCustomerName()===n&&com.inq.flash.client.control.Incrementality.onCustomerMsg(l)),r&&(this.getController().setFlagChatInQueue(!1),com.inq.flash.client.control.MinimizeManager.lastAgentMessage(l))),e.addProperty(com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.SENDER_NAME,n),e.addProperty(com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.IS_AGENT_MESSAGE,r),e.addProperty(com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.CHAT_FINAL_TEXT,l),this.getController().onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.SENDER_NAME="senderName",com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.IS_AGENT_MESSAGE="isAgentMsg",com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler.CHAT_FINAL_TEXT="chatFinalText",com.inq.flash.client.control.messagehandlers.CMSDKTransferResponse=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatroomTransferResponse,com.inq.flash.client.control.messagehandlers.CMSDKTransferResponse,"com.inq.flash.client.control.messagehandlers.CMSDKTransferResponse"),com.inq.flash.client.control.messagehandlers.CMSDKTransferResponse.prototype.processMessage=function(e){this.setAgent(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID),e),this.getController().onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKMemberConnectedMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatroomMemberConnectedMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKMemberConnectedMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKMemberConnectedMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKMemberConnectedMessageHandler.prototype.processMessage=function(e){e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_TYPE)==com.inq.flash.client.data.MessageFields.DATA_CHATROOM_MEMBER_AGENT&&(com.inq.flash.client.control.PersistenceManager.SetValue("va",null,!0,!0),this.controller.getChat().setAutomatonId(null)),e.getProperty(com.inq.flash.client.data.MessageFields.KEY_OWNER)==com.inq.flash.client.data.MessageFields.DATA_TRUE&&(this.getController().setConnectionAccepted(!0),this.setAgent(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHATROOM_MEMBER_ID),e));var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_IS_REASSIGNMENT_MODE),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_TC_MODE);n==com.inq.flash.client.data.MessageFields.DATA_TRANSFER||n==com.inq.flash.client.data.MessageFields.DATA_CONFERENCE&&e.getProperty(com.inq.flash.client.data.MessageFields.KEY_SCREENING)==com.inq.flash.client.data.MessageFields.DATA_FALSE||t==com.inq.flash.client.data.MessageFields.DATA_TRUE||e.addProperty(com.inq.flash.client.data.MessageFields.KEY_TC_MODE,"reconnected"),this.getController().onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKMemberLostMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatroomMemberLostMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKMemberLostMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKMemberLostMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKMemberLostMessageHandler.prototype.processMessage=function(e){this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKOwnerTransferResponseMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatroomOwnerTransferResponseMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKOwnerTransferResponseMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKOwnerTransferResponseMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKOwnerTransferResponseMessageHandler.prototype.processMessage=function(e){this.constructor.__super__.prototype.processMessage.call(this,e),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKCommandMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientCommandMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKCommandMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKCommandMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKCommandMessageHandler.prototype.processCommand=function(e,t){if(com.inq.flash.client.control.FlashPeer.isMultiChatSupported()){var n=e.getProperty(com.inq.flash.client.data.MessageFields.MASTER_WINDOW_ID);if(!t&&""!=n&&n!=com.inq.flash.client.control.FlashVars.getWindowId())return}var s,i=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_CMD_PARAM)||e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CLIENT_COMMAND_PARAM),a="inqNewWindow",o="client_command",l="client_function";i.startsWith(o)?com.inq.flash.client.chatskins.SkinControl.executeCustomCommand(HxOverrides.substr(i,o.length,null)):((s=i.indexOf(" to "))>=0&&(a=HxOverrides.substr(i,s+4,null),i=HxOverrides.substr(i,0,s)),!i.startsWith(l)||t?(this.controller.onNewChatRouterMessage(e),t||"goToPersistentChat"==i||"xform"!=i&&"show_input"!=i&&"hide_input"!=i&&com.inq.flash.client.chatskins.SkinControl.PushToFrameset(i,a)):com.inq.flash.client.chatskins.SkinControl.executeCustomCommand(JSON.stringify({cmdType:l,cmdParam:HxOverrides.substr(i,l.length,null).trim(),functionName:a.trim()})))},com.inq.flash.client.control.messagehandlers.CMSDKCobrowseMessageHandler=function(){this.constructor.__super__.call(this)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ChatCobrowseMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKCobrowseMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKCobrowseMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKCobrowseMessageHandler.prototype.processMessage=function(e){var t=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_AGENT_ALIAS),n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_CUSTOMER_QUIET),s="1"==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY),i=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USER_ID);if(null!=t){var a=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT);if(com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_END!=a)com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE_TEST!=a||s||this.executeCobrowseGetHTMLTest(),com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_INVITE==a||com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_SHARED_INVITE==a?this.controller.onNewChatRouterMessage(e):com.inq.flash.client.data.MessageFields.KEY_COBROWSE_EVENT_TYPE_AGENT_COBROWSE_SENT_FAIL_NO_CONNECTION!=a||s||this.sendCobrowseTestResult(!1,i);else{var o=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_TYPE);if(com.inq.flash.client.data.MessageFields.DATA_AGENT_TYPE_FLEX==o&&!s){var l=e.getProperty(com.inq.flash.client.data.MessageFields.WINDOW_ID_PARAM);com.inq.flash.client.chatskins.CoBrowseMgr.endCobByEtlEvent(l)}}}else n||this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKNinaCoachChatTakeOverMessageHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_NINA_COACH_CHAT_TAKE_OVER)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKNinaCoachChatTakeOverMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKNinaCoachChatTakeOverMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKNinaCoachChatTakeOverMessageHandler.prototype.processMessage=function(e){this.setAgent(e.getProperty(com.inq.flash.client.data.MessageFields.KEY_AGENT_ID),e,!1),"1"!==e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY)&&this.getController().onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKSystemMessageHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_SYSTEM)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKSystemMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKSystemMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKSystemMessageHandler.prototype.processMessage=function(e){this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKAutomatonRequestMessageHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_AUTOMATON_REQUEST)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKAutomatonRequestMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKAutomatonRequestMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKAutomatonRequestMessageHandler.prototype.processMessage=function(e){"1"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY)||com.inq.flash.client.control.Incrementality.onAgentMsg();var t=e.getProperty(com.inq.flash.client.data.MessageFields.TYPE_VA_DATA_PASS);t&&com.inq.flash.client.control.Incrementality.onVADataPass(t);var n=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_TYPE);if(null!=n&&n==com.inq.flash.client.data.MessageFields.DATA_CHATROOM_MEMBER_VIRTUAL_AGENT){var s=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_USERNAME);null!=s&&com.inq.flash.client.control.FlashVars.setCustomerName(s,!0)}var i=e.getProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_DATA),a='id="automaton_vaLink_'+e.getProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_TIMESTAMP)+'"';i=i.replace(/onclick(.*?)sendVALinkClicked\(event\).*?["']/,a),com.inq.utils.Capabilities.isMobile()&&(i=i.replace(/onclick/,"onTouchEnd")),e.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_AUTOMATON_DATA,i),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler=function(){com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_COMMUNICATION_SURVEY)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler.prototype.processMessage=function(e){var t=com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA,n=com.inq.flash.client.chatskins.SkinControl.prepareAsyncSurveyMessage(e.getProperty(t));e.addProperty(t,n),"1"===e.getProperty(com.inq.flash.client.data.MessageFields.KEY_REPLAY)||(this.getController().setFlagChatInQueue(!1),com.inq.flash.client.control.MinimizeManager.lastAgentMessage(n)),this.controller.onNewChatRouterMessage(e)},com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler.prototype.__class__=com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKDeniedReconnectMessageHandler=function(){this.constructor.__super__.call(this,com.inq.flash.client.data.MessageFields.TYPE_CHAT_DENIED_RECONNECT)},$hxClasses.extend(com.inq.flash.client.control.messagehandlers.ClientApplicationMessageHandler,com.inq.flash.client.control.messagehandlers.CMSDKDeniedReconnectMessageHandler,"com.inq.flash.client.control.messagehandlers.CMSDKDeniedReconnectMessageHandler"),com.inq.flash.client.control.messagehandlers.CMSDKDeniedReconnectMessageHandler.prototype.processMessage=function(e){com.inq.flash.client.chatskins.SkinControl.connectionLostClosingChat()},com.inq.flash.client.data.ChatCommunicationRichMessage=function(e,t,n,s){com.inq.flash.client.data.ChatCommunicationMessage.call(this,e,t,n),this.addProperty(com.inq.flash.client.data.MessageFields.KEY_MESSAGE_DATA,s)},$hxClasses.extend(com.inq.flash.client.data.ChatCommunicationMessage,com.inq.flash.client.data.ChatCommunicationRichMessage,"com.inq.flash.client.data.ChatCommunicationRichMessage"),com.inq.flash.client.data.ChatCommunicationRichMessage.prototype.__class__=com.inq.flash.client.data.ChatCommunicationRichMessage,com.inq.flash.client.control.CMSDKAppController=function(){this.constructor.__super__.call(this),this.apiMsgContext=new com.inq.utils.Dictionary,this.customerEngaged=!1,this.seqNo=0,this.minimized=!1},$hxClasses.extend(com.inq.flash.client.control.ApplicationController,com.inq.flash.client.control.CMSDKAppController,"com.inq.flash.client.control.CMSDKAppController"),com.inq.flash.client.control.CMSDKAppController.prototype.registerMessageHandlers=function(){this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKAcceptedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ClientAuthDataMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKAuthorizedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKDeniedReconnectMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKDeniedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.StateChangeMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKExitMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKNeedWaitHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKTypingActivityHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ChatLineMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKCommunicationSurveyMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKAutomatonDataMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKCommunicationMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKTransferResponse),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKMemberConnectedMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKMemberLostMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKOwnerTransferResponseMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CommandMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKCommandMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKCobrowseMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ErrorHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.AgentDataPassMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.ContinueTransitionHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKSystemMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKNinaCoachChatTakeOverMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKAutomatonRequestMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.CMSDKUserResponseMessageHandler),this.registerHandler(new com.inq.flash.client.control.messagehandlers.AsyncUnauthTokenInfoMessageHandler),com.inq.aria.AriaMsg={addAriaMsg:$noop()},com.inq.flash.client.chatskins.SkinControl=this.skinControl={HOUR:36e5,CLOSE_CHAT_REASON_UNKNOWN:"0",CLOSE_CHAT_REASON_CUSTOMER_CLOSED:"4",CLOSE_CHAT_REASON_CMSDKDMH:"9",CLOSE_CHAT_REASON_CMSDK_EXIT:"13",getInitialClickstreamData:function(){var e=com.inq.flash.client.control.ClickStreamBuilder;return e.parseInitialClickstreamData()+e.IdentifyPlatform()+e.parseURLfromClickStreamData()+e.parseDFVfromClickStreamData()},isClick2WebCall:function(){return!1},agentClosesChat:function(){com.inq.flash.client.chatskins.CoBrowseMgr.agentEndsCob(),Application.application.applicationController.prepareClosing(),Application.application.applicationController.disable(),this.startPostChatTimer()},getOpener:function(){return window.parent.opener.inqFrame},showIntroductionAfterPreloadMessages:$noop,topicId:null,fireCustomEvent:function(e,t){if("PrechatSurveyShown"==e){if(1==com.inq.flash.client.control.PersistenceManager.GetValue(PRE_CHAT_SURVEY_SHOWN))return;com.inq.flash.client.control.PersistenceManager.SetValue(PRE_CHAT_SURVEY_SHOWN,1)}else if("PrechatSurveyCompleted"==e){if(1==com.inq.flash.client.control.PersistenceManager.GetValue(PRE_CHAT_SURVEY_COMPLETED))return;com.inq.flash.client.control.PersistenceManager.SetValue(PRE_CHAT_SURVEY_COMPLETED,1)}com.inq.flash.client.control.FlashPeer.fireCustomEvent(e,null,null,t)},parseConversationTranscript:function(e,t){var n,s,i="string"==typeof e?JSON.parse(e):e,a="string"==typeof i.data?JSON.parse(i.data):i.data;if(a.conversations)if(a.conversations.length>0){var o=a.conversations[a.conversations.length-1];com.inq.flash.client.chatskins.SkinControl.topicId=o.topicID,com.inq.flash.client.chatskins.SkinControl.topicName=o.topicName,com.inq.flash.client.chatskins.SkinControl.conversationActive="active"===o.outcome||"followup"===o.outcome,com.inq.flash.client.chatskins.SkinControl.conversationActive&&((n=a.customerID)&&com.inq.flash.client.control.PersistenceManager.SetValue(INITIAL_CUSTOMER_ID,n),(s=o.conversationID)&&com.inq.flash.client.control.PersistenceManager.SetValue(CONVERSATION_ID,s)),t(a.conversations)}else t([]);else com.inq.flash.client.chatskins.SkinControl.topicId=a.topicID,com.inq.flash.client.chatskins.SkinControl.topicName=a.topicName,com.inq.flash.client.chatskins.SkinControl.conversationActive="active"===a.outcome||"followup"===a.outcome,com.inq.flash.client.chatskins.SkinControl.conversationActive&&((n=a.customerID)&&com.inq.flash.client.control.PersistenceManager.SetValue(INITIAL_CUSTOMER_ID,n),(s=a.conversationID)&&com.inq.flash.client.control.PersistenceManager.SetValue(CONVERSATION_ID,s)),t([a]);Application.application.setAsyncLoading(!1)},closeChatOneHourTimer:function(e){if(!Application.application.applicationController.getChat().getHasAuthorized()){var t=new Date;if(e.getTime()<t.getTime()-this.HOUR){var n=Application.application.applicationController;n.timeoutCb&&n.timeoutCb(),n.closeChat()}else setTimeout((function(){com.inq.flash.client.chatskins.SkinControl.closeChatOneHourTimer(e)}),12e4)}},clearTranscriptArray:$noop,prepareAsyncSurveyMessage:function(e,t){return/(?:launchNativePostChatSurvey)/.test(e)&&(t=t||"",e=e.replace(/href=(?:"|')(.+?)(?:"|')/,(function(e,n){return'href="#" data-survey-url="'+n+"&conversationID="+t+'"'}))),e},connectionLostClosingChat:function(){Application.application.applicationController.isConnected()&&(com.inq.flash.client.control.FlashPeer.setDisconnectFlag(),Application.application.applicationController.disable(),Application.application.applicationController.prepareClosing(),Application.application.applicationController.failedCb?Application.application.applicationController.failedCb():this.persistentReconnect&&!this.preloadMsgComplete&&Application.application.applicationController.onPreloadComplete("failed"))},getInitialTimeout:function(e){return parseInt(com.inq.utils.Util.getConfig("initialTimeOut",com.inq.flash.client.control.FlashPeer.getInitialTimeout()))},setupTimeoutTimer:function(){var e,t=(new Date).getTime(),n=com.inq.flash.client.control.PersistenceManager.GetValue(CHAT_WINDOW_APPEARED,0),s=this.getInitialTimeout();s!==com.inq.flash.client.control.FlashPeer.getInitialTimeout()&&com.inq.flash.client.control.PersistenceManager.SetValue("it",s,!1),0==n?(com.inq.flash.client.control.PersistenceManager.SetValue(CHAT_WINDOW_APPEARED,t,!1),e=s):e=s-(t-n)/1e3,this.startTimer(e)},startTimer:function(e,t){com.inq.flash.client.control.FlashPeer.isAsyncUnauthUser()||(t||(t=function(){clearTimeout(this.timerTimeout),com.inq.flash.client.control.FlashPeer.isOne2ManyChatEnabled()||this.onTimeout(),this.timerTimeout=null}),this.initializeTimerTimeout(e,t))},StopTimer:function(){null!=this.timerTimeout&&(clearTimeout(this.timerTimeout),this.timerTimeout=null)},initializeTimerTimeout:function(e,t){try{if(!e)return void haxe.Log.trace("Timeout value was not set. Timeout will not occur.");var n=Math.pow(2,32)-1;(isNaN(e)||e<0||e>n)&&(haxe.Log.trace("Default time out is used if timeoutSec is negative, it is bigger than maxTimeOut, or it is a NaN"),e=com.inq.flash.client.control.FlashPeer.getInitialTimeout()),this.timerTimeout=setTimeout(t.bind(this),1e3*e)}catch(e){}this.timeoutTime=e,this.timeoutAction=t},onTimeout:function(){this.StopTimer();var e=Application.application.applicationController;e.timeoutCb&&e.timeoutCb(),e.closeChat()},executeCustomCommand:function(e){return com.inq.flash.client.control.FlashPeer.executeCustomCommand(e)},PushToFrameset:function(e,t){try{var n=com.inq.flash.client.control.FlashPeer.getClientPageURL(),s="/"!=HxOverrides.substr(e,e.length-1,null)?e:HxOverrides.substr(e,0,e.length-1);if(n="/"!=HxOverrides.substr(n,n.length-1,null)?n:HxOverrides.substr(n,0,n.length-1),"_self"==t.toLowerCase()&&n.toLowerCase()==s.toLowerCase())return void haxe.Log.trace("SkinControl.PushToFrameset: already at target URL",{fileName:"SkinControl.hx",lineNumber:801,className:"com.inq.flash.client.chatskins.SkinControl",methodName:"PushToFrameset"});com.inq.flash.client.control.FlashPeer.PushToFrameset(s,t)}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;com.inq.flash.client.chatskins.XTrace.StackTrace("SkinControl.PushToFrameset:"+Std.string(e),"error")}},startPostChatTimer:function(){this.startTimer(this.getPostChatTimeout(),function(){this.StopTimer(),this.closeChat()}.bind(this))},getPostChatTimeout:function(){return parseInt(com.inq.utils.Util.getConfig("postChatTimeOut",3600))},AddTranscriptItemToChatWindow:$noop(),getIsPersistentChat:function(){return com.inq.flash.client.control.FlashPeer.isPersistentWindow()},isClick2call:function(){return!1},actionBtnCloseChat:function(){Application.application.applicationController.closeChat()},isContinued:function(){return!!com.inq.flash.client.control.FlashVars.isContinued()},closeChat:function(){com.inq.flash.client.control.FlashPeer.closeChat(Application.application.applicationController.isConnected())}},com.inq.flash.client.control.MinimizeManager={count:0,isMinimized:function(){return this.count=com.inq.flash.client.control.PersistenceManager.GetValue(MINIMIZED_COUNT,-1),Application.application.applicationController.minimized||-1!=this.count},lastAgentMessage:function(){this.isMinimized()&&(this.count++,com.inq.flash.client.control.PersistenceManager.SetValue(MINIMIZED_COUNT,this.count))},restore:function(){com.inq.flash.client.control.PersistenceManager.SetValue(MINIMIZED_COUNT,-1),this.count=0},reset:function(){com.inq.flash.client.control.PersistenceManager.SetValue(MINIMIZED_COUNT,0),this.count=0},actionMinimize:function(){},actionRestore:function(){}},com.inq.ui.Container={_getElementById:function(e,t){if(null==t)t=window.document;else if(t==window.parent.document&&window.getParentElByIDTFacade)return window.getParentElByIDTFacade(e);return t.getElementById(e)}},com.inq.flash.client.control.FlashPeer.setCiFunction("ciActionBtnCloseChat",com.inq.flash.client.chatskins.SkinControl.actionBtnCloseChat)},com.inq.flash.client.control.CMSDKAppController.prototype.connectionEstablished=function(){com.inq.flash.client.control.FlashPeer.setCABeacon(this.chat.BEACON_ACTIVATE),this.wasConnected=!0;var e=null;Boolean(com.inq.flash.client.control.FlashVars.isContinued())&&0!=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)?this.isAgentAssigned()&&this.setConnectionAccepted(!0):(e=new com.inq.flash.client.data.ChatRequestMessage(this.chat,com.inq.flash.client.control.FlashPeer.isPersistentWindow(),this.agentID,0,this,this.chat.isAsyncReconnect()),this.sendMessage(e,this.engageChatSuccess.bind(this),this.engageChatError.bind(this))),this.persistentReconnect&&(this.playQueueMessages(),this.queueMessages=!1)},com.inq.flash.client.control.CMSDKAppController.prototype.setAgentConfig=function(e,t,n,s,i){null==n&&(n=!1),this.agentID=e,this.setFlagChatInQueue(!1),com.inq.flash.client.control.FlashPeer.setAgentConfig(e,n,t,s,i)},com.inq.flash.client.control.CMSDKAppController.prototype.engage=function(e,t,n,s){Boolean(com.inq.flash.client.control.FlashVars.isContinued())&&0!=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0)||(this.waitingToExitChat=!1,this.intentionalDisconnect&&(this.wasConnected=!1,this.intentionalDisconnect=!1,com.inq.flash.client.control.PersistenceManager.reopen(),this.framework.enableForReEngaging()),n&&this.setEngageParameters(n),this.setApiContext(com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST,{text:e,cb:s,autoConnect:t,params:n}),this.attemptingConnection=!0,this.intentionalDisconnect=!1,this.queueMessages=!0,this.framework.connect())},com.inq.flash.client.control.CMSDKAppController.prototype.engageChatSuccess=function(e){var t=com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST;com.inq.flash.client.control.PersistenceManager.SetValue(CHAT_ENGAGED,!0,!1,!0),com.inq.flash.client.chatskins.SkinControl.StopTimer();var n=this.getApiContext(t);if(n){var s={messageType:t,statusType:e.type,httpStatus:e.target.responseStatus,asyncReconnect:this.chat.isAsyncReconnect(),windowId:com.inq.flash.client.control.FlashVars.getWindowId()};if(n.autoConnect){var i=new com.inq.flash.client.data.ChatEngageMessage(this.chat,n.text,n.params&&n.params.clientOutcome||"",this.getAgentAlias());this.sendText(i)}else{if(this.isAutomatonMode()&&this.autoConnectedCb)return void this.autoConnectedCb(s);n.text&&this.sendText(this.getMessage(n.text,0))}n.cb&&n.cb(s)}},com.inq.flash.client.control.CMSDKAppController.prototype.engageChatError=function(e){var t=com.inq.flash.client.data.MessageFields.TYPE_CHAT_REQUEST,n=this.getApiContext(t);n&&n.cb&&n.cb({messageType:t,statusType:e.type,httpStatus:e.target.responseStatus})},com.inq.flash.client.control.CMSDKAppController.prototype.setApiContext=function(e,t){this.lastApiKey=e,this.apiMsgContext[e]=t},com.inq.flash.client.control.CMSDKAppController.prototype.getApiContext=function(e){return this.apiMsgContext[e]},com.inq.flash.client.control.CMSDKAppController.prototype.getChatRouterMessages=function(e){this.setApiContext(com.inq.flash.client.control.CMSDKAppController.CRMESSAGES,{cb:e}),this.persistentReconnect||(this.framework.getMessages(),this.skinControl.clearTranscriptArray())},com.inq.flash.client.control.CMSDKAppController.prototype.onNewChatRouterMessage=function(e){var t;this.persistentReconnect&&"1"==e.data["chat.replay"]||this.chat.isAsyncReconnect()?(this.preloadMsgArray.push(e),"chat.communication"==e.data.messageType&&(this.seqNo+=1),0==this.framework.selectedConnectionHandler.processMessageQueue.length&&this.onPreloadComplete("success")):(t=this.getApiContext(com.inq.flash.client.control.CMSDKAppController.CRMESSAGES))&&t.cb&&("chat.communication"==e.data.messageType&&(this.seqNo+=1),t.cb(e))},com.inq.flash.client.control.CMSDKAppController.prototype.onLostConnection=function(){this.skinControl.connectionLostClosingChat()},com.inq.flash.client.control.CMSDKAppController.prototype.close=function(){this.disable(),this.customerEngaged=!1},com.inq.flash.client.control.CMSDKAppController.prototype.closeChat=function(){this.customerClosesPopup()&&this.sendChatExitMsg(null,"closeChat"),this.disable(),com.inq.flash.client.control.FlashPeer.onBeforeChatClosed(),Application.application.getPreventChatClosed()?(com.inq.flash.client.control.FlashPeer.endChatSession(this.chat.getChatID()),Application.application.setPreventChatClosed(!1),com.inq.flash.client.chatskins.SkinControl.startPostChatTimer(),this.msgcntAtEntry=0):(this.prepareClosing(),com.inq.flash.client.control.FlashPeer.closeChat(this.isConnected()),com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&window.parent.close()),this.customerEngaged=!1},com.inq.flash.client.control.CMSDKAppController.prototype.prepareClosing=function(){var e=this.chat.getChatID();com.inq.flash.client.control.FlashPeer.endChatSession(e),com.inq.flash.client.control.PersistenceManager.ClearValues(),com.inq.flash.client.control.PersistenceManager.Close(),com.inq.flash.client.chatskins.SkinControl.StopTimer(),com.inq.flash.client.control.PersistenceManager.SetValue(MINIMIZED_COUNT,-1),this.msgcntAtEntry=0},com.inq.flash.client.control.CMSDKAppController.prototype.sendCustomerMessage=function(e){var t=this.getMessage(e);this.sendChatCommunicationMessage(t,++this.seqNo),this.msgcntAtEntry++},com.inq.flash.client.control.CMSDKAppController.prototype.getMessage=function(e,t){var n=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,e,this.isUpdateUsername());return this.isUpdateUsername()&&this.cancelUpdateUsername(),n},com.inq.flash.client.control.CMSDKAppController.prototype.sendMessageOrQueue=function(e,t,n,s){if(this.queueMessages){var i=null==t?(new Date).getTime():t;this.messageQueue.push({clientTime:i,msg:e})}else this.sendMessage(e,n,s)},com.inq.flash.client.control.CMSDKAppController.prototype.chatActivity=function(e){"startTyping"==e?(this.getTypingActivity(!0),this.msgcntAtEntry<1&&!this.customerEngaged&&(window.setTimeout(com.inq.flash.client.control.Incrementality.onEngaged,0),this.customerEngaged=!0)):"stopTyping"==e?this.getTypingActivity(!1):"minimize"==e?(this.sendMinimizedMessage(),com.inq.flash.client.chatskins.SkinControl.fireCustomEvent("ChatMinimized"),com.inq.flash.client.control.PersistenceManager.SetValue(MINIMIZED_COUNT,0),this.minimized=!0):"restore"==e&&(this.sendRestoredMessage(),com.inq.flash.client.chatskins.SkinControl.fireCustomEvent("ChatRestored"),this.minimized=!1,com.inq.flash.client.control.MinimizeManager.restore())},com.inq.flash.client.control.CMSDKAppController.prototype.getTypingActivity=function(e){var t=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);if(this.firstMessageSent||t>0){var n=e?new com.inq.flash.client.data.ChatActivityMessage(this.chat,com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_TYPING,null,null):new com.inq.flash.client.data.ChatActivityMessage(this.chat,com.inq.flash.client.data.MessageFields.ACTIVITY_CUSTOMER_STOPS_TYPING,null,null);this.sendMessageOrQueue(n)}},com.inq.flash.client.control.CMSDKAppController.prototype.sendRichMessage=function(e,t,n){var s=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0),i=new com.inq.flash.client.data.ChatCommunicationRichMessage(this.chat,e,this.isUpdateUsername(),t);s>0?this.sendMessageOrQueue(i):this.isChatInProgress()||this.framework.isConnected()||this.engageAndSendMessage(i,n)},com.inq.flash.client.control.CMSDKAppController.prototype.engageAndSendMessage=function(e,t){this.queueMessages=!0,this.sendText(e),this.engage("",!1,null,t)},com.inq.flash.client.control.CMSDKAppController.prototype.persistentFrameReconnect=function(){if(!this.attemptingConnection){this.attemptingConnection=!0,this.queueMessages=!0;var e=com.inq.flash.client.control.PersistenceManager.GetValue(MESSAGE_COUNT,0);this.framework.setParam("count",e),this.persistentReconnect=!0,this.chatRouterListen=!1,this.framework.connect()}},com.inq.flash.client.control.CMSDKAppController.prototype.onChatShown=function(e,t,n,s,i){this.preloadedCb=e,this.failedCb=t,this.timeoutCb=n,this.autoConnectedCb=s,i||(this.preloadMsgArray=[],this.msgcntAtEntry>0&&Boolean(com.inq.flash.client.control.FlashVars.isContinued())?this.persistentFrameReconnect():com.inq.flash.client.control.FlashPeer.isEmbeddedThemeValid()||com.inq.flash.client.chatskins.SkinControl.setupTimeoutTimer())},com.inq.flash.client.control.CMSDKAppController.prototype.onPreloadComplete=function(e){this.preloadedCb&&this.preloadedCb({messages:this.preloadMsgArray,statusType:"success"==e?"complete":"failed",httpStatus:"success"==e?200:401,windowId:com.inq.flash.client.control.FlashVars.getWindowId()}),this.playQueueMessages(),this.queueMessages=!1},com.inq.flash.client.control.CMSDKAppController.prototype.isChatInProgress=function(){return this.msgcntAtEntry>0||com.inq.flash.client.control.PersistenceManager.GetValue(CHAT_ENGAGED,!1)},com.inq.flash.client.control.CMSDKAppController.prototype.sendVALinkClicked=function(e,t,n,s){var i,a=e.target||e.srcElement;if(i="A"==a.tagName?a:function(e,t){for(;e.parentNode&&e!=t;)if("A"===(e=e.parentNode).tagName)return e;return null}(a,e.currentTarget)){i.getAttribute("data-vtz-jump");var o,l=i.getAttribute("data-vtz-link-type"),r=i.getAttribute("data-vtz-browse"),c=!1,h=i.href.startsWith("javascript:");if("Web"==l&&r){if(c=!0,o=(o="##Url#"+r).substring(0,100),n&&!h&&(e.preventDefault?e.preventDefault():e.returnValue=!1,n(i)),!com.inq.utils.Util.getConfig("ninaLinkMessages",!0))return}else if("Dialog"==l)o=i.text,t&&t(o),e.preventDefault?e.preventDefault():e.returnValue=!1;else{if("touchend"!=e.type||!e.target.href||""==e.target.href||h)return!1;e.preventDefault(),window.setTimeout((function(){n?n(i):window.parent.location.href=e.target.href}),1e3)}for(var m=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,o),d=i.attributes,g=0;g<d.length;g++){var p=d[g].name;p.startsWith("data-vtz")&&m.addPropertyIfNotNull(p.replace("data-",""),d[g].value)}c&&(m.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"0"),m.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA_HIDDEN_FOR_CUSTOMER,"true")),this.addPageDataToMessage(m),this.isChatInProgress()||this.framework.isConnected()?this.sendChatCommunicationMessage(m,++this.seqNo):this.engageAndSendMessage(m,s)}},com.inq.flash.client.control.CMSDKAppController.prototype.sendVAMessage=function(e){for(var t=new com.inq.flash.client.data.ChatCommunicationMessage(this.chat,e.text),n=Object.keys(e.attributes),s=0;s<n.length;s++){var i=n[s];t.addPropertyIfNotNull(i,n[i])}hiddenMessage&&(t.addProperty(com.inq.flash.client.data.MessageFields.KEY_RETURN_RECEIPT,"0"),t.addProperty(com.inq.flash.client.data.MessageFields.KEY_CHAT_DATA_HIDDEN_FOR_CUSTOMER,"true")),this.addPageDataToMessage(t),this.sendChatCommunicationMessage(t,++this.seqNo)},com.inq.flash.client.control.CMSDKAppController.prototype.getOpenerScripts=function(e){if(!com.inq.flash.client.control.FlashPeer.isCEAPIPostChatSurveyMode()){var t=com.inq.flash.client.control.FlashVars.getValue("openerID"),n=com.inq.flash.client.control.FlashVars.getValue("openerName"),s=com.inq.flash.client.control.FlashVars.getValue("siteID");if(t<=0&&!n||!s)e([]);else{this.setApiContext(com.inq.flash.client.control.CMSDKAppController.OPENER_S,e);var i=Std.string(com.inq.flash.client.control.FlashVars.getValue("tagServerBaseURL"))+"tagserver/scripts/getScript?js=yes&siteID="+s;i+=n?"&scriptName="+Std.string(n):"&scriptID="+Std.string(t),this.scriptLoader=new com.inq.net.URLLoader;var a=new com.inq.net.URLRequest(i);this.scriptLoader.addEventListener(com.inq.events.Event.NETWORK_ERROR,$bind(this,this.openerScriptFailed)),this.scriptLoader.addEventListener(com.inq.events.Event.BAD_REQUEST,$bind(this,this.openerScriptFailed)),this.scriptLoader.addEventListener(com.inq.events.Event.COMPLETE,$bind(this,this.openerScriptsLoaded)),this.scriptLoader.load(a)}}},com.inq.flash.client.control.CMSDKAppController.prototype.openerScriptsLoaded=function(){var e=this.scriptLoader.data;this.scriptLoader=null;for(var t=Xml.parse(e).firstElement().elements(),n=new Array,s=0;t.hasNext();){var i=t.next();"script"==i.getNodeName()&&(n[s++]=com.inq.flash.messagingframework.StringUtils.htmlEncode(i.firstChild().toString()))}this.getApiContext(com.inq.flash.client.control.CMSDKAppController.OPENER_S)(n)},com.inq.flash.client.control.CMSDKAppController.prototype.openerScriptFailed=function(){this.getApiContext(com.inq.flash.client.control.CMSDKAppController.OPENER_S)([])},com.inq.flash.client.control.CMSDKAppController.prototype.sendSystemMessage=function(e){this.sendMessageOrQueue(new com.inq.flash.client.data.ChatCommunicationSystemMessage(this.chat,e,-1))},com.inq.flash.client.control.CMSDKAppController.CRMESSAGES="chat.messages",com.inq.flash.client.control.CMSDKAppController.OPENER_S="openers",window.Application=function(){this.constructor.__super__.call(this),Application.application=this,com.inq.utils.ConsoleLogger.redirectTraces(),this.initializeParameters(),this.applicationController=new com.inq.flash.client.control.CMSDKAppController,com.inq.flash.client.chatskins.CoBrowseMgr.init(),this.applicationController.registerMessageHandlers(),this.preventChatClose=!1},$hxClasses.extend(com.inq.events.EventDispatcher,Application,"Application"),Application.main=function(){com.inq.flash.client.control.PersistenceManager.reopen(),Application.application=null,com.inq.flash.client.control.ApplicationController.cleanUp();var e=new Application;com.inq.utils.Util.publish("Application",Application),com.inq.utils.Util.publish("Application.application",Application.application),com.inq.utils.Util.publish("Application.application.engage",$bind(Application.application,Application.application.engageChat)),com.inq.utils.Util.publish("Application.application.getMessages",$bind(Application.application,Application.application.getChatMessages)),com.inq.utils.Util.publish("Application.application.close",$bind(Application.application,Application.application.close)),com.inq.utils.Util.publish("Application.application.closeEngagement",$bind(Application.application,Application.application.closeChat)),com.inq.utils.Util.publish("Application.application.sendMessage",$bind(Application.application,Application.application.sendMessage)),com.inq.utils.Util.publish("Application.application.sendChatActivity",$bind(Application.application,Application.application.sendChatActivity)),com.inq.utils.Util.publish("Application.application.requestTranscript",$bind(Application.application,Application.application.requestTranscript)),com.inq.utils.Util.publish("Application.application.chatUIRendered",$bind(Application.application,Application.application.chatUIRendered)),com.inq.utils.Util.publish("Application.application.isChatInProgress",$bind(Application.application,Application.prototype.isInProgress)),com.inq.utils.Util.publish("Application.application.sendVALinkClicked",$bind(Application.application,Application.prototype.sendVALinkClicked)),com.inq.utils.Util.publish("Application.application.sendVAMessage",$bind(Application.application,Application.prototype.sendVAMessage)),com.inq.utils.Util.publish("Application.application.getOpeners",$bind(Application.application,Application.prototype.getOpeners)),com.inq.utils.Util.publish("Application.application.checkActiveConversation",$bind(Application.application,Application.prototype.isConversationActive)),com.inq.utils.Util.publish("Application.application.setCustomerName",$bind(Application.application,Application.prototype.setCustomerName)),com.inq.utils.Util.publish("Application.application.getCustomerName",$bind(Application.application,Application.prototype.getCustomerName)),com.inq.utils.Util.publish("Application.application.sendRichContentMessage",$bind(Application.application,Application.prototype.sendRichContentResponse)),com.inq.utils.Util.publish("Application.application.isConnected",$bind(Application.application,Application.prototype.isConnected)),com.inq.utils.Util.publish("Application.application.isAsyncChat",$bind(Application.application,Application.prototype.isAsyncChat)),com.inq.utils.Util.publish("Application.application.getAsyncChatMode",$bind(Application.application,Application.prototype.getAsyncChatMode)),com.inq.utils.Util.publish("Application.application.getPersistenceManager",$bind(Application.application,Application.prototype.getPersistenceManager)),com.inq.utils.Util.publish("Application.application.getImagePath",$bind(Application.application,Application.prototype.getImagePath)),com.inq.utils.Util.publish("Application.application.isMinimized",$bind(Application.application,Application.prototype.isMinimized)),com.inq.utils.Util.publish("Application.application.getMinimizedCount",$bind(Application.application,Application.prototype.getMinimizedCount)),com.inq.utils.Util.publish("Application.application.resetMinimizedCount",$bind(Application.application,Application.prototype.resetMinimizedCount)),com.inq.utils.Util.publish("Application.application.isChatQueued",$bind(Application.application,Application.prototype.isChatQueued)),com.inq.utils.Util.publish("Application.application.isPersistentWindow",$bind(Application.application,Application.prototype.isPersistentWindow)),com.inq.utils.Util.publish("Application.application.getDeviceType",$bind(Application.application,Application.prototype.getDeviceType)),com.inq.utils.Util.publish("Application.application.getChatParams",$bind(Application.application,Application.prototype.getChatParams)),com.inq.utils.Util.publish("Application.application.getPersistedValue",$bind(Application.application,Application.prototype.getPersistedValue)),com.inq.utils.Util.publish("Application.application.setPersistedValue",$bind(Application.application,Application.prototype.setPersistedValue)),com.inq.utils.Util.publish("Application.application.setPersistedValues",$bind(Application.application,Application.prototype.setPersistedValues)),com.inq.utils.Util.publish("Application.application.setAsyncLoading",$bind(Application.application,Application.prototype.setAsyncLoading)),com.inq.utils.Util.publish("Application.application.showOpenerForEndedConv",$bind(Application.application,Application.prototype.showOpenerForEndedConv)),com.inq.utils.Util.publish("Application.application.sendSystemMessage",$bind(Application.application,Application.prototype.sendSystemMessage)),com.inq.utils.Util.publish("Application.application.isVirtualAgent",$bind(Application.application,Application.prototype.isVirtualAgent)),com.inq.utils.Util.publish("Application.application.setOpeners",$bind(Application.application,Application.prototype.setOpeners)),com.inq.utils.Util.publish("window.inqFrame.com.inq.flash.client.control.MinimizeManager.actionMinimize",com.inq.flash.client.control.MinimizeManager.actionMinimize),com.inq.utils.Util.publish("window.inqFrame.com.inq.flash.client.control.MinimizeManager.actionRestore",com.inq.flash.client.control.MinimizeManager.actionRestore),com.inq.utils.Util.publish("window.inqFrame.com.inq.flash.client.control.MinimizeManager.isMinimized",com.inq.flash.client.control.MinimizeManager.isMinimized),com.inq.utils.Util.publish("Application.application.uploadFile",$bind(Application.application,Application.prototype.uploadFile)),com.inq.utils.Util.publish("com.inq.net.URLLoader",com.inq.net.URLLoader),com.inq.utils.Util.publish("com.inq.net.URLRequest",com.inq.net.URLRequest),com.inq.utils.Util.publish("com.inq.events.Event.COMPLETE",com.inq.events.Event.COMPLETE),com.inq.utils.Util.publish("Application.application.isContinued",$bind(Application.application,Application.prototype.isContinued)),com.inq.flash.client.control.WebRTCMgr={isEngaged:!1},e.notificationController={showConnectionIssuesMessage:$noop,hideNotification:$noop,showConnectionRestoredMessage:$noop},com.inq.flash.client.control.FlashPeer.isPersistentWindow()&&(window.onunload=function(e){return Application.application.closeChat(),!0},com.inq.flash.client.control.FlashPeer.setPersistentWindowActive(!0)),e[com.inq.utils.Util.configArea]={}},Application.prototype.initializeParameters=function(){this.parameters=new com.inq.utils.Dictionary;var e="";try{e=(e=com.inq.flash.client.control.FlashPeer.getFlashVars()).split("socket,").join("")}catch(e){if(!js.Boot.__instanceof(e,Error))throw e;haxe.Log.trace("ERRORS:"+Std.string(e),{fileName:"Application.hx",lineNumber:240,className:"Application",methodName:"initializeParameters"})}for(var t=e.split("&"),n=0;n<t.length;){var s=t[n];++n;var i=(""+s).split("=");this.parameters[i[0]]=1==i.length?null:decodeURIComponent(i[1])}com.inq.flash.client.control.FlashVars._init()},Application.prototype.fireMxmlEvent=function(){},Application.prototype.updateCustomerName=function(e){com.inq.flash.client.data.Chat.prototype.setUsername(e)},Application.prototype.setCustomerName=function(e){com.inq.flash.client.control.FlashVars.setCustomerName(e,!0),this.applicationController.updateUsername()},Application.prototype.getCustomerName=function(){return com.inq.flash.client.control.FlashVars.getCustomerName()},Application.prototype.engageChat=function(e,t,n,s){this.applicationController.engage(e,t,n,s)},Application.prototype.getChatMessages=function(e){this.applicationController.getChatRouterMessages(e)},Application.prototype.closeChat=function(){this.applicationController.closeChat()},Application.prototype.sendMessage=function(e){this.applicationController.sendCustomerMessage(e)},Application.prototype.sendChatActivity=function(e){this.applicationController.chatActivity(e)},Application.prototype.requestTranscript=function(e){com.inq.flash.client.control.FlashPeer.requestTranscript(e,com.inq.flash.client.control.FlashVars.getCustomerName())},Application.prototype.isVirtualAgent=function(){return com.inq.flash.client.control.PersistenceManager.GetValue(VIRTUAL_AGENT,null!=this.applicationController.chat.getAutomatonId()?1:0)},Application.prototype.setLiveAgent=function(){return com.inq.flash.client.control.PersistenceManager.SetValue(VIRTUAL_AGENT,1,!0,!0)},Application.prototype.isAgentAssigned=function(){return!!this.applicationController&&this.applicationController.isAgentAssigned()},Application.prototype.getOpenerScrips=function(e){},Application.prototype.chatUIRendered=function(e,t){var n=e.customerName,s=e.disconnectCb,i=e.reConnectCb,a=e.failedCb,o=e.previousMessagesCb,l=e.timeoutCloseCb,r=e.openerScripts,c=e.defaultAgentAlias,h=e.autoConnectedCb,m=com.inq.utils.Util.configArea;c&&(this[m].defaultAgentAlias=c,this[m].useAgentAlias=!0);var d=this;if(e[m]&&Object.keys(e[m]).forEach((function(t){d[m][t]=e[m][t]})),this.notificationController.showConnectionIssuesMessage=s,this.notificationController.showConnectionRestoredMessage=i,n&&com.inq.flash.client.control.FlashVars.setCustomerName(n,!0),this.applicationController.onChatShown(o,a,l,h,t),!t){if(Array.isArray(r)&&r.length>0){var g=this.applicationController.getAgentAlias();r.forEach((function(e){Application.application.applicationController.enqueueOpenerText(e,g)}))}com.inq.flash.client.control.FlashPeer.onChatShown(),this.applicationController.initializeAutomatonMode()}},Application.prototype.setOpeners=function(e,t){if(t&&(this[com.inq.utils.Util.configArea].defaultAgentAlias=t,this[com.inq.utils.Util.configArea].useAgentAlias=!0),Array.isArray(e)&&e.length>0){var n=this.applicationController.getAgentAlias();e.forEach((function(e){Application.application.applicationController.enqueueOpenerText(e,n)}))}},Application.prototype.sendVALinkClicked=function(e,t,n,s){return this.applicationController.sendVALinkClicked(e,t,n,s)},Application.prototype.sendVAMessage=function(e){return this.applicationController.sendVAMessage(e)},Application.prototype.getOpeners=function(e){return this.applicationController.getOpenerScripts(e)},Application.prototype.isInProgress=function(){return this.applicationController.isChatInProgress()},Application.prototype.setFocusOnInputField=function(){},Application.prototype.setTextFieldfocus=function(){},Application.prototype.isConversationActive=function(){return this.applicationController.skinControl.conversationActive},Application.processConversationTranscriptResponse=function(e,t){var n=!1;try{com.inq.flash.client.chatskins.SkinControl.parseConversationTranscript(e,t),n=!0}catch(e){t([]),haxe.Log.trace("Application.processConversationTranscriptResponse "+Std.string(e),{fileName:"CMSDKApp.js",className:"Application",methodName:"processConversationTranscriptResponse",customParams:["error"]})}return n},Application.prototype.customerEndsCobrowse=function(){com.inq.flash.client.chatskins.CoBrowseMgr.endCob()},Application.prototype.getButton=function(){},Application.prototype.sendRichContentResponse=function(e,t,n){this.applicationController.sendRichMessage(e,t,n)},Application.prototype.isConnected=function(){return!!this.applicationController&&this.applicationController.isConnected()&&!this.applicationController.isSendMessageFail()},Application.prototype.isAsyncChat=function(){return this.applicationController.chat.isAsyncChat()},Application.prototype.getAsyncChatMode=function(){return com.inq.flash.client.control.FlashVars.getValue("conversationMode")||Application.LAST},Application.prototype.showOpenerForEndedConv=function(){return this.applicationController.chat.showOpenerForEndedConversation},Application.prototype.getPersistenceManager=function(){return com.inq.flash.client.control.PersistenceManager.__inst},Application.prototype.getPersistedValue=function(e,t){return com.inq.flash.client.control.PersistenceManager.GetValue(e,t)},Application.prototype.setPersistedValue=function(e,t){com.inq.flash.client.control.PersistenceManager.SetValue(e,t)},Application.prototype.removePersistedValue=function(e){com.inq.flash.client.control.PersistenceManager.DeleteValue(e)},Application.prototype.setPersistedValues=function(e){com.inq.flash.client.control.PersistenceManager.SetValues(e)},Application.prototype.getImagePath=function(){if(this.imgpath)return this.imgpath;var e=com.inq.flash.client.control.FlashPeer.getSkin().split("/").pop().split(".").shift();return this.imgpath=com.inq.flash.client.control.FlashPeer.getImagePath()+e+"/",this.imgpath},Application.prototype.isMinimized=function(){return com.inq.flash.client.control.MinimizeManager.isMinimized()},Application.prototype.getMinimizedCount=function(){return com.inq.flash.client.control.MinimizeManager.count},Application.prototype.resetMinimizedCount=function(){return com.inq.flash.client.control.MinimizeManager.reset()},Application.prototype.isChatQueued=function(){return this.applicationController.isChatInQueue()},Application.prototype.isPersistentWindow=function(){return com.inq.flash.client.control.FlashPeer.isPersistentWindow()},Application.prototype.getDeviceType=function(){return com.inq.flash.client.control.FlashPeer.getDeviceType()},Application.prototype.getChatParams=function(){return this.applicationController.getChat()},Application.prototype.setPreventChatClosed=function(e){this.preventChatClose=e},Application.prototype.getPreventChatClosed=function(){return this.preventChatClose},Application.prototype.setAsyncLoading=function(e){com.inq.flash.client.chatskins.SkinControl.asyncTranscriptLoading=e},Application.prototype.uploadFile=function(e,t){com.inq.flash.client.control.FileUploadHandler.actionUpload(e,t)},Application.prototype.sendSystemMsg=function(e){this.applicationController.sendSystemMessage(e)},Application.prototype.close=function(){this.applicationController.close()},Application.prototype.isContinued=function(){return!!com.inq.flash.client.control.FlashVars.isContinued()},Application.LAST="last",window.$bind=function(e,t){var n=function(){return n.method.apply(n.scope,arguments)};return n.scope=e,n.method=t,n},window.$bindAll=function(e,t){function n(e){return"function"==typeof e&&!("scope"in e)}if(t)t.forEach((function(t){n(e[t])&&(e[t]=$bind(e,e[t]))}));else for(m in e)n(e[m])&&(e[m]=$bind(e,e[m]))},Object.defineProperty(String.prototype,"__class__",{value:$hxClasses.String=String,enumerable:!1}),String.__name__=["String"],Object.defineProperty(Array.prototype,"__class__",{value:$hxClasses.Array=Array,enumerable:!1}),Array.__name__=["Array"],Object.defineProperty(Date.prototype,"__class__",{value:$hxClasses.Date=Date,enumerable:!1}),Date.__name__=["Date"],window.Int=$hxClasses.Int={__name__:["Int"]},window.Dynamic=$hxClasses.Dynamic={__name__:["Dynamic"]},window.Float=$hxClasses.Float=Number,Float.__name__=["Float"],window.Bool=$hxClasses.Bool=Boolean,Bool.__ename__=["Bool"],window.Class=$hxClasses.Class={__name__:["Class"]},window.Enum={},window.Void=$hxClasses.Void={__ename__:["Void"]},Array.prototype.indexOf&&(HxOverrides.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)}),Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,$hxClasses.Math=Math,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},"undefined"!=typeof document&&(js.Lib.document=document),"undefined"!=typeof window&&(js.Lib.window=window,js.Lib.window.onerror=function(e,t,n){var s=js.Lib.onerror;return null!=s&&s(e,[t+":"+n])}),com.inq.flash.client.control.FlashPeer.getIsSkinLocal()&&8==com.inq.utils.Capabilities.getIeVersion()&&(window.Application=Application),com.inq.flash.client.control.FlashPeer.getIsBuilder()&&Application.main(),com.inq.utils.Util.publish("Application.main",Application.main),com.inq.utils.Util.publish("Application.fpInit",com.inq.flash.client.control.FlashPeer.init)}();
//# sourceMappingURL=InqFrameworkService.js.map